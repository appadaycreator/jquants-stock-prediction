# J-Quants 株価予測 Webダッシュボード

React/Next.jsベースのインタラクティブな株価予測ダッシュボードです。

## 機能

### 📊 ダッシュボード
- **リアルタイム株価チャート**: 移動平均線付きの価格推移
- **パフォーマンス指標**: MAE、R²、予測精度などの主要指標
- **インタラクティブグラフ**: Rechartsを使用した動的チャート
- **レスポンシブデザイン**: デスクトップ・モバイル対応

### 📈 予測結果
- **実際値 vs 予測値**: 比較グラフ表示
- **予測誤差分布**: バーチャートでの誤差可視化
- **散布図**: 実測値と予測値の相関分析

### 🏆 モデル比較
- **性能ランキング**: MAE、RMSE、R²での自動ランキング
- **詳細メトリクス**: 各モデルの包括的評価
- **ベストモデル選択**: 最優秀モデルの自動識別

### 🔍 分析
- **特徴量重要度**: バーチャートと円グラフでの可視化
- **データ分布**: 統計情報の詳細表示
- **トレンド分析**: 時系列パターンの解析

### 📄 レポート機能
- **エグゼクティブサマリー**: 主要指標の要約
- **詳細分析レポート**: モデル性能と市場インサイト
- **リスク評価**: 投資リスクとその軽減策
- **レポートエクスポート**: JSON形式でのダウンロード

### ⚙️ 設定
- **モデル設定**: プライマリモデル選択、再訓練設定
- **データ設定**: 更新間隔、データポイント数制限
- **UI設定**: テーマ、更新頻度、表示オプション

## 技術スタック

- **Frontend**: React 18, Next.js 15
- **UI Framework**: Tailwind CSS
- **Charts**: Recharts
- **Icons**: Lucide React
- **Build**: Turbopack
- **Deployment**: GitHub Pages
- **CI/CD**: GitHub Actions

## 📦 開発

### 必要な環境
- **Node.js 18+** (推奨: 18.17.0以上)
- **npm 9+** または **yarn 1.22+**
- **Git** (コード管理)

### クイックスタート

#### 1. リポジトリクローンとセットアップ
```bash
# メインプロジェクトから開始
cd jquants-stock-prediction

# Python環境でデータ生成
source venv/bin/activate
python3 generate_web_data.py

# Webアプリディレクトリに移動
cd web-app

# 依存関係インストール
npm install
```

#### 2. ローカル開発
```bash
# 開発サーバー起動（ホットリロード有効）
npm run dev

# ブラウザで http://localhost:3000 を開く
```

#### 3. 本番ビルド
```bash
# 本番用ビルド
npm run build

# ビルド結果確認
npm run start

# 静的エクスポート（GitHub Pages用）
npm run export
```

### 開発ワークフロー

#### データ更新付き開発
```bash
# 1. 最新の予測データを生成（Pythonプロジェクトルートから）
cd ../
python3 jquants_stock_prediction.py
python3 generate_web_data.py

# 2. Webアプリを開発モードで起動
cd web-app
npm run dev
```

#### ファイル監視とホットリロード
開発サーバー起動中は以下が自動監視されます：
- `src/` 配下のTSX/TSファイル
- `public/data/` 配下のJSONファイル
- CSS/Tailwindクラス
- 設定ファイル変更

### 環境変数
Next.js設定で自動的にGitHub Pages用のパスが設定されます：
- 本番環境: `/jquants-stock-prediction`
- 開発環境: `/`

## デプロイ

### GitHub Pages
1. GitHub リポジトリの Settings → Pages
2. Source: GitHub Actions を選択
3. メインブランチにプッシュすると自動デプロイ

### 手動デプロイ
```bash
# ビルド
npm run build

# dist フォルダを任意の静的ホスティングサービスにアップロード
```

## 🔄 データフロー

### 1. Python Backend
- `jquants_data_fetch.py` → J-Quants APIから株価データ取得
- `jquants_data_preprocessing.py` → 特徴量エンジニアリング  
- `jquants_stock_prediction.py` → 機械学習による予測実行
- `generate_web_data.py` → Web表示用JSONデータ生成

### 2. データファイル構造
```
web-app/public/data/
├── stock_data.json           # 基本株価データ
├── predictions.json          # 予測結果
├── model_comparison.json     # モデル比較結果
├── feature_analysis.json     # 特徴量重要度分析
├── performance_metrics.json  # 性能指標
└── dashboard_summary.json    # ダッシュボードサマリー
```

### 3. Frontend処理
- **Next.js App Router** → 静的サイト生成（SSG）
- **React コンポーネント** → インタラクティブUI
- **Recharts** → チャート描画とアニメーション
- **Tailwind CSS** → レスポンシブスタイリング

### 4. CI/CD パイプライン
- **GitHub Actions** → Python処理 + Next.jsビルド自動実行
- **GitHub Pages** → 静的ファイル自動デプロイ
- **自動データ更新** → プッシュ時にデータ再生成

## 📊 使い方ガイド

### 基本的な操作

#### ダッシュボード画面
1. **株価チャート**: 移動平均線付きの価格推移を表示
2. **KPI指標**: MAE、R²、予測精度などの主要指標
3. **リアルタイム更新**: データ変更時の自動リフレッシュ

#### 予測結果画面 (`/predictions`)
1. **実測値vs予測値**: 比較グラフとテーブル
2. **散布図**: 予測精度の視覚化
3. **誤差分析**: 残差プロットと統計

#### モデル比較画面 (`/models`) 
1. **性能ランキング**: 各モデルの評価指標比較
2. **詳細メトリクス**: MAE、RMSE、R²の詳細分析
3. **ベストモデル表示**: 最優秀モデルのハイライト

#### 分析画面 (`/analysis`)
1. **特徴量重要度**: バーチャートとドーナツチャート
2. **データ統計**: 基本統計量と分布
3. **相関分析**: 特徴量間の相関マトリックス

#### レポート画面 (`/reports`)
1. **エグゼクティブサマリー**: 投資判断に必要な要約
2. **詳細レポート**: 技術的分析と市場インサイト
3. **リスク評価**: 投資リスクと軽減策
4. **PDF/JSONエクスポート**: レポートのダウンロード

#### 設定画面 (`/settings`)
1. **モデル設定**: プライマリモデル選択、再訓練設定
2. **データ設定**: 更新間隔、データポイント数制限
3. **UI設定**: ダークモード、チャート設定、表示オプション

### インタラクティブ機能

#### チャート操作
- **ズーム**: マウスホイールまたはピンチ
- **パン**: ドラッグで移動
- **ツールチップ**: ポイントホバーで詳細表示
- **レジェンド**: クリックでデータ系列の表示/非表示

#### データフィルタリング
- **日付範囲選択**: カレンダーピッカー
- **モデル選択**: ドロップダウンメニュー
- **メトリクス選択**: チェックボックス
- **リアルタイム更新**: 自動リフレッシュ設定

#### エクスポート機能
- **グラフ画像**: PNG、SVG形式でダウンロード
- **データテーブル**: CSV、JSON形式でエクスポート
- **レポート**: PDF形式でのフルレポート
- **設定**: 設定ファイルのJSONエクスポート

### モバイル対応

#### レスポンシブデザイン
- **ブレークポイント**: sm(640px), md(768px), lg(1024px), xl(1280px)
- **フレキシブルレイアウト**: グリッドとフレックスボックス
- **タッチ操作**: スワイプ、ピンチズーム対応
- **縦画面最適化**: ポートレートモード専用レイアウト

#### モバイル専用機能
- **スワイプナビゲーション**: 画面間の直感的移動
- **プルトゥリフレッシュ**: データ更新の簡単操作
- **ハンバーガーメニュー**: コンパクトなナビゲーション
- **フルスクリーンチャート**: モバイル専用表示モード

## カスタマイズ

### 新しいチャートの追加
`src/app/page.tsx` にRechartsコンポーネントを追加

### 新しいページの追加
`src/app/[ページ名]/page.tsx` ファイルを作成

### スタイリングの変更
Tailwind CSSクラスを使用してスタイリング

## パフォーマンス

- **バンドルサイズ**: 約226KB (First Load JS)
- **静的生成**: 全ページ事前生成
- **画像最適化**: Next.js自動最適化
- **コード分割**: 自動的なチャンク分割

## ブラウザサポート

- Chrome (最新)
- Firefox (最新) 
- Safari (最新)
- Edge (最新)

## ライセンス

MIT License