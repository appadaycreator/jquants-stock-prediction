(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3826],{26993:function(e,t,s){Promise.resolve().then(s.bind(s,323))},323:function(e,t,s){"use strict";s.d(t,{default:function(){return F}});var a=s(57437),l=s(2265),r=s(32660),n=s(92735),i=s(68919),c=s(98728),o=s(27648),d=s(96215),x=s(32489),h=s(31047),m=s(70525),u=s(98239),g=s(57586),f=s(42488),b=s(11239),p=s(3085),j=s(47416),v=s(28124),N=s(3577),w=s(14822),y=s(40476),S=s(69076),k=s(43391),C=s(45802),M=e=>{let{data:t,symbol:s,height:r=600,width:n,showVolume:i=!0,showIndicators:o=!0,theme:x="light",onDataPointClick:h,onIndicatorToggle:u,className:g=""}=e,f=(0,l.useRef)(null),b=(0,l.useRef)(null),[j,v]=(0,l.useState)({width:0,height:0}),[N,w]=(0,l.useState)(null),[y,M]=(0,l.useState)(1),[L,E]=(0,l.useState)(0),[R,A]=(0,l.useState)(0),[T,Z]=(0,l.useState)(!1),[D,P]=(0,l.useState)({x:0,y:0}),[_,F]=(0,l.useState)(!1),[W,z]=(0,l.useState)([{name:"SMA 20",type:"sma",period:20,color:"#3b82f6",visible:!0},{name:"SMA 50",type:"sma",period:50,color:"#f59e0b",visible:!0},{name:"RSI",type:"rsi",period:14,color:"#8b5cf6",visible:!1},{name:"MACD",type:"macd",period:12,color:"#10b981",visible:!1}]),G=(0,l.useCallback)(()=>{if(b.current){let e=b.current.getBoundingClientRect();v({width:n||e.width,height:r})}},[n,r]);(0,l.useEffect)(()=>(G(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)),[G]);let B=(0,l.useCallback)((e,t)=>{let s=[];for(let a=0;a<e.length;a++)if(a<t-1)s.push(NaN);else{let l=e.slice(a-t+1,a+1).reduce((e,t)=>e+t.close,0);s.push(l/t)}return s},[]),O=(0,l.useCallback)((e,t)=>{let s=[],a=[],l=[];for(let t=1;t<e.length;t++){let s=e[t].close-e[t-1].close;a.push(s>0?s:0),l.push(s<0?Math.abs(s):0)}for(let r=0;r<e.length;r++)if(r<t)s.push(NaN);else{let e=100-100/(1+a.slice(r-t,r).reduce((e,t)=>e+t,0)/t/(l.slice(r-t,r).reduce((e,t)=>e+t,0)/t||1e-4));s.push(e)}return s},[]),H=(0,l.useMemo)(()=>{let e={};return W.forEach(s=>{if(s.visible)switch(s.type){case"sma":e[s.name]=B(t,s.period);break;case"rsi":e[s.name]=O(t,s.period)}}),e},[t,W,B,O]),U=(0,l.useCallback)(()=>{let e=f.current;if(!e||!t.length)return;let s=e.getContext("2d");if(!s)return;let{width:a,height:l}=j,r=window.devicePixelRatio||1;e.width=a*r,e.height=l*r,s.scale(r,r);let n=s.createLinearGradient(0,0,0,l);"dark"===x?(n.addColorStop(0,"#1e293b"),n.addColorStop(1,"#0f172a")):(n.addColorStop(0,"#f8fafc"),n.addColorStop(1,"#f1f5f9")),s.fillStyle=n,s.fillRect(0,0,a,l),s.strokeStyle="dark"===x?"#334155":"#e2e8f0",s.lineWidth=1,s.setLineDash([2,4]);for(let e=0;e<=10;e++){let t=l/10*e;s.beginPath(),s.moveTo(0,t),s.lineTo(a,t),s.stroke()}for(let e=0;e<=20;e++){let t=a/20*e;s.beginPath(),s.moveTo(t,0),s.lineTo(t,l),s.stroke()}s.setLineDash([]);let c=t.slice(Math.max(0,Math.floor(-L/10)),Math.min(t.length,Math.floor((a-L)/10)));if(0===c.length)return;let o=c.map(e=>[e.high,e.low]).flat(),d=Math.max(...o),h=d-Math.min(...o);if(c.forEach((e,t)=>{let r=40+t*(a-80)/c.length+L,n=e.close>e.open;s.strokeStyle=n?"#10b981":"#ef4444",s.lineWidth=2,s.beginPath(),s.moveTo(r,40+(d-e.high)/h*(l-80)),s.lineTo(r,40+(d-e.low)/h*(l-80)),s.stroke();let i=40+(d-Math.max(e.open,e.close))/h*(l-80),o=40+(d-Math.min(e.open,e.close))/h*(l-80),x=Math.max(1,o-i),m=Math.max(4,(a-80)/c.length*.6),u=s.createLinearGradient(0,i,0,o);n?(u.addColorStop(0,"#10b981"),u.addColorStop(1,"#059669")):(u.addColorStop(0,"#ef4444"),u.addColorStop(1,"#dc2626")),s.fillStyle=u,s.fillRect(r-m/2,i,m,x),s.strokeStyle=n?"#059669":"#dc2626",s.lineWidth=1,s.strokeRect(r-m/2,i,m,x)}),W.forEach(e=>{if(!e.visible||!H[e.name])return;let r=H[e.name];s.strokeStyle=e.color,s.lineWidth=2,s.setLineDash("sma"===e.type?[]:[5,5]),s.beginPath();let n=!0;r.forEach((e,r)=>{if(isNaN(e))return;let i=40+r*(a-80)/t.length+L,c=40+(d-e)/h*(l-80);n?(s.moveTo(i,c),n=!1):s.lineTo(i,c)}),s.stroke()}),s.setLineDash([]),i){let e=Math.max(...c.map(e=>e.volume)),t=.2*l;c.forEach((r,n)=>{let i=40+n*(a-80)/c.length+L,o=r.volume/e*t,d=(a-80)/c.length*.8,x=s.createLinearGradient(0,l-o,0,l);x.addColorStop(0,"#3b82f6"),x.addColorStop(1,"#1d4ed8"),s.fillStyle=x,s.fillRect(i-d/2,l-o,d,o)})}if(N){let e=40+t.indexOf(N)*(a-80)/t.length+L;s.strokeStyle="#6b7280",s.lineWidth=1,s.setLineDash([5,5]),s.beginPath(),s.moveTo(e,0),s.lineTo(e,l),s.stroke(),s.setLineDash([])}},[t,j,x,L,R,y,N,W,H,i]),Y=(0,l.useCallback)(e=>{if(!f.current)return;let s=f.current.getBoundingClientRect(),a=e.clientX-s.left,l=e.clientY-s.top;if(T){let e=a-D.x,t=l-D.y;E(t=>Math.max(-1e3,Math.min(1e3,t+e))),A(e=>Math.max(-1e3,Math.min(1e3,e+t)))}P({x:a,y:l});let r=Math.floor((a-40)/(j.width-80)*t.length);r>=0&&r<t.length&&w(t[r])},[T,D,j.width,t]),I=(0,l.useCallback)(e=>{Z(!0),P({x:e.clientX,y:e.clientY})},[]),$=(0,l.useCallback)(()=>{Z(!1)},[]),V=(0,l.useCallback)(e=>{e.preventDefault();let t=e.deltaY>0?.9:1.1;M(e=>Math.max(.5,Math.min(3,e*t)))},[]);return(0,l.useEffect)(()=>{U()},[U]),(0,a.jsxs)("div",{ref:b,className:"professional-chart-container ".concat(g),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm border-b",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-green-500"}),(0,a.jsxs)("span",{children:["高値: \xa5",Math.max(...t.map(e=>e.high)).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsxs)("span",{children:["安値: \xa5",Math.min(...t.map(e=>e.low)).toLocaleString()]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>M(1),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"リセット",children:(0,a.jsx)(S.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>M(e=>Math.min(3,1.2*e)),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"ズームイン",children:(0,a.jsx)(k.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>M(e=>Math.max(.5,.8*e)),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"ズームアウト",children:(0,a.jsx)(C.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>F(!_),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"設定",children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("canvas",{ref:f,width:j.width,height:j.height,onMouseMove:Y,onMouseDown:I,onMouseUp:$,onMouseLeave:$,onWheel:V,className:"cursor-crosshair",style:{transform:"scale(".concat(y,")"),transformOrigin:"top left"}}),N&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 max-w-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:new Date(N.time).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",weekday:"short"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"始値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-green-800",children:["\xa5",N.open.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"終値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-red-800",children:["\xa5",N.close.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"高値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-blue-800",children:["\xa5",N.high.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"安値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-purple-800",children:["\xa5",N.low.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"出来高"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:N.volume.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"変動率"}),(0,a.jsxs)("span",{className:"text-sm font-semibold ".concat(N.close>N.open?"text-green-600":"text-red-600"),children:[((N.close-N.open)/N.open*100).toFixed(2),"%"]})]})]})]}),_&&(0,a.jsxs)("div",{className:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 w-80",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"テクニカル指標"}),(0,a.jsx)("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,a.jsx)("div",{className:"space-y-3",children:W.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name})]}),(0,a.jsx)("button",{onClick:()=>{let e=[...W];e[t].visible=!e[t].visible,z(e)},className:"px-3 py-1 text-xs rounded-md transition-colors ".concat(e.visible?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.visible?"表示":"非表示"})]},e.name))})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{children:"SMA 20"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,a.jsx)("span",{children:"SMA 50"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,a.jsx)("span",{children:"RSI"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["ズーム: ",Math.round(100*y),"% | データ数: ",t.length]})]})]})},L=s(89227),E=s(33276),R=s(58896),A=e=>{var t,s,r,n,i;let{data:c,symbol:o,height:d=600,width:x,enableAnimation:h=!0,animationSpeed:b=1e3,showVolume:j=!0,showTrendLines:v=!0,onDataPointClick:N,className:w=""}=e,y=(0,l.useRef)(null),k=(0,l.useRef)(null),C=(0,l.useRef)(),[M,A]=(0,l.useState)({width:0,height:0}),[T,Z]=(0,l.useState)(!1),[D,P]=(0,l.useState)(0),[_,F]=(0,l.useState)(null),[W,z]=(0,l.useState)([]),[G,B]=(0,l.useState)(!1),O=(0,l.useCallback)(()=>{if(k.current){let e=k.current.getBoundingClientRect();A({width:x||e.width,height:d})}},[x,d]);(0,l.useEffect)(()=>(O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)),[O]);let H=(0,l.useCallback)(e=>{let t=[],s=0,a=0,l=e[0].low;for(let r=1;r<e.length;r++)e[r].low<l?(a-s>5&&t.push({start:s,end:a,color:"#10b981"}),s=r,a=r,l=e[r].low):a=r;let r=0,n=0,i=e[0].high;for(let s=1;s<e.length;s++)e[s].high>i?(n-r>5&&t.push({start:r,end:n,color:"#ef4444"}),r=s,n=s,i=e[s].high):n=s;z(t)},[]),U=(0,l.useCallback)(()=>{let e=y.current;if(!e||!c.length)return;let t=e.getContext("2d");if(!t)return;let{width:s,height:a}=M,l=window.devicePixelRatio||1;e.width=s*l,e.height=a*l,t.scale(l,l);let r=t.createLinearGradient(0,0,0,a);r.addColorStop(0,"#f8fafc"),r.addColorStop(.5,"#f1f5f9"),r.addColorStop(1,"#e2e8f0"),t.fillStyle=r,t.fillRect(0,0,s,a);let n=Math.floor(c.length*D),i=c.slice(0,n);if(0===i.length)return;let o=i.map(e=>[e.high,e.low]).flat(),d=Math.max(...o),x=d-Math.min(...o);t.strokeStyle="#e2e8f0",t.lineWidth=1,t.setLineDash([2,4]),t.globalAlpha=D;for(let e=0;e<=10;e++){let l=60+(a-120)/10*e;t.beginPath(),t.moveTo(60,l),t.lineTo(s-60,l),t.stroke()}if(t.setLineDash([]),t.globalAlpha=1,i.forEach((e,l)=>{let r=60+l*(s-120)/i.length,n=e.close>e.open,c=Math.min(1,l/i.length*2);t.globalAlpha=c,t.strokeStyle=n?"#10b981":"#ef4444",t.lineWidth=2,t.shadowColor=n?"#10b981":"#ef4444",t.shadowBlur=4,t.beginPath(),t.moveTo(r,60+(d-e.high)/x*(a-120)),t.lineTo(r,60+(d-e.low)/x*(a-120)),t.stroke();let o=60+(d-Math.max(e.open,e.close))/x*(a-120),h=60+(d-Math.min(e.open,e.close))/x*(a-120),m=Math.max(1,h-o),u=Math.max(4,(s-120)/i.length*.6),g=t.createLinearGradient(0,o,0,h);n?(g.addColorStop(0,"#10b981"),g.addColorStop(1,"#059669")):(g.addColorStop(0,"#ef4444"),g.addColorStop(1,"#dc2626")),t.fillStyle=g,t.fillRect(r-u/2,o,u,m),t.strokeStyle=n?"#059669":"#dc2626",t.lineWidth=1,t.strokeRect(r-u/2,o,u,m)}),t.shadowBlur=0,t.globalAlpha=1,v&&W.length>0&&(W.forEach(e=>{let l=60+e.start*(s-120)/c.length,r=60+e.end*(s-120)/c.length,n=60+(d-c[e.start].low)/x*(a-120),i=60+(d-c[e.end].low)/x*(a-120);t.strokeStyle=e.color,t.lineWidth=2,t.setLineDash([5,5]),t.beginPath(),t.moveTo(l,n),t.lineTo(r,i),t.stroke()}),t.setLineDash([])),j){let e=Math.max(...i.map(e=>e.volume)),l=.2*a;i.forEach((r,n)=>{let c=60+n*(s-120)/i.length,o=r.volume/e*l,d=(s-120)/i.length*.8,x=Math.min(1,n/i.length*2);t.globalAlpha=.7*x;let h=t.createLinearGradient(0,a-o,0,a);h.addColorStop(0,"#3b82f6"),h.addColorStop(1,"#1d4ed8"),t.fillStyle=h,t.fillRect(c-d/2,a-o,d,o)}),t.globalAlpha=1}if(_){let e=i.indexOf(_);if(-1!==e){let l=60+e*(s-120)/i.length;t.strokeStyle="#6b7280",t.lineWidth=1,t.setLineDash([5,5]),t.beginPath(),t.moveTo(l,0),t.lineTo(l,a),t.stroke(),t.setLineDash([])}}},[c,M,D,W,v,j,_]),Y=(0,l.useCallback)(()=>{if(T)return;Z(!0),P(0);let e=()=>{P(t=>{let s=t+.02;return s>=1?(Z(!1),1):(C.current=requestAnimationFrame(e),s)})};C.current=requestAnimationFrame(e)},[T]),I=(0,l.useCallback)(()=>{C.current&&cancelAnimationFrame(C.current),Z(!1)},[]),$=(0,l.useCallback)(()=>{I(),P(0)},[I]);return(0,l.useEffect)(()=>{c.length>0&&H(c)},[c,H]),(0,l.useEffect)(()=>{U()},[U]),(0,l.useEffect)(()=>()=>{C.current&&cancelAnimationFrame(C.current)},[]),(0,a.jsxs)("div",{ref:k,className:"animated-chart-container ".concat(w),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm border-b",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-green-500"}),(0,a.jsxs)("span",{children:["高値: \xa5",Math.max(...c.map(e=>e.high)).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsxs)("span",{children:["安値: \xa5",Math.min(...c.map(e=>e.low)).toLocaleString()]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:T?I:Y,className:"p-2 rounded-md transition-colors ".concat(T?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"),children:T?(0,a.jsx)(L.Z,{className:"w-4 h-4"}):(0,a.jsx)(E.Z,{className:"w-4 h-4"})}),(0,a.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:$,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:(0,a.jsx)(S.Z,{className:"w-4 h-4"})}),(0,a.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>B(!G),className:"p-2 rounded-md transition-colors ".concat(G?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:(0,a.jsx)(R.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("canvas",{ref:y,width:M.width,height:M.height,className:"cursor-crosshair"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-200",children:(0,a.jsx)(u.E.div,{className:"h-full bg-blue-500",initial:{width:0},animate:{width:"".concat(100*D,"%")},transition:{duration:.1}})}),(0,a.jsx)(g.M,{children:_&&(0,a.jsxs)(u.E.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},transition:{duration:.2},className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 max-w-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:new Date(_.time).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",weekday:"short"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)(u.E.div,{className:"bg-green-50 rounded-lg p-2",whileHover:{scale:1.02},children:[(0,a.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"始値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-green-800",children:["\xa5",_.open.toLocaleString()]})]}),(0,a.jsxs)(u.E.div,{className:"bg-red-50 rounded-lg p-2",whileHover:{scale:1.02},children:[(0,a.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"終値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-red-800",children:["\xa5",_.close.toLocaleString()]})]}),(0,a.jsxs)(u.E.div,{className:"bg-blue-50 rounded-lg p-2",whileHover:{scale:1.02},children:[(0,a.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"高値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-blue-800",children:["\xa5",_.high.toLocaleString()]})]}),(0,a.jsxs)(u.E.div,{className:"bg-purple-50 rounded-lg p-2",whileHover:{scale:1.02},children:[(0,a.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"安値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-purple-800",children:["\xa5",_.low.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"出来高"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:_.volume.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"変動率"}),(0,a.jsxs)("span",{className:"text-sm font-semibold ".concat(_.close>_.open?"text-green-600":"text-red-600"),children:[((_.close-_.open)/_.open*100).toFixed(2),"%"]})]})]})]})}),(0,a.jsx)(g.M,{children:G&&(0,a.jsxs)(u.E.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{duration:.3},className:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 w-80",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"トレンド分析"}),(0,a.jsx)("button",{onClick:()=>B(!1),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"サポートライン"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:[W.filter(e=>"#10b981"===e.color).length,"本"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"レジスタンスライン"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-red-600",children:[W.filter(e=>"#ef4444"===e.color).length,"本"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"現在価格"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["\xa5",null===(t=c[c.length-1])||void 0===t?void 0:t.close.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"価格変動"}),(0,a.jsx)("span",{className:"text-sm font-semibold ".concat((null===(s=c[c.length-1])||void 0===s?void 0:s.close)>(null===(r=c[c.length-2])||void 0===r?void 0:r.close)?"text-green-600":"text-red-600"),children:(null===(n=c[c.length-1])||void 0===n?void 0:n.close)>(null===(i=c[c.length-2])||void 0===i?void 0:i.close)?"上昇":"下降"})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{children:"サポートライン"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,a.jsx)("span",{children:"レジスタンスライン"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["アニメーション進捗: ",Math.round(100*D),"% | データ数: ",c.length]})]})]})},T=e=>{let{data:t,symbol:s,height:r=600,width:n,enableWebGL:i=!0,showPerformance:c=!1,onDataPointClick:o,className:d=""}=e,x=(0,l.useRef)(null),h=(0,l.useRef)(null),u=(0,l.useRef)(null),g=(0,l.useRef)(null),[j,v]=(0,l.useState)({width:0,height:0}),[N,S]=(0,l.useState)(null),[k,C]=(0,l.useState)({fps:0,renderTime:0,memoryUsage:0}),[M,L]=(0,l.useState)(!1),E=(0,l.useCallback)(()=>{if(h.current){let e=h.current.getBoundingClientRect();v({width:n||e.width,height:r})}},[n,r]);(0,l.useEffect)(()=>(E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)),[E]);let R=(0,l.useCallback)(()=>{let e=x.current;if(!e)return!1;let t=e.getContext("webgl")||e.getContext("experimental-webgl");if(!t)return!1;u.current=t;let s=t.createShader(t.VERTEX_SHADER),a=t.createShader(t.FRAGMENT_SHADER);if(!s||!a)return!1;t.shaderSource(s,"\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      varying vec4 v_color;\n      uniform vec2 u_resolution;\n      \n      void main() {\n        vec2 zeroToOne = a_position / u_resolution;\n        vec2 zeroToTwo = zeroToOne * 2.0;\n        vec2 clipSpace = zeroToTwo - 1.0;\n        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n        v_color = a_color;\n      }\n    "),t.shaderSource(a,"\n      precision mediump float;\n      varying vec4 v_color;\n      \n      void main() {\n        gl_FragColor = v_color;\n      }\n    "),t.compileShader(s),t.compileShader(a);let l=t.createProgram();if(!l)return!1;if(t.attachShader(l,s),t.attachShader(l,a),t.linkProgram(l),!t.getProgramParameter(l,t.LINK_STATUS))return console.error("WebGL program linking failed"),!1;g.current=l,t.useProgram(l);let r=t.getAttribLocation(l,"a_position"),n=t.getAttribLocation(l,"a_color"),i=t.getUniformLocation(l,"u_resolution"),c=t.createBuffer(),o=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,c),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,4,t.FLOAT,!1,0,0),t.uniform2f(i,e.width,e.height),!0},[]),A=(0,l.useCallback)(()=>{let e=u.current,s=x.current;if(!e||!s||!t.length)return;let a=window.performance&&window.performance.now?window.performance.now():Date.now(),l=window.devicePixelRatio||1;s.width=j.width*l,s.height=j.height*l,e.viewport(0,0,s.width,s.height),e.clearColor(.95,.97,.99,1),e.clear(e.COLOR_BUFFER_BIT);let r=t.map(e=>[e.high,e.low]).flat(),n=Math.max(...r),i=n-Math.min(...r),o=[],d=[];t.forEach((e,s)=>{let a=60+s*(j.width-120)/t.length,l=e.close>e.open,r=60+(n-e.high)/i*(j.height-120),c=60+(n-e.low)/i*(j.height-120);o.push(a,r,a,c),d.push(l?.06:.94,l?.73:.27,l?.51:.27,1),d.push(l?.06:.94,l?.73:.27,l?.51:.27,1);let x=60+(n-Math.max(e.open,e.close))/i*(j.height-120),h=60+(n-Math.min(e.open,e.close))/i*(j.height-120),m=Math.max(4,(j.width-120)/t.length*.6),u=a-m/2,g=a+m/2;o.push(u,x,g,x,u,h,u,h,g,x,g,h);for(let e=0;e<6;e++)d.push(l?.06:.94,l?.73:.27,l?.51:.27,1)}),e.bindBuffer(e.ARRAY_BUFFER,e.getAttribLocation(g.current,"a_position")),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,e.getAttribLocation(g.current,"a_color")),e.bufferData(e.ARRAY_BUFFER,new Float32Array(d),e.STATIC_DRAW),e.drawArrays(e.LINES,0,o.length/2),e.drawArrays(e.TRIANGLES,0,o.length/2);let h=(window.performance&&window.performance.now?window.performance.now():Date.now())-a;c&&C(e=>{var t;return{fps:Math.round(1e3/h),renderTime:Math.round(100*h)/100,memoryUsage:(null===(t=performance.memory)||void 0===t?void 0:t.usedJSHeapSize)/1024/1024||0}})},[t,j,c]);(0,l.useEffect)(()=>{i&&L(R())},[i,R]),(0,l.useEffect)(()=>{M&&A()},[A,M]);let T=(0,l.useCallback)(e=>{if(!x.current)return;let s=x.current.getBoundingClientRect(),a=e.clientX-s.left;e.clientY,s.top;let l=Math.floor((a-60)/(j.width-120)*t.length);l>=0&&l<t.length&&S(t[t.length-1-l])},[j.width,t]),Z=(0,l.useCallback)(()=>{S(null)},[]),D=(0,l.useCallback)(e=>{N&&o&&o(N)},[N,o]);return(0,a.jsxs)("div",{ref:h,className:"webgl-chart-container ".concat(d),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm border-b",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s}),M&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-green-600",children:[(0,a.jsx)(w.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"WebGL"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-green-500"}),(0,a.jsxs)("span",{children:["高値: \xa5",Math.max(...t.map(e=>e.high)).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsxs)("span",{children:["安値: \xa5",Math.min(...t.map(e=>e.low)).toLocaleString()]})]})]})]}),c&&(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:["FPS: ",k.fps]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f.Z,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:[k.renderTime,"ms"]})]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("canvas",{ref:x,width:j.width,height:j.height,onMouseMove:T,onMouseLeave:Z,onClick:D,className:"cursor-crosshair"}),N&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 max-w-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:new Date(N.time).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",weekday:"short"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"始値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-green-800",children:["\xa5",N.open.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"終値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-red-800",children:["\xa5",N.close.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"高値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-blue-800",children:["\xa5",N.high.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"安値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-purple-800",children:["\xa5",N.low.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"出来高"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:N.volume.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"変動率"}),(0,a.jsxs)("span",{className:"text-sm font-semibold ".concat(N.close>N.open?"text-green-600":"text-red-600"),children:[((N.close-N.open)/N.open*100).toFixed(2),"%"]})]})]})]}),!M&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"text-center p-6 bg-white rounded-lg shadow-lg",children:[(0,a.jsx)(w.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"WebGL未対応"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["お使いのブラウザはWebGLをサポートしていません。",(0,a.jsx)("br",{}),"最新のブラウザにアップデートしてください。"]}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"再読み込み"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{children:"上昇"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,a.jsx)("span",{children:"下降"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[M?"WebGL加速":"Canvas描画"," | データ数: ",t.length]})]})]})};s(44533);var Z=e=>{var t;let{data:s,symbol:r,height:o=600,width:x,defaultMode:h="professional",enableAllModes:S=!0,onDataPointClick:k,onExport:C,onShare:L,className:E=""}=e,[R,Z]=(0,l.useState)(h),[D,P]=(0,l.useState)(!1),[_,F]=(0,l.useState)(!0),[W,z]=(0,l.useState)(!0),[G,B]=(0,l.useState)(!0),[O,H]=(0,l.useState)(!0),[U,Y]=(0,l.useState)(!0),[I,$]=(0,l.useState)(!1),[V,J]=(0,l.useState)(!1),[X,q]=(0,l.useState)("light"),K=(0,l.useMemo)(()=>[{id:"professional",name:"プロフェッショナル",description:"高度なテクニカル指標と分析機能",icon:(0,a.jsx)(d.Z,{className:"w-5 h-5"}),component:M,features:["テクニカル指標","高度な分析","プロ仕様"]},{id:"animated",name:"アニメーション",description:"滑らかなアニメーションとトレンド分析",icon:(0,a.jsx)(f.Z,{className:"w-5 h-5"}),component:A,features:["アニメーション","トレンド分析","視覚効果"]},{id:"webgl",name:"WebGL高速",description:"GPU加速による超高速描画",icon:(0,a.jsx)(b.Z,{className:"w-5 h-5"}),component:T,features:["GPU加速","高速描画","大量データ対応"]}],[]),Q=(0,l.useMemo)(()=>{let e=K.find(e=>e.id===R);return(null==e?void 0:e.component)||M},[R,K]),ee=(0,l.useMemo)(()=>{if(!s.length)return null;let e=s.map(e=>e.close),t=s.map(e=>e.volume),a=e.reduce((e,t)=>e+t,0)/e.length,l=t.reduce((e,t)=>e+t,0),r=e[e.length-1]-e[0],n=r/e[0]*100;return{maxPrice:Math.max(...e),minPrice:Math.min(...e),avgPrice:a,maxVolume:Math.max(...t),totalVolume:l,priceChange:r,priceChangePercent:n,dataPoints:s.length}},[s]),et=(0,l.useCallback)(e=>{C?C(e):console.log("Exporting chart as ".concat(e))},[C]),es=(0,l.useCallback)(()=>{L?L():navigator.share&&navigator.share({title:"".concat(r," チャート"),text:"".concat(r," の株価チャートを共有"),url:window.location.href})},[L,r]),ea=(0,l.useCallback)(()=>{document.fullscreenElement?(document.exitFullscreen(),J(!1)):(document.documentElement.requestFullscreen(),J(!0))},[]);return(0,a.jsxs)("div",{className:"ultimate-chart-container ".concat(E," ").concat(V?"fixed inset-0 z-50 bg-white":""),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm border-b",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:r})]}),S&&(0,a.jsx)("div",{className:"flex space-x-1",children:K.map(e=>(0,a.jsxs)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Z(e.id),className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ".concat(R===e.id?"bg-blue-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.icon,(0,a.jsx)("span",{children:e.name})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[ee&&(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-green-500"}),(0,a.jsxs)("span",{children:["高値: \xa5",ee.maxPrice.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-red-500"}),(0,a.jsxs)("span",{children:["安値: \xa5",ee.minPrice.toLocaleString()]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1 ".concat(ee.priceChange>=0?"text-green-600":"text-red-600"),children:(0,a.jsxs)("span",{children:[ee.priceChange>=0?"+":"",ee.priceChangePercent.toFixed(2),"%"]})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>P(!D),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"設定",children:(0,a.jsx)(c.Z,{className:"w-4 h-4"})}),(0,a.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ea,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"フルスクリーン",children:(0,a.jsx)(j.Z,{className:"w-4 h-4"})}),(0,a.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>et("png"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"エクスポート",children:(0,a.jsx)(n.Z,{className:"w-4 h-4"})}),(0,a.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:es,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"シェア",children:(0,a.jsx)(i.Z,{className:"w-4 h-4"})})]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(Q,{data:s,symbol:r,height:o,width:x,showVolume:W,theme:X,onDataPointClick:k}),(0,a.jsx)(g.M,{children:D&&(0,a.jsxs)(u.E.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{duration:.3},className:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-6 border border-gray-200 w-80",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"チャート設定"}),(0,a.jsx)("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"表示設定"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"出来高表示"}),(0,a.jsx)("button",{onClick:()=>z(!W),className:"w-12 h-6 rounded-full transition-colors ".concat(W?"bg-blue-500":"bg-gray-300"),children:(0,a.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(W?"translate-x-6":"translate-x-0.5")})})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"トレンドライン"}),(0,a.jsx)("button",{onClick:()=>B(!G),className:"w-12 h-6 rounded-full transition-colors ".concat(G?"bg-blue-500":"bg-gray-300"),children:(0,a.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(G?"translate-x-6":"translate-x-0.5")})})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"アニメーション"}),(0,a.jsx)("button",{onClick:()=>H(!O),className:"w-12 h-6 rounded-full transition-colors ".concat(O?"bg-blue-500":"bg-gray-300"),children:(0,a.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(O?"translate-x-6":"translate-x-0.5")})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"パフォーマンス"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"WebGL加速"}),(0,a.jsx)("button",{onClick:()=>Y(!U),className:"w-12 h-6 rounded-full transition-colors ".concat(U?"bg-blue-500":"bg-gray-300"),children:(0,a.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(U?"translate-x-6":"translate-x-0.5")})})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"パフォーマンス表示"}),(0,a.jsx)("button",{onClick:()=>$(!I),className:"w-12 h-6 rounded-full transition-colors ".concat(I?"bg-blue-500":"bg-gray-300"),children:(0,a.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(I?"translate-x-6":"translate-x-0.5")})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"テーマ"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>q("light"),className:"px-3 py-2 rounded-md text-sm transition-colors ".concat("light"===X?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"),children:"ライト"}),(0,a.jsx)("button",{onClick:()=>q("dark"),className:"px-3 py-2 rounded-md text-sm transition-colors ".concat("dark"===X?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"),children:"ダーク"})]})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["モード: ",null===(t=K.find(e=>e.id===R))||void 0===t?void 0:t.name]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["データ数: ",s.length]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(w.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:U?"WebGL":"Canvas"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"高性能"})]})]})]})]})},D=e=>{let{symbol:t,data:s,isOpen:r,onClose:n,isLoading:i=!1,error:c,timeframe:o,height:u=400}=e,[g,f]=(0,l.useState)("1M"),[b,p]=(0,l.useState)([]),[j,v]=(0,l.useState)({short:[],medium:[],long:[]}),[N,w]=(0,l.useState)(null),[y,S]=(0,l.useState)(1),[k,C]=(0,l.useState)(0),[M,L]=(0,l.useState)(!1),[E,R]=(0,l.useState)("candlestick");(0,l.useRef)(null);let A=[{value:"1M",label:"1ヶ月"},{value:"3M",label:"3ヶ月"},{value:"6M",label:"6ヶ月"},{value:"1Y",label:"1年"}],T=(e,t)=>{let s=[];for(let a=0;a<e.length;a++)if(a<t-1)s.push(NaN);else{let l=e.slice(a-t+1,a+1).reduce((e,t)=>e+t,0);s.push(l/t)}return s};if((0,l.useEffect)(()=>{if(console.log("StockChart useEffect - data length:",s.length),console.log("StockChart useEffect - selectedPeriod:",g),0===s.length){console.log("No data available");return}let e=new Date,t={"1M":30,"3M":90,"6M":180,"1Y":365}[g]||30,a=new Date(e.getTime()-864e5*t),l=s.filter(e=>new Date(e.time)>=a);console.log("Filtered data length:",l.length),p(l);let r=l.map(e=>e.close);v({short:T(r,5),medium:T(r,25),long:T(r,50)})},[s,g]),console.log("StockChart render - isOpen:",r,"typeof isOpen:",typeof r),!1===r)return console.log("isOpen is false, returning null"),null;if(!0===r){var D;return console.log("isOpen is true, rendering modal"),(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"}),(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[t," チャート"]})]}),(0,a.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(x.Z,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-gray-500"}),(0,a.jsx)("div",{className:"flex space-x-2",children:A.map(e=>(0,a.jsx)("button",{onClick:()=>f(e.value),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors ".concat(g===e.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]})}),(0,a.jsx)("div",{className:"p-6",children:i?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(m.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"チャートデータの読み込みに失敗しました"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:c.message})]})}):0===b.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"チャートデータがありません"})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(()=>{if(console.log("renderChart called - chartData length:",b.length),0===b.length)return console.log("No chart data to render"),null;let e=Math.max(...b.map(e=>e.high)),t=Math.min(...b.map(e=>e.low)),s=e-t,l=Math.max(800,.9*window.innerWidth);return console.log("Chart dimensions:",{chartHeight:u,chartWidth:l,maxPrice:e,minPrice:t,priceRange:s}),(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-slate-50 to-slate-100 rounded-lg p-4 shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute top-2 right-2 z-10 flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>R("candlestick"===E?"line":"candlestick"),className:"px-3 py-1 text-xs bg-white/80 backdrop-blur-sm rounded-md shadow-sm hover:bg-white transition-colors",children:"candlestick"===E?"線グラフ":"ローソク足"}),(0,a.jsx)("button",{onClick:()=>L(!M),className:"px-3 py-1 text-xs rounded-md shadow-sm transition-colors ".concat(M?"bg-blue-500 text-white":"bg-white/80 backdrop-blur-sm hover:bg-white"),children:"出来高"}),(0,a.jsx)("button",{onClick:()=>S(1),className:"px-3 py-1 text-xs bg-white/80 backdrop-blur-sm rounded-md hover:bg-white transition-colors",children:"リセット"})]}),(0,a.jsxs)("svg",{width:l,height:u,className:"w-full h-full",viewBox:"0 0 ".concat(l," ").concat(u),style:{transform:"scale(".concat(y,") translateX(").concat(k,"px)")},children:[(0,a.jsxs)("defs",{children:[(0,a.jsx)("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#e2e8f0",strokeWidth:"0.5",opacity:"0.3"})}),(0,a.jsxs)("linearGradient",{id:"bullGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#059669",stopOpacity:"0.6"})]}),(0,a.jsxs)("linearGradient",{id:"bearGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:"0.8"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#dc2626",stopOpacity:"0.6"})]}),(0,a.jsxs)("filter",{id:"glow",children:[(0,a.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,a.jsxs)("feMerge",{children:[(0,a.jsx)("feMergeNode",{in:"coloredBlur"}),(0,a.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,a.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),(0,a.jsx)("rect",{x:"0",y:"0",width:l,height:u,fill:"rgba(255,255,255,0.8)"}),b.map((t,r)=>{let n=r/(b.length-1)*l,i=(e-Math.max(t.open,t.close))/s*u,c=(e-Math.min(t.open,t.close))/s*u,o=(e-t.high)/s*u,d=(e-t.low)/s*u,x=t.close>t.open,h=Math.max(3,l/b.length*.6);return(0,a.jsxs)("g",{className:"candle-group",children:[(0,a.jsx)("line",{x1:n,y1:o,x2:n,y2:d,stroke:x?"#10b981":"#ef4444",strokeWidth:"2",strokeLinecap:"round",filter:"url(#glow)"}),(0,a.jsx)("rect",{x:n-h/2,y:i,width:h,height:Math.max(2,c-i),fill:x?"url(#bullGradient)":"url(#bearGradient)",stroke:x?"#059669":"#dc2626",strokeWidth:"1",rx:"1",ry:"1",filter:"url(#glow)"}),(0,a.jsx)("rect",{x:n-h/2-5,y:o-5,width:h+10,height:d-o+10,fill:"transparent",onMouseEnter:()=>w(t),onMouseLeave:()=>w(null),style:{cursor:"pointer"}})]},r)}),j.short.map((t,r)=>{if(isNaN(t)||0===r)return null;let n=(r-1)/(b.length-1)*l,i=r/(b.length-1)*l,c=(e-j.short[r-1])/s*u,o=(e-t)/s*u;return(0,a.jsx)("line",{x1:n,y1:c,x2:i,y2:o,stroke:"#3b82f6",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.8",filter:"url(#glow)"},"short-line-".concat(r))}),j.medium.map((t,r)=>{if(isNaN(t)||0===r)return null;let n=(r-1)/(b.length-1)*l,i=r/(b.length-1)*l,c=(e-j.medium[r-1])/s*u,o=(e-t)/s*u;return(0,a.jsx)("line",{x1:n,y1:c,x2:i,y2:o,stroke:"#f59e0b",strokeWidth:"2",strokeDasharray:"8,4",opacity:"0.8",filter:"url(#glow)"},"medium-line-".concat(r))}),j.long.map((t,r)=>{if(isNaN(t)||0===r)return null;let n=(r-1)/(b.length-1)*l,i=r/(b.length-1)*l,c=(e-j.long[r-1])/s*u,o=(e-t)/s*u;return(0,a.jsx)("line",{x1:n,y1:c,x2:i,y2:o,stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"12,6",opacity:"0.8",filter:"url(#glow)"},"long-line-".concat(r))})]}),N&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm border border-gray-200 rounded-xl p-4 shadow-2xl max-w-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:new Date(N.time).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",weekday:"short"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"始値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-green-800",children:["\xa5",N.open.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"終値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-red-800",children:["\xa5",N.close.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"高値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-blue-800",children:["\xa5",N.high.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"安値"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-purple-800",children:["\xa5",N.low.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"出来高"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:N.volume.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"変動率"}),(0,a.jsxs)("span",{className:"text-sm font-semibold ".concat(N.close>N.open?"text-green-600":"text-red-600"),children:[((N.close-N.open)/N.open*100).toFixed(2),"%"]})]})]})]})]})})()}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-6 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{children:"短期移動平均 (5日)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,a.jsx)("span",{children:"中期移動平均 (25日)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,a.jsx)("span",{children:"長期移動平均 (50日)"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\xa5",(null===(D=b[b.length-1])||void 0===D?void 0:D.close.toLocaleString())||"--"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"現在価格"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[b.length,"日"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"データ期間"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\xa5",Math.max(...b.map(e=>e.high)).toLocaleString()]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"期間最高値"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\xa5",Math.min(...b.map(e=>e.low)).toLocaleString()]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"期間最安値"})]})]})]})})]})})}return console.log("Rendering inline chart with UltimateChart"),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-gray-500"}),(0,a.jsx)("div",{className:"flex space-x-2",children:A.map(e=>(0,a.jsx)("button",{onClick:()=>f(e.value),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors ".concat(g===e.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]})}),i?(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"読み込み中..."})]}):c?(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-red-600",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold mb-2",children:"エラーが発生しました"}),(0,a.jsx)("div",{className:"text-sm",children:c.message})]})}):0===b.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold mb-2",children:"データがありません"}),(0,a.jsx)("div",{className:"text-sm",children:"チャートデータを取得できませんでした"})]})}):(0,a.jsx)(Z,{data:b.map(e=>({time:new Date(e.time).getTime(),open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume})),symbol:t,height:u,enableAllModes:!0,onDataPointClick:e=>{console.log("Data point clicked:",e)},onExport:e=>{console.log("Exporting chart as:",e)},onShare:()=>{console.log("Sharing chart")}})]})},P=s(12381),_=s(53834);function F(e){let{symbol:t}=e,[s,d]=(0,l.useState)(null),[x,h]=(0,l.useState)([]),[m,u]=(0,l.useState)("1m"),[g,f]=(0,l.useState)(!0),[b,p]=(0,l.useState)(null),j=(e,t)=>{let s=[],a=Date.now(),l={"1d":3e5,"1w":36e5,"1m":864e5,"3m":864e5,"6m":864e5,"1y":864e5}[t]||864e5,r={"1d":288,"1w":168,"1m":30,"3m":90,"6m":180,"1y":365}[t]||30,n=1e3+500*Math.random();for(let e=r;e>=0;e--){let t=a-e*l,r=n+(Math.random()-.5)*100,i=r+(Math.random()-.5)*10,c=r+(Math.random()-.5)*10,o=Math.max(i,c)+20*Math.random(),d=Math.min(i,c)-20*Math.random(),x=Math.floor(1e6*Math.random())+1e5;s.push({timestamp:t,open:Math.round(100*i)/100,high:Math.round(100*o)/100,low:Math.round(100*d)/100,close:Math.round(100*c)/100,volume:x})}return s},v=e=>{let t=1e3+500*Math.random(),s=(Math.random()-.5)*50;return{symbol:e,name:"".concat(e," 株式会社"),price:Math.round(100*t)/100,change:Math.round(100*s)/100,changePercent:Math.round(s/t*1e4)/100,marketCap:"".concat(Math.floor(1e3*Math.random()),"億円"),volume:"".concat(Math.floor(1e6*Math.random()))}};(0,l.useEffect)(()=>{let e=async()=>{try{f(!0),p(null);let e=j(t,m),s=v(t),a=e.map(e=>({time:new Date(e.timestamp).toISOString(),open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume}));console.log("Generated mock data:",e.length,"items"),console.log("Converted data:",a.length,"items"),console.log("Sample data:",a.slice(0,3)),h(a),d(s)}catch(e){console.error("チャートデータ読み込みエラー:",e),p("チャートデータの読み込みに失敗しました")}finally{f(!1)}};t&&e()},[t,m]);let N=e=>{u(e)};return g?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"チャートを読み込み中..."})]})}):b?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-600 mb-4",children:(0,a.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"エラーが発生しました"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:b}),(0,a.jsx)(P.z,{onClick:()=>window.location.reload(),children:"再読み込み"})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(o.default,{href:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:(0,a.jsx)(r.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:(null==s?void 0:s.name)||(0,_.LH)(t)}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:(0,_.LH)(t)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(P.z,{variant:"outline",size:"sm",onClick:()=>{console.log("チャート画像をダウンロード")},children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"ダウンロード"]}),(0,a.jsxs)(P.z,{variant:"outline",size:"sm",onClick:()=>{navigator.share?navigator.share({title:"".concat(t," チャート"),text:"".concat(t," の株価チャート"),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("URLをクリップボードにコピーしました"))},children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"共有"]}),(0,a.jsxs)(P.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"設定"]})]})]})})}),s&&(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["\xa5",s.price.toLocaleString()]}),(0,a.jsxs)("span",{className:"ml-2 text-sm font-medium ".concat(s.change>=0?"text-green-600":"text-red-600"),children:[s.change>=0?"+":"",s.change.toFixed(2),"(",s.changePercent>=0?"+":"",s.changePercent.toFixed(2),"%)"]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:["時価総額: ",s.marketCap]}),(0,a.jsxs)("div",{children:["出来高: ",s.volume]})]})]})})})}),(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2",children:(0,a.jsx)("div",{className:"flex space-x-1",children:["1d","1w","1m","3m","6m","1y"].map(e=>(0,a.jsx)("button",{onClick:()=>N(e),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat(m===e?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:"1d"===e?"1日":"1w"===e?"1週":"1m"===e?"1ヶ月":"3m"===e?"3ヶ月":"6m"===e?"6ヶ月":"1年"},e))})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:[(0,_.LH)(t)," 株価チャート (",m,")"]}),(0,a.jsx)("div",{className:"h-96",children:(0,a.jsx)(D,{data:x,symbol:t,timeframe:m,height:400,isLoading:g,error:b?Error(b):null})})]})})})]})}},12381:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(85583),l=s(46796),r=s(57437),n=s(2265),i=s(90535),c=s(70961);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{var{className:s,variant:n,size:i,asChild:d=!1}=e,x=(0,l._)(e,["className","variant","size","asChild"]);return(0,r.jsx)("button",(0,a._)({className:(0,c.cn)(o({variant:n,size:i,className:s})),ref:t},x))});d.displayName="Button"},70961:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(61994),l=s(53335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.m6)((0,a.W)(t))}},53834:function(e,t,s){"use strict";function a(e){if(!e)return"";let t=e.trim();return/^[A-Za-z]\d{4}$/.test(t)?t.toUpperCase():/^\d+$/.test(t)&&5===t.length&&t.startsWith("0")?t.substring(1):t}function l(e){if(!e)return"";let t=e.trim();return/^[A-Za-z]\d{4}$/.test(t)?t.toUpperCase():/^\d{5}$/.test(t)&&t.startsWith("0")?t.substring(1):(/^\d{4}$/.test(t),t)}function r(e){if(!e)return null;let t=a(e);return/^\d{4}$/.test(t)?t:null}s.d(t,{G$:function(){return a},LH:function(){return l},To:function(){return r}})},44533:function(){}},function(e){e.O(0,[2074,1216,1744],function(){return e(e.s=26993)}),_N_E=e.O()}]);