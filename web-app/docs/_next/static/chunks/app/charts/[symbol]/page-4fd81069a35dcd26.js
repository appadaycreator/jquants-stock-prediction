(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3826],{26993:function(e,t,s){Promise.resolve().then(s.bind(s,323))},323:function(e,t,s){"use strict";s.d(t,{default:function(){return F}});var l=s(57437),a=s(2265),r=s(32660),n=s(92735),i=s(68919),c=s(98728),o=s(27648),d=s(96215),x=s(32489),h=s(31047),m=s(70525),u=s(98239),g=s(57586),f=s(42488),b=s(11239),p=s(3085),j=s(47416),v=s(28124),N=s(3577),y=s(14822),w=s(40476),S=s(69076),k=s(43391),C=s(45802),M=e=>{let{data:t,symbol:s,height:r=600,width:n,showVolume:i=!0,showIndicators:o=!0,theme:x="light",onDataPointClick:h,onIndicatorToggle:u,className:g=""}=e,f=(0,a.useRef)(null),b=(0,a.useRef)(null),[j,v]=(0,a.useState)({width:0,height:0}),[N,y]=(0,a.useState)(null),[w,M]=(0,a.useState)(1),[L,E]=(0,a.useState)(0),[R,A]=(0,a.useState)(0),[T,D]=(0,a.useState)(!1),[Z,P]=(0,a.useState)({x:0,y:0}),[_,F]=(0,a.useState)(!1),[W,G]=(0,a.useState)([{name:"SMA 20",type:"sma",period:20,color:"#3b82f6",visible:!0},{name:"SMA 50",type:"sma",period:50,color:"#f59e0b",visible:!0},{name:"RSI",type:"rsi",period:14,color:"#8b5cf6",visible:!1},{name:"MACD",type:"macd",period:12,color:"#10b981",visible:!1}]),B=(0,a.useCallback)(()=>{if(b.current){let e=b.current.getBoundingClientRect();v({width:n||e.width,height:r})}},[n,r]);(0,a.useEffect)(()=>(B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)),[B]);let z=(0,a.useCallback)((e,t)=>{let s=[];for(let l=0;l<e.length;l++)if(l<t-1)s.push(NaN);else{let a=e.slice(l-t+1,l+1).reduce((e,t)=>e+t.close,0);s.push(a/t)}return s},[]),O=(0,a.useCallback)((e,t)=>{let s=[],l=[],a=[];for(let t=1;t<e.length;t++){let s=e[t].close-e[t-1].close;l.push(s>0?s:0),a.push(s<0?Math.abs(s):0)}for(let r=0;r<e.length;r++)if(r<t)s.push(NaN);else{let e=100-100/(1+l.slice(r-t,r).reduce((e,t)=>e+t,0)/t/(a.slice(r-t,r).reduce((e,t)=>e+t,0)/t||1e-4));s.push(e)}return s},[]),H=(0,a.useMemo)(()=>{let e={};return W.forEach(s=>{if(s.visible)switch(s.type){case"sma":e[s.name]=z(t,s.period);break;case"rsi":e[s.name]=O(t,s.period)}}),e},[t,W,z,O]),U=(0,a.useCallback)(()=>{let e=f.current;if(!e||!t.length)return;let s=e.getContext("2d");if(!s)return;let{width:l,height:a}=j,r=window.devicePixelRatio||1;e.width=l*r,e.height=a*r,s.scale(r,r);let n=s.createLinearGradient(0,0,0,a);"dark"===x?(n.addColorStop(0,"#1e293b"),n.addColorStop(1,"#0f172a")):(n.addColorStop(0,"#f8fafc"),n.addColorStop(1,"#f1f5f9")),s.fillStyle=n,s.fillRect(0,0,l,a),s.strokeStyle="dark"===x?"#334155":"#e2e8f0",s.lineWidth=1,s.setLineDash([2,4]);for(let e=0;e<=10;e++){let t=a/10*e;s.beginPath(),s.moveTo(0,t),s.lineTo(l,t),s.stroke()}for(let e=0;e<=20;e++){let t=l/20*e;s.beginPath(),s.moveTo(t,0),s.lineTo(t,a),s.stroke()}s.setLineDash([]);let c=t.slice(Math.max(0,Math.floor(-L/10)),Math.min(t.length,Math.floor((l-L)/10)));if(0===c.length)return;let o=c.map(e=>[e.high,e.low]).flat(),d=Math.max(...o),h=d-Math.min(...o);if(c.forEach((e,t)=>{let r=40+t*(l-80)/c.length+L,n=e.close>e.open;s.strokeStyle=n?"#10b981":"#ef4444",s.lineWidth=2,s.beginPath(),s.moveTo(r,40+(d-e.high)/h*(a-80)),s.lineTo(r,40+(d-e.low)/h*(a-80)),s.stroke();let i=40+(d-Math.max(e.open,e.close))/h*(a-80),o=40+(d-Math.min(e.open,e.close))/h*(a-80),x=Math.max(1,o-i),m=Math.max(4,(l-80)/c.length*.6),u=s.createLinearGradient(0,i,0,o);n?(u.addColorStop(0,"#10b981"),u.addColorStop(1,"#059669")):(u.addColorStop(0,"#ef4444"),u.addColorStop(1,"#dc2626")),s.fillStyle=u,s.fillRect(r-m/2,i,m,x),s.strokeStyle=n?"#059669":"#dc2626",s.lineWidth=1,s.strokeRect(r-m/2,i,m,x)}),W.forEach(e=>{if(!e.visible||!H[e.name])return;let r=H[e.name];s.strokeStyle=e.color,s.lineWidth=2,s.setLineDash("sma"===e.type?[]:[5,5]),s.beginPath();let n=!0;r.forEach((e,r)=>{if(isNaN(e))return;let i=40+r*(l-80)/t.length+L,c=40+(d-e)/h*(a-80);n?(s.moveTo(i,c),n=!1):s.lineTo(i,c)}),s.stroke()}),s.setLineDash([]),i){let e=Math.max(...c.map(e=>e.volume)),t=.2*a;c.forEach((r,n)=>{let i=40+n*(l-80)/c.length+L,o=r.volume/e*t,d=(l-80)/c.length*.8,x=s.createLinearGradient(0,a-o,0,a);x.addColorStop(0,"#3b82f6"),x.addColorStop(1,"#1d4ed8"),s.fillStyle=x,s.fillRect(i-d/2,a-o,d,o)})}if(N){let e=40+t.indexOf(N)*(l-80)/t.length+L;s.strokeStyle="#6b7280",s.lineWidth=1,s.setLineDash([5,5]),s.beginPath(),s.moveTo(e,0),s.lineTo(e,a),s.stroke(),s.setLineDash([])}},[t,j,x,L,R,w,N,W,H,i]),Y=(0,a.useCallback)(e=>{if(!f.current)return;let s=f.current.getBoundingClientRect(),l=e.clientX-s.left,a=e.clientY-s.top;if(T){let e=l-Z.x,t=a-Z.y;E(t=>Math.max(-1e3,Math.min(1e3,t+e))),A(e=>Math.max(-1e3,Math.min(1e3,e+t)))}P({x:l,y:a});let r=Math.floor((l-40)/(j.width-80)*t.length);r>=0&&r<t.length&&y(t[r])},[T,Z,j.width,t]),I=(0,a.useCallback)(e=>{D(!0),P({x:e.clientX,y:e.clientY})},[]),V=(0,a.useCallback)(()=>{D(!1)},[]),J=(0,a.useCallback)(e=>{e.preventDefault();let t=e.deltaY>0?.9:1.1;M(e=>Math.max(.5,Math.min(3,e*t)))},[]);return(0,a.useEffect)(()=>{U()},[U]),(0,l.jsxs)("div",{ref:b,className:"professional-chart-container ".concat(g),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm border-b",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4 text-green-500"}),(0,l.jsxs)("span",{children:["高値: \xa5",Math.max(...t.map(e=>e.high)).toLocaleString()]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(p.Z,{className:"w-4 h-4 text-red-500"}),(0,l.jsxs)("span",{children:["安値: \xa5",Math.min(...t.map(e=>e.low)).toLocaleString()]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>M(1),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"リセット",children:(0,l.jsx)(S.Z,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>M(e=>Math.min(3,1.2*e)),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"ズームイン",children:(0,l.jsx)(k.Z,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>M(e=>Math.max(.5,.8*e)),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"ズームアウト",children:(0,l.jsx)(C.Z,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>F(!_),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"設定",children:(0,l.jsx)(c.Z,{className:"w-4 h-4"})})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("canvas",{ref:f,width:j.width,height:j.height,onMouseMove:Y,onMouseDown:I,onMouseUp:V,onMouseLeave:V,onWheel:J,className:"cursor-crosshair",style:{transform:"scale(".concat(w,")"),transformOrigin:"top left"}}),N&&(0,l.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 max-w-xs",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,l.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:new Date(N.time).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",weekday:"short"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"bg-green-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"始値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-green-800",children:["\xa5",N.open.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-red-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"終値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-red-800",children:["\xa5",N.close.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"高値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-blue-800",children:["\xa5",N.high.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-purple-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"安値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-purple-800",children:["\xa5",N.low.toLocaleString()]})]})]}),(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"出来高"}),(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:N.volume.toLocaleString()})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"変動率"}),(0,l.jsxs)("span",{className:"text-sm font-semibold ".concat(N.close>N.open?"text-green-600":"text-red-600"),children:[((N.close-N.open)/N.open*100).toFixed(2),"%"]})]})]})]}),_&&(0,l.jsxs)("div",{className:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 w-80",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"テクニカル指標"}),(0,l.jsx)("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,l.jsx)("div",{className:"space-y-3",children:W.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name})]}),(0,l.jsx)("button",{onClick:()=>{let e=[...W];e[t].visible=!e[t].visible,G(e)},className:"px-3 py-1 text-xs rounded-md transition-colors ".concat(e.visible?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.visible?"表示":"非表示"})]},e.name))})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,l.jsx)("span",{children:"SMA 20"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,l.jsx)("span",{children:"SMA 50"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,l.jsx)("span",{children:"RSI"})]})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["ズーム: ",Math.round(100*w),"% | データ数: ",t.length]})]})]})},L=s(89227),E=s(33276),R=s(58896),A=e=>{var t,s,r,n,i;let{data:c,symbol:o,height:d=600,width:x,enableAnimation:h=!0,animationSpeed:b=1e3,showVolume:j=!0,showTrendLines:v=!0,onDataPointClick:N,className:y=""}=e,w=(0,a.useRef)(null),k=(0,a.useRef)(null),C=(0,a.useRef)(),[M,A]=(0,a.useState)({width:0,height:0}),[T,D]=(0,a.useState)(!1),[Z,P]=(0,a.useState)(0),[_,F]=(0,a.useState)(null),[W,G]=(0,a.useState)([]),[B,z]=(0,a.useState)(!1),O=(0,a.useCallback)(()=>{if(k.current){let e=k.current.getBoundingClientRect();A({width:x||e.width,height:d})}},[x,d]);(0,a.useEffect)(()=>(O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)),[O]);let H=(0,a.useCallback)(e=>{let t=[],s=0,l=0,a=e[0].low;for(let r=1;r<e.length;r++)e[r].low<a?(l-s>5&&t.push({start:s,end:l,color:"#10b981"}),s=r,l=r,a=e[r].low):l=r;let r=0,n=0,i=e[0].high;for(let s=1;s<e.length;s++)e[s].high>i?(n-r>5&&t.push({start:r,end:n,color:"#ef4444"}),r=s,n=s,i=e[s].high):n=s;G(t)},[]),U=(0,a.useCallback)(()=>{let e=w.current;if(!e||!c.length)return;let t=e.getContext("2d");if(!t)return;let{width:s,height:l}=M,a=window.devicePixelRatio||1;e.width=s*a,e.height=l*a,t.scale(a,a);let r=t.createLinearGradient(0,0,0,l);r.addColorStop(0,"#f8fafc"),r.addColorStop(.5,"#f1f5f9"),r.addColorStop(1,"#e2e8f0"),t.fillStyle=r,t.fillRect(0,0,s,l);let n=Math.floor(c.length*Z),i=c.slice(0,n);if(0===i.length)return;let o=i.map(e=>[e.high,e.low]).flat(),d=Math.max(...o),x=d-Math.min(...o);t.strokeStyle="#e2e8f0",t.lineWidth=1,t.setLineDash([2,4]),t.globalAlpha=Z;for(let e=0;e<=10;e++){let a=60+(l-120)/10*e;t.beginPath(),t.moveTo(60,a),t.lineTo(s-60,a),t.stroke()}if(t.setLineDash([]),t.globalAlpha=1,i.forEach((e,a)=>{let r=60+a*(s-120)/i.length,n=e.close>e.open,c=Math.min(1,a/i.length*2);t.globalAlpha=c,t.strokeStyle=n?"#10b981":"#ef4444",t.lineWidth=2,t.shadowColor=n?"#10b981":"#ef4444",t.shadowBlur=4,t.beginPath(),t.moveTo(r,60+(d-e.high)/x*(l-120)),t.lineTo(r,60+(d-e.low)/x*(l-120)),t.stroke();let o=60+(d-Math.max(e.open,e.close))/x*(l-120),h=60+(d-Math.min(e.open,e.close))/x*(l-120),m=Math.max(1,h-o),u=Math.max(4,(s-120)/i.length*.6),g=t.createLinearGradient(0,o,0,h);n?(g.addColorStop(0,"#10b981"),g.addColorStop(1,"#059669")):(g.addColorStop(0,"#ef4444"),g.addColorStop(1,"#dc2626")),t.fillStyle=g,t.fillRect(r-u/2,o,u,m),t.strokeStyle=n?"#059669":"#dc2626",t.lineWidth=1,t.strokeRect(r-u/2,o,u,m)}),t.shadowBlur=0,t.globalAlpha=1,v&&W.length>0&&(W.forEach(e=>{let a=60+e.start*(s-120)/c.length,r=60+e.end*(s-120)/c.length,n=60+(d-c[e.start].low)/x*(l-120),i=60+(d-c[e.end].low)/x*(l-120);t.strokeStyle=e.color,t.lineWidth=2,t.setLineDash([5,5]),t.beginPath(),t.moveTo(a,n),t.lineTo(r,i),t.stroke()}),t.setLineDash([])),j){let e=Math.max(...i.map(e=>e.volume)),a=.2*l;i.forEach((r,n)=>{let c=60+n*(s-120)/i.length,o=r.volume/e*a,d=(s-120)/i.length*.8,x=Math.min(1,n/i.length*2);t.globalAlpha=.7*x;let h=t.createLinearGradient(0,l-o,0,l);h.addColorStop(0,"#3b82f6"),h.addColorStop(1,"#1d4ed8"),t.fillStyle=h,t.fillRect(c-d/2,l-o,d,o)}),t.globalAlpha=1}if(_){let e=i.indexOf(_);if(-1!==e){let a=60+e*(s-120)/i.length;t.strokeStyle="#6b7280",t.lineWidth=1,t.setLineDash([5,5]),t.beginPath(),t.moveTo(a,0),t.lineTo(a,l),t.stroke(),t.setLineDash([])}}},[c,M,Z,W,v,j,_]),Y=(0,a.useCallback)(()=>{if(T)return;D(!0),P(0);let e=()=>{P(t=>{let s=t+.02;return s>=1?(D(!1),1):(C.current=requestAnimationFrame(e),s)})};C.current=requestAnimationFrame(e)},[T]),I=(0,a.useCallback)(()=>{C.current&&cancelAnimationFrame(C.current),D(!1)},[]),V=(0,a.useCallback)(()=>{I(),P(0)},[I]);return(0,a.useEffect)(()=>{c.length>0&&H(c)},[c,H]),(0,a.useEffect)(()=>{U()},[U]),(0,a.useEffect)(()=>()=>{C.current&&cancelAnimationFrame(C.current)},[]),(0,l.jsxs)("div",{ref:k,className:"animated-chart-container ".concat(y),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm border-b",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(f.Z,{className:"w-5 h-5 text-blue-600"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4 text-green-500"}),(0,l.jsxs)("span",{children:["高値: \xa5",Math.max(...c.map(e=>e.high)).toLocaleString()]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(p.Z,{className:"w-4 h-4 text-red-500"}),(0,l.jsxs)("span",{children:["安値: \xa5",Math.min(...c.map(e=>e.low)).toLocaleString()]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:T?I:Y,className:"p-2 rounded-md transition-colors ".concat(T?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"),children:T?(0,l.jsx)(L.Z,{className:"w-4 h-4"}):(0,l.jsx)(E.Z,{className:"w-4 h-4"})}),(0,l.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:V,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",children:(0,l.jsx)(S.Z,{className:"w-4 h-4"})}),(0,l.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>z(!B),className:"p-2 rounded-md transition-colors ".concat(B?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:(0,l.jsx)(R.Z,{className:"w-4 h-4"})})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("canvas",{ref:w,width:M.width,height:M.height,className:"cursor-crosshair"}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-200",children:(0,l.jsx)(u.E.div,{className:"h-full bg-blue-500",initial:{width:0},animate:{width:"".concat(100*Z,"%")},transition:{duration:.1}})}),(0,l.jsx)(g.M,{children:_&&(0,l.jsxs)(u.E.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},transition:{duration:.2},className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 max-w-xs",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,l.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:new Date(_.time).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",weekday:"short"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)(u.E.div,{className:"bg-green-50 rounded-lg p-2",whileHover:{scale:1.02},children:[(0,l.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"始値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-green-800",children:["\xa5",_.open.toLocaleString()]})]}),(0,l.jsxs)(u.E.div,{className:"bg-red-50 rounded-lg p-2",whileHover:{scale:1.02},children:[(0,l.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"終値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-red-800",children:["\xa5",_.close.toLocaleString()]})]}),(0,l.jsxs)(u.E.div,{className:"bg-blue-50 rounded-lg p-2",whileHover:{scale:1.02},children:[(0,l.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"高値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-blue-800",children:["\xa5",_.high.toLocaleString()]})]}),(0,l.jsxs)(u.E.div,{className:"bg-purple-50 rounded-lg p-2",whileHover:{scale:1.02},children:[(0,l.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"安値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-purple-800",children:["\xa5",_.low.toLocaleString()]})]})]}),(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"出来高"}),(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:_.volume.toLocaleString()})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"変動率"}),(0,l.jsxs)("span",{className:"text-sm font-semibold ".concat(_.close>_.open?"text-green-600":"text-red-600"),children:[((_.close-_.open)/_.open*100).toFixed(2),"%"]})]})]})]})}),(0,l.jsx)(g.M,{children:B&&(0,l.jsxs)(u.E.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{duration:.3},className:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 w-80",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"トレンド分析"}),(0,l.jsx)("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"サポートライン"}),(0,l.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:[W.filter(e=>"#10b981"===e.color).length,"本"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"レジスタンスライン"}),(0,l.jsxs)("span",{className:"text-sm font-semibold text-red-600",children:[W.filter(e=>"#ef4444"===e.color).length,"本"]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"現在価格"}),(0,l.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["\xa5",null===(t=c[c.length-1])||void 0===t?void 0:t.close.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"価格変動"}),(0,l.jsx)("span",{className:"text-sm font-semibold ".concat((null===(s=c[c.length-1])||void 0===s?void 0:s.close)>(null===(r=c[c.length-2])||void 0===r?void 0:r.close)?"text-green-600":"text-red-600"),children:(null===(n=c[c.length-1])||void 0===n?void 0:n.close)>(null===(i=c[c.length-2])||void 0===i?void 0:i.close)?"上昇":"下降"})]})]})]})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,l.jsx)("span",{children:"サポートライン"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,l.jsx)("span",{children:"レジスタンスライン"})]})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["アニメーション進捗: ",Math.round(100*Z),"% | データ数: ",c.length]})]})]})},T=e=>{let{data:t,symbol:s,height:r=600,width:n,enableWebGL:i=!0,showPerformance:c=!1,onDataPointClick:o,className:d=""}=e,x=(0,a.useRef)(null),h=(0,a.useRef)(null),u=(0,a.useRef)(null),g=(0,a.useRef)(null),[j,v]=(0,a.useState)({width:0,height:0}),[N,S]=(0,a.useState)(null),[k,C]=(0,a.useState)({fps:0,renderTime:0,memoryUsage:0}),[M,L]=(0,a.useState)(!1),E=(0,a.useCallback)(()=>{if(h.current){let e=h.current.getBoundingClientRect();v({width:n||e.width,height:r})}},[n,r]);(0,a.useEffect)(()=>(E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)),[E]);let R=(0,a.useCallback)(()=>{let e=x.current;if(!e)return!1;let t=e.getContext("webgl")||e.getContext("experimental-webgl");if(!t)return!1;u.current=t;let s=t.createShader(t.VERTEX_SHADER),l=t.createShader(t.FRAGMENT_SHADER);if(!s||!l)return!1;t.shaderSource(s,"\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      varying vec4 v_color;\n      uniform vec2 u_resolution;\n      \n      void main() {\n        vec2 zeroToOne = a_position / u_resolution;\n        vec2 zeroToTwo = zeroToOne * 2.0;\n        vec2 clipSpace = zeroToTwo - 1.0;\n        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n        v_color = a_color;\n      }\n    "),t.shaderSource(l,"\n      precision mediump float;\n      varying vec4 v_color;\n      \n      void main() {\n        gl_FragColor = v_color;\n      }\n    "),t.compileShader(s),t.compileShader(l);let a=t.createProgram();if(!a)return!1;if(t.attachShader(a,s),t.attachShader(a,l),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))return console.error("WebGL program linking failed"),!1;g.current=a,t.useProgram(a);let r=t.getAttribLocation(a,"a_position"),n=t.getAttribLocation(a,"a_color"),i=t.getUniformLocation(a,"u_resolution"),c=t.createBuffer(),o=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,c),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,4,t.FLOAT,!1,0,0),t.uniform2f(i,e.width,e.height),!0},[]),A=(0,a.useCallback)(()=>{let e=u.current,s=x.current;if(!e||!s||!t.length)return;let l=k.now(),a=window.devicePixelRatio||1;s.width=j.width*a,s.height=j.height*a,e.viewport(0,0,s.width,s.height),e.clearColor(.95,.97,.99,1),e.clear(e.COLOR_BUFFER_BIT);let r=t.map(e=>[e.high,e.low]).flat(),n=Math.max(...r),i=n-Math.min(...r),o=[],d=[];t.forEach((e,s)=>{let l=60+s*(j.width-120)/t.length,a=e.close>e.open,r=60+(n-e.high)/i*(j.height-120),c=60+(n-e.low)/i*(j.height-120);o.push(l,r,l,c),d.push(a?.06:.94,a?.73:.27,a?.51:.27,1),d.push(a?.06:.94,a?.73:.27,a?.51:.27,1);let x=60+(n-Math.max(e.open,e.close))/i*(j.height-120),h=60+(n-Math.min(e.open,e.close))/i*(j.height-120),m=Math.max(4,(j.width-120)/t.length*.6),u=l-m/2,g=l+m/2;o.push(u,x,g,x,u,h,u,h,g,x,g,h);for(let e=0;e<6;e++)d.push(a?.06:.94,a?.73:.27,a?.51:.27,1)}),e.bindBuffer(e.ARRAY_BUFFER,e.getAttribLocation(g.current,"a_position")),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,e.getAttribLocation(g.current,"a_color")),e.bufferData(e.ARRAY_BUFFER,new Float32Array(d),e.STATIC_DRAW),e.drawArrays(e.LINES,0,o.length/2),e.drawArrays(e.TRIANGLES,0,o.length/2);let h=k.now()-l;c&&C(e=>{var t;return{fps:Math.round(1e3/h),renderTime:Math.round(100*h)/100,memoryUsage:(null===(t=k.memory)||void 0===t?void 0:t.usedJSHeapSize)/1024/1024||0}})},[t,j,c]);(0,a.useEffect)(()=>{i&&L(R())},[i,R]),(0,a.useEffect)(()=>{M&&A()},[A,M]);let T=(0,a.useCallback)(e=>{if(!x.current)return;let s=x.current.getBoundingClientRect(),l=e.clientX-s.left;e.clientY,s.top;let a=Math.floor((l-60)/(j.width-120)*t.length);a>=0&&a<t.length&&S(t[t.length-1-a])},[j.width,t]),D=(0,a.useCallback)(()=>{S(null)},[]),Z=(0,a.useCallback)(e=>{N&&o&&o(N)},[N,o]);return(0,l.jsxs)("div",{ref:h,className:"webgl-chart-container ".concat(d),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm border-b",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(b.Z,{className:"w-5 h-5 text-blue-600"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s}),M&&(0,l.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-green-600",children:[(0,l.jsx)(y.Z,{className:"w-3 h-3"}),(0,l.jsx)("span",{children:"WebGL"})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4 text-green-500"}),(0,l.jsxs)("span",{children:["高値: \xa5",Math.max(...t.map(e=>e.high)).toLocaleString()]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(p.Z,{className:"w-4 h-4 text-red-500"}),(0,l.jsxs)("span",{children:["安値: \xa5",Math.min(...t.map(e=>e.low)).toLocaleString()]})]})]})]}),c&&(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(w.Z,{className:"w-3 h-3"}),(0,l.jsxs)("span",{children:["FPS: ",k.fps]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(f.Z,{className:"w-3 h-3"}),(0,l.jsxs)("span",{children:[k.renderTime,"ms"]})]})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("canvas",{ref:x,width:j.width,height:j.height,onMouseMove:T,onMouseLeave:D,onClick:Z,className:"cursor-crosshair"}),N&&(0,l.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-4 border border-gray-200 max-w-xs",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,l.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:new Date(N.time).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",weekday:"short"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"bg-green-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"始値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-green-800",children:["\xa5",N.open.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-red-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"終値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-red-800",children:["\xa5",N.close.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"高値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-blue-800",children:["\xa5",N.high.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-purple-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"安値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-purple-800",children:["\xa5",N.low.toLocaleString()]})]})]}),(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"出来高"}),(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:N.volume.toLocaleString()})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"変動率"}),(0,l.jsxs)("span",{className:"text-sm font-semibold ".concat(N.close>N.open?"text-green-600":"text-red-600"),children:[((N.close-N.open)/N.open*100).toFixed(2),"%"]})]})]})]}),!M&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"text-center p-6 bg-white rounded-lg shadow-lg",children:[(0,l.jsx)(y.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"WebGL未対応"}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["お使いのブラウザはWebGLをサポートしていません。",(0,l.jsx)("br",{}),"最新のブラウザにアップデートしてください。"]}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"再読み込み"})]})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,l.jsx)("span",{children:"上昇"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,l.jsx)("span",{children:"下降"})]})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:[M?"WebGL加速":"Canvas描画"," | データ数: ",t.length]})]})]})};s(44533);var D=e=>{var t;let{data:s,symbol:r,height:o=600,width:x,defaultMode:h="professional",enableAllModes:S=!0,onDataPointClick:k,onExport:C,onShare:L,className:E=""}=e,[R,D]=(0,a.useState)(h),[Z,P]=(0,a.useState)(!1),[_,F]=(0,a.useState)(!0),[W,G]=(0,a.useState)(!0),[B,z]=(0,a.useState)(!0),[O,H]=(0,a.useState)(!0),[U,Y]=(0,a.useState)(!0),[I,V]=(0,a.useState)(!1),[J,X]=(0,a.useState)(!1),[q,K]=(0,a.useState)("light"),Q=(0,a.useMemo)(()=>[{id:"professional",name:"プロフェッショナル",description:"高度なテクニカル指標と分析機能",icon:(0,l.jsx)(d.Z,{className:"w-5 h-5"}),component:M,features:["テクニカル指標","高度な分析","プロ仕様"]},{id:"animated",name:"アニメーション",description:"滑らかなアニメーションとトレンド分析",icon:(0,l.jsx)(f.Z,{className:"w-5 h-5"}),component:A,features:["アニメーション","トレンド分析","視覚効果"]},{id:"webgl",name:"WebGL高速",description:"GPU加速による超高速描画",icon:(0,l.jsx)(b.Z,{className:"w-5 h-5"}),component:T,features:["GPU加速","高速描画","大量データ対応"]}],[]),$=(0,a.useMemo)(()=>{let e=Q.find(e=>e.id===R);return(null==e?void 0:e.component)||M},[R,Q]),ee=(0,a.useMemo)(()=>{if(!s.length)return null;let e=s.map(e=>e.close),t=s.map(e=>e.volume),l=e.reduce((e,t)=>e+t,0)/e.length,a=t.reduce((e,t)=>e+t,0),r=e[e.length-1]-e[0],n=r/e[0]*100;return{maxPrice:Math.max(...e),minPrice:Math.min(...e),avgPrice:l,maxVolume:Math.max(...t),totalVolume:a,priceChange:r,priceChangePercent:n,dataPoints:s.length}},[s]),et=(0,a.useCallback)(e=>{C?C(e):console.log("Exporting chart as ".concat(e))},[C]),es=(0,a.useCallback)(()=>{L?L():navigator.share&&navigator.share({title:"".concat(r," チャート"),text:"".concat(r," の株価チャートを共有"),url:window.location.href})},[L,r]),el=(0,a.useCallback)(()=>{document.fullscreenElement?(document.exitFullscreen(),X(!1)):(document.documentElement.requestFullscreen(),X(!0))},[]);return(0,l.jsxs)("div",{className:"ultimate-chart-container ".concat(E," ").concat(J?"fixed inset-0 z-50 bg-white":""),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/80 backdrop-blur-sm border-b",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"}),(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:r})]}),S&&(0,l.jsx)("div",{className:"flex space-x-1",children:Q.map(e=>(0,l.jsxs)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>D(e.id),className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ".concat(R===e.id?"bg-blue-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.icon,(0,l.jsx)("span",{children:e.name})]},e.id))})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[ee&&(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(m.Z,{className:"w-4 h-4 text-green-500"}),(0,l.jsxs)("span",{children:["高値: \xa5",ee.maxPrice.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(p.Z,{className:"w-4 h-4 text-red-500"}),(0,l.jsxs)("span",{children:["安値: \xa5",ee.minPrice.toLocaleString()]})]}),(0,l.jsx)("div",{className:"flex items-center space-x-1 ".concat(ee.priceChange>=0?"text-green-600":"text-red-600"),children:(0,l.jsxs)("span",{children:[ee.priceChange>=0?"+":"",ee.priceChangePercent.toFixed(2),"%"]})})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>P(!Z),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"設定",children:(0,l.jsx)(c.Z,{className:"w-4 h-4"})}),(0,l.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:el,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"フルスクリーン",children:(0,l.jsx)(j.Z,{className:"w-4 h-4"})}),(0,l.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>et("png"),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"エクスポート",children:(0,l.jsx)(n.Z,{className:"w-4 h-4"})}),(0,l.jsx)(u.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:es,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"シェア",children:(0,l.jsx)(i.Z,{className:"w-4 h-4"})})]})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)($,{data:s,symbol:r,height:o,width:x,showVolume:W,showTrendLines:B,enableAnimation:O,enableWebGL:U,showPerformance:I,theme:q,onDataPointClick:k}),(0,l.jsx)(g.M,{children:Z&&(0,l.jsxs)(u.E.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},transition:{duration:.3},className:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-6 border border-gray-200 w-80",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"チャート設定"}),(0,l.jsx)("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"表示設定"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("label",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"出来高表示"}),(0,l.jsx)("button",{onClick:()=>G(!W),className:"w-12 h-6 rounded-full transition-colors ".concat(W?"bg-blue-500":"bg-gray-300"),children:(0,l.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(W?"translate-x-6":"translate-x-0.5")})})]}),(0,l.jsxs)("label",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"トレンドライン"}),(0,l.jsx)("button",{onClick:()=>z(!B),className:"w-12 h-6 rounded-full transition-colors ".concat(B?"bg-blue-500":"bg-gray-300"),children:(0,l.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(B?"translate-x-6":"translate-x-0.5")})})]}),(0,l.jsxs)("label",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"アニメーション"}),(0,l.jsx)("button",{onClick:()=>H(!O),className:"w-12 h-6 rounded-full transition-colors ".concat(O?"bg-blue-500":"bg-gray-300"),children:(0,l.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(O?"translate-x-6":"translate-x-0.5")})})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"パフォーマンス"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("label",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"WebGL加速"}),(0,l.jsx)("button",{onClick:()=>Y(!U),className:"w-12 h-6 rounded-full transition-colors ".concat(U?"bg-blue-500":"bg-gray-300"),children:(0,l.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(U?"translate-x-6":"translate-x-0.5")})})]}),(0,l.jsxs)("label",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"パフォーマンス表示"}),(0,l.jsx)("button",{onClick:()=>V(!I),className:"w-12 h-6 rounded-full transition-colors ".concat(I?"bg-blue-500":"bg-gray-300"),children:(0,l.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(I?"translate-x-6":"translate-x-0.5")})})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"テーマ"}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>K("light"),className:"px-3 py-2 rounded-md text-sm transition-colors ".concat("light"===q?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"),children:"ライト"}),(0,l.jsx)("button",{onClick:()=>K("dark"),className:"px-3 py-2 rounded-md text-sm transition-colors ".concat("dark"===q?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"),children:"ダーク"})]})]})]})]})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-t",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(v.Z,{className:"w-4 h-4"}),(0,l.jsxs)("span",{children:["モード: ",null===(t=Q.find(e=>e.id===R))||void 0===t?void 0:t.name]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(N.Z,{className:"w-4 h-4"}),(0,l.jsxs)("span",{children:["データ数: ",s.length]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(y.Z,{className:"w-3 h-3"}),(0,l.jsx)("span",{children:U?"WebGL":"Canvas"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(w.Z,{className:"w-3 h-3"}),(0,l.jsx)("span",{children:"高性能"})]})]})]})]})},Z=e=>{let{symbol:t,data:s,isOpen:r,onClose:n,isLoading:i=!1,error:c,timeframe:o,height:u=400}=e,[g,f]=(0,a.useState)("1M"),[b,p]=(0,a.useState)([]),[j,v]=(0,a.useState)({short:[],medium:[],long:[]}),[N,y]=(0,a.useState)(null),[w,S]=(0,a.useState)(1),[k,C]=(0,a.useState)(0),[M,L]=(0,a.useState)(!1),[E,R]=(0,a.useState)("candlestick");(0,a.useRef)(null);let A=[{value:"1M",label:"1ヶ月"},{value:"3M",label:"3ヶ月"},{value:"6M",label:"6ヶ月"},{value:"1Y",label:"1年"}],T=(e,t)=>{let s=[];for(let l=0;l<e.length;l++)if(l<t-1)s.push(NaN);else{let a=e.slice(l-t+1,l+1).reduce((e,t)=>e+t,0);s.push(a/t)}return s};if((0,a.useEffect)(()=>{if(console.log("StockChart useEffect - data length:",s.length),console.log("StockChart useEffect - selectedPeriod:",g),0===s.length){console.log("No data available");return}let e=new Date,t={"1M":30,"3M":90,"6M":180,"1Y":365}[g]||30,l=new Date(e.getTime()-864e5*t),a=s.filter(e=>new Date(e.time)>=l);console.log("Filtered data length:",a.length),p(a);let r=a.map(e=>e.close);v({short:T(r,5),medium:T(r,25),long:T(r,50)})},[s,g]),console.log("StockChart render - isOpen:",r,"typeof isOpen:",typeof r),!1===r)return console.log("isOpen is false, returning null"),null;if(!0===r){var Z;return console.log("isOpen is true, rendering modal"),(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"}),(0,l.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[t," チャート"]})]}),(0,l.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,l.jsx)(x.Z,{className:"w-6 h-6"})})]}),(0,l.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(h.Z,{className:"w-5 h-5 text-gray-500"}),(0,l.jsx)("div",{className:"flex space-x-2",children:A.map(e=>(0,l.jsx)("button",{onClick:()=>f(e.value),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors ".concat(g===e.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]})}),(0,l.jsx)("div",{className:"p-6",children:i?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(m.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャートデータの読み込みに失敗しました"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:c.message})]})}):0===b.length?(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(d.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャートデータがありません"})]})}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(()=>{if(console.log("renderChart called - chartData length:",b.length),0===b.length)return console.log("No chart data to render"),null;let e=Math.max(...b.map(e=>e.high)),t=Math.min(...b.map(e=>e.low)),s=e-t,a=Math.max(800,.9*window.innerWidth);return console.log("Chart dimensions:",{chartHeight:u,chartWidth:a,maxPrice:e,minPrice:t,priceRange:s}),(0,l.jsxs)("div",{className:"relative bg-gradient-to-br from-slate-50 to-slate-100 rounded-lg p-4 shadow-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"absolute top-2 right-2 z-10 flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>R("candlestick"===E?"line":"candlestick"),className:"px-3 py-1 text-xs bg-white/80 backdrop-blur-sm rounded-md shadow-sm hover:bg-white transition-colors",children:"candlestick"===E?"線グラフ":"ローソク足"}),(0,l.jsx)("button",{onClick:()=>L(!M),className:"px-3 py-1 text-xs rounded-md shadow-sm transition-colors ".concat(M?"bg-blue-500 text-white":"bg-white/80 backdrop-blur-sm hover:bg-white"),children:"出来高"}),(0,l.jsx)("button",{onClick:()=>S(1),className:"px-3 py-1 text-xs bg-white/80 backdrop-blur-sm rounded-md hover:bg-white transition-colors",children:"リセット"})]}),(0,l.jsxs)("svg",{width:a,height:u,className:"w-full h-full",viewBox:"0 0 ".concat(a," ").concat(u),style:{transform:"scale(".concat(w,") translateX(").concat(k,"px)")},children:[(0,l.jsxs)("defs",{children:[(0,l.jsx)("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:(0,l.jsx)("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#e2e8f0",strokeWidth:"0.5",opacity:"0.3"})}),(0,l.jsxs)("linearGradient",{id:"bullGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#059669",stopOpacity:"0.6"})]}),(0,l.jsxs)("linearGradient",{id:"bearGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:"0.8"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#dc2626",stopOpacity:"0.6"})]}),(0,l.jsxs)("filter",{id:"glow",children:[(0,l.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,l.jsxs)("feMerge",{children:[(0,l.jsx)("feMergeNode",{in:"coloredBlur"}),(0,l.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,l.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),(0,l.jsx)("rect",{x:"0",y:"0",width:a,height:u,fill:"rgba(255,255,255,0.8)"}),b.map((t,r)=>{let n=r/(b.length-1)*a,i=(e-Math.max(t.open,t.close))/s*u,c=(e-Math.min(t.open,t.close))/s*u,o=(e-t.high)/s*u,d=(e-t.low)/s*u,x=t.close>t.open,h=Math.max(3,a/b.length*.6);return(0,l.jsxs)("g",{className:"candle-group",children:[(0,l.jsx)("line",{x1:n,y1:o,x2:n,y2:d,stroke:x?"#10b981":"#ef4444",strokeWidth:"2",strokeLinecap:"round",filter:"url(#glow)"}),(0,l.jsx)("rect",{x:n-h/2,y:i,width:h,height:Math.max(2,c-i),fill:x?"url(#bullGradient)":"url(#bearGradient)",stroke:x?"#059669":"#dc2626",strokeWidth:"1",rx:"1",ry:"1",filter:"url(#glow)"}),(0,l.jsx)("rect",{x:n-h/2-5,y:o-5,width:h+10,height:d-o+10,fill:"transparent",onMouseEnter:()=>y(t),onMouseLeave:()=>y(null),style:{cursor:"pointer"}})]},r)}),j.short.map((t,r)=>{if(isNaN(t)||0===r)return null;let n=(r-1)/(b.length-1)*a,i=r/(b.length-1)*a,c=(e-j.short[r-1])/s*u,o=(e-t)/s*u;return(0,l.jsx)("line",{x1:n,y1:c,x2:i,y2:o,stroke:"#3b82f6",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.8",filter:"url(#glow)"},"short-line-".concat(r))}),j.medium.map((t,r)=>{if(isNaN(t)||0===r)return null;let n=(r-1)/(b.length-1)*a,i=r/(b.length-1)*a,c=(e-j.medium[r-1])/s*u,o=(e-t)/s*u;return(0,l.jsx)("line",{x1:n,y1:c,x2:i,y2:o,stroke:"#f59e0b",strokeWidth:"2",strokeDasharray:"8,4",opacity:"0.8",filter:"url(#glow)"},"medium-line-".concat(r))}),j.long.map((t,r)=>{if(isNaN(t)||0===r)return null;let n=(r-1)/(b.length-1)*a,i=r/(b.length-1)*a,c=(e-j.long[r-1])/s*u,o=(e-t)/s*u;return(0,l.jsx)("line",{x1:n,y1:c,x2:i,y2:o,stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"12,6",opacity:"0.8",filter:"url(#glow)"},"long-line-".concat(r))})]}),N&&(0,l.jsxs)("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm border border-gray-200 rounded-xl p-4 shadow-2xl max-w-xs",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,l.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:new Date(N.time).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",weekday:"short"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"bg-green-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"始値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-green-800",children:["\xa5",N.open.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-red-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-red-600 font-medium",children:"終値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-red-800",children:["\xa5",N.close.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-blue-600 font-medium",children:"高値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-blue-800",children:["\xa5",N.high.toLocaleString()]})]}),(0,l.jsxs)("div",{className:"bg-purple-50 rounded-lg p-2",children:[(0,l.jsx)("div",{className:"text-xs text-purple-600 font-medium",children:"安値"}),(0,l.jsxs)("div",{className:"text-sm font-bold text-purple-800",children:["\xa5",N.low.toLocaleString()]})]})]}),(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"出来高"}),(0,l.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:N.volume.toLocaleString()})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"変動率"}),(0,l.jsxs)("span",{className:"text-sm font-semibold ".concat(N.close>N.open?"text-green-600":"text-red-600"),children:[((N.close-N.open)/N.open*100).toFixed(2),"%"]})]})]})]})]})})()}),(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-6 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,l.jsx)("span",{children:"短期移動平均 (5日)"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,l.jsx)("span",{children:"中期移動平均 (25日)"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,l.jsx)("span",{children:"長期移動平均 (50日)"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,l.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\xa5",(null===(Z=b[b.length-1])||void 0===Z?void 0:Z.close.toLocaleString())||"--"]}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"現在価格"})]}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,l.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[b.length,"日"]}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"データ期間"})]}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,l.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\xa5",Math.max(...b.map(e=>e.high)).toLocaleString()]}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"期間最高値"})]}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,l.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["\xa5",Math.min(...b.map(e=>e.low)).toLocaleString()]}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"期間最安値"})]})]})]})})]})})}return console.log("Rendering inline chart with UltimateChart"),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(h.Z,{className:"w-5 h-5 text-gray-500"}),(0,l.jsx)("div",{className:"flex space-x-2",children:A.map(e=>(0,l.jsx)("button",{onClick:()=>f(e.value),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors ".concat(g===e.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.value))})]})}),i?(0,l.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,l.jsx)("span",{className:"ml-2 text-gray-600",children:"読み込み中..."})]}):c?(0,l.jsx)("div",{className:"flex items-center justify-center h-64 text-red-600",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-lg font-semibold mb-2",children:"エラーが発生しました"}),(0,l.jsx)("div",{className:"text-sm",children:c.message})]})}):0===b.length?(0,l.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-lg font-semibold mb-2",children:"データがありません"}),(0,l.jsx)("div",{className:"text-sm",children:"チャートデータを取得できませんでした"})]})}):(0,l.jsx)(D,{data:b.map(e=>({time:new Date(e.time).getTime(),open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume})),symbol:t,height:u,enableAllModes:!0,onDataPointClick:e=>{console.log("Data point clicked:",e)},onExport:e=>{console.log("Exporting chart as:",e)},onShare:()=>{console.log("Sharing chart")}})]})},P=s(12381),_=s(53834);function F(e){let{symbol:t}=e,[s,d]=(0,a.useState)(null),[x,h]=(0,a.useState)([]),[m,u]=(0,a.useState)("1m"),[g,f]=(0,a.useState)(!0),[b,p]=(0,a.useState)(null),j=(e,t)=>{let s=[],l=Date.now(),a={"1d":3e5,"1w":36e5,"1m":864e5,"3m":864e5,"6m":864e5,"1y":864e5}[t]||864e5,r={"1d":288,"1w":168,"1m":30,"3m":90,"6m":180,"1y":365}[t]||30,n=1e3+500*Math.random();for(let e=r;e>=0;e--){let t=l-e*a,r=n+(Math.random()-.5)*100,i=r+(Math.random()-.5)*10,c=r+(Math.random()-.5)*10,o=Math.max(i,c)+20*Math.random(),d=Math.min(i,c)-20*Math.random(),x=Math.floor(1e6*Math.random())+1e5;s.push({timestamp:t,open:Math.round(100*i)/100,high:Math.round(100*o)/100,low:Math.round(100*d)/100,close:Math.round(100*c)/100,volume:x})}return s},v=e=>{let t=1e3+500*Math.random(),s=(Math.random()-.5)*50;return{symbol:e,name:"".concat(e," 株式会社"),price:Math.round(100*t)/100,change:Math.round(100*s)/100,changePercent:Math.round(s/t*1e4)/100,marketCap:"".concat(Math.floor(1e3*Math.random()),"億円"),volume:"".concat(Math.floor(1e6*Math.random()))}};(0,a.useEffect)(()=>{let e=async()=>{try{f(!0),p(null);let e=j(t,m),s=v(t),l=e.map(e=>({time:new Date(e.timestamp).toISOString(),open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume}));console.log("Generated mock data:",e.length,"items"),console.log("Converted data:",l.length,"items"),console.log("Sample data:",l.slice(0,3)),h(l),d(s)}catch(e){console.error("チャートデータ読み込みエラー:",e),p("チャートデータの読み込みに失敗しました")}finally{f(!1)}};t&&e()},[t,m]);let N=e=>{u(e)};return g?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャートを読み込み中..."})]})}):b?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-red-600 mb-4",children:(0,l.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"エラーが発生しました"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:b}),(0,l.jsx)(P.z,{onClick:()=>window.location.reload(),children:"再読み込み"})]})}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(o.default,{href:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:(0,l.jsx)(r.Z,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:(null==s?void 0:s.name)||(0,_.LH)(t)}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:(0,_.LH)(t)})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)(P.z,{variant:"outline",size:"sm",onClick:()=>{console.log("チャート画像をダウンロード")},children:[(0,l.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"ダウンロード"]}),(0,l.jsxs)(P.z,{variant:"outline",size:"sm",onClick:()=>{navigator.share?navigator.share({title:"".concat(t," チャート"),text:"".concat(t," の株価チャート"),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("URLをクリップボードにコピーしました"))},children:[(0,l.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"共有"]}),(0,l.jsxs)(P.z,{variant:"outline",size:"sm",children:[(0,l.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"設定"]})]})]})})}),s&&(0,l.jsx)("div",{className:"bg-white border-b",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["\xa5",s.price.toLocaleString()]}),(0,l.jsxs)("span",{className:"ml-2 text-sm font-medium ".concat(s.change>=0?"text-green-600":"text-red-600"),children:[s.change>=0?"+":"",s.change.toFixed(2),"(",s.changePercent>=0?"+":"",s.changePercent.toFixed(2),"%)"]})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,l.jsxs)("div",{children:["時価総額: ",s.marketCap]}),(0,l.jsxs)("div",{children:["出来高: ",s.volume]})]})]})})})}),(0,l.jsx)("div",{className:"bg-white border-b",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2",children:(0,l.jsx)("div",{className:"flex space-x-1",children:["1d","1w","1m","3m","6m","1y"].map(e=>(0,l.jsx)("button",{onClick:()=>N(e),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat(m===e?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:"1d"===e?"1日":"1w"===e?"1週":"1m"===e?"1ヶ月":"3m"===e?"3ヶ月":"6m"===e?"6ヶ月":"1年"},e))})})}),(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:[(0,_.LH)(t)," 株価チャート (",m,")"]}),(0,l.jsx)("div",{className:"h-96",children:(0,l.jsx)(Z,{data:x,symbol:t,timeframe:m,height:400,isLoading:g,error:b?Error(b):null})})]})})})]})}},12381:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var l=s(85583),a=s(46796),r=s(57437),n=s(2265),i=s(90535),c=s(70961);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{var{className:s,variant:n,size:i,asChild:d=!1}=e,x=(0,a._)(e,["className","variant","size","asChild"]);return(0,r.jsx)("button",(0,l._)({className:(0,c.cn)(o({variant:n,size:i,className:s})),ref:t},x))});d.displayName="Button"},70961:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var l=s(61994),a=s(53335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,l.W)(t))}},53834:function(e,t,s){"use strict";function l(e){if(console.log("\uD83D\uDD0D formatStockCode called with:",e,"type:",typeof e,"length:",null==e?void 0:e.length),!e)return console.log("❌ formatStockCode: empty code, returning empty string"),"";if(5===e.length&&e.endsWith("0")){let t=e.substring(0,4);return console.log("✅ formatStockCode: 5-digit code ending with 0, converting",e,"→",t),t}return console.log("ℹ️ formatStockCode: no conversion needed, returning:",e),e}s.d(t,{LH:function(){return l}})},44533:function(){}},function(e){e.O(0,[2074,8014,7648,870,2971,2117,1744],function(){return e(e.s=26993)}),_N_E=e.O()}]);