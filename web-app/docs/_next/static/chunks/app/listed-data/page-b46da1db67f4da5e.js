(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9295],{80080:function(e,t,s){Promise.resolve().then(s.bind(s,97263))},97263:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k},dynamic:function(){return w}});var r=s(85583),a=s(1780),n=s(57437),l=s(2265),o=s(99376),c=s(53834);class i{async execute(e){return new Promise((t,s)=>{this.requestQueue.push(async()=>{try{let s=await e();t(s)}catch(e){s(e)}}),this.processQueue()})}async processQueue(){if(!this.isProcessing&&0!==this.requestQueue.length){for(this.isProcessing=!0;this.requestQueue.length>0;){let e=Date.now()-this.lastRequestTime;e<this.delayMs&&await new Promise(t=>setTimeout(t,this.delayMs-e));let t=this.requestQueue.shift();t&&(await t(),this.lastRequestTime=Date.now())}this.isProcessing=!1}}constructor(e){this.delayMs=e,this.lastRequestTime=0,this.requestQueue=[],this.isProcessing=!1}}class d{static validateStockData(e){let t=[],s=[];return e.forEach((e,r)=>{let a=[];e.date&&e.code||a.push("Record ".concat(r,": Missing required fields (date, code)")),e.date&&!this.VALIDATION_RULES.date.format.test(e.date)&&a.push("Record ".concat(r,": Invalid date format: ").concat(e.date)),e.code&&!this.VALIDATION_RULES.code.format.test(e.code)&&a.push("Record ".concat(r,": Invalid code format: ").concat(e.code)),["open","high","low","close"].forEach(t=>{let s=parseFloat(e[t]);(isNaN(s)||s<this.VALIDATION_RULES.price.min||s>this.VALIDATION_RULES.price.max)&&a.push("Record ".concat(r,": Invalid ").concat(t," value: ").concat(e[t]))});let n=parseInt(e.volume);(isNaN(n)||n<this.VALIDATION_RULES.volume.min||n>this.VALIDATION_RULES.volume.max)&&a.push("Record ".concat(r,": Invalid volume value: ").concat(e.volume));let l=parseFloat(e.high),o=parseFloat(e.low),c=parseFloat(e.open),i=parseFloat(e.close);isNaN(l)||isNaN(o)||!(l<o)||a.push("Record ".concat(r,": High price (").concat(l,") is less than low price (").concat(o,")")),isNaN(l)||isNaN(c)||!(l<c)||a.push("Record ".concat(r,": High price (").concat(l,") is less than open price (").concat(c,")")),isNaN(l)||isNaN(i)||!(l<i)||a.push("Record ".concat(r,": High price (").concat(l,") is less than close price (").concat(i,")")),isNaN(o)||isNaN(c)||!(o>c)||a.push("Record ".concat(r,": Low price (").concat(o,") is greater than open price (").concat(c,")")),isNaN(o)||isNaN(i)||!(o>i)||a.push("Record ".concat(r,": Low price (").concat(o,") is greater than close price (").concat(i,")")),0===a.length?t.push({date:e.date,code:e.code,open:parseFloat(e.open)||0,high:parseFloat(e.high)||0,low:parseFloat(e.low)||0,close:parseFloat(e.close)||0,volume:parseInt(e.volume)||0}):s.push(...a)}),{validData:t,errors:s}}static calculateQualityScore(e,t){return 0===t?0:Math.round(e/t*100)}}d.VALIDATION_RULES={price:{min:0,max:1e6,required:!0},volume:{min:0,max:1e9,required:!0},date:{format:/^\d{4}-\d{2}-\d{2}$/,required:!0},code:{format:/^([A-Za-z]\d{4}|\d{4,5})$/,required:!0}};class u{recordRequest(e,t,s){if(this.metrics.totalRequests++,this.metrics.lastRequestTime=new Date().toISOString(),e)this.metrics.successfulRequests++,this.metrics.consecutiveFailures=0;else switch(this.metrics.failedRequests++,this.metrics.consecutiveFailures++,s){case"timeout":this.metrics.timeoutErrors++;break;case"rate_limit":this.metrics.rateLimitErrors++;break;case"validation":this.metrics.validationErrors++}let r=this.metrics.averageResponseTime*(this.metrics.totalRequests-1)+t;this.metrics.averageResponseTime=r/this.metrics.totalRequests}recordDataQuality(e,t){this.qualityReports.set(e,t)}getMetrics(){return(0,r._)({},this.metrics)}getQualityReport(e){return this.qualityReports.get(e)}getAllQualityReports(){return Array.from(this.qualityReports.values())}getHealthStatus(){let e=[],t=this.metrics.totalRequests>0?this.metrics.successfulRequests/this.metrics.totalRequests*100:100;t<95&&e.push("低い成功率: ".concat(t.toFixed(1),"%")),this.metrics.consecutiveFailures>5&&e.push("連続失敗: ".concat(this.metrics.consecutiveFailures,"回")),this.metrics.timeoutErrors>.1*this.metrics.totalRequests&&e.push("タイムアウトエラーが多い: ".concat(this.metrics.timeoutErrors,"回")),this.metrics.rateLimitErrors>0&&e.push("レート制限エラー: ".concat(this.metrics.rateLimitErrors,"回")),this.metrics.validationErrors>.05*this.metrics.totalRequests&&e.push("データ検証エラーが多い: ".concat(this.metrics.validationErrors,"回"));let s="healthy";return e.length>2||t<80?s="unhealthy":(e.length>0||t<95)&&(s="degraded"),{status:s,issues:e}}constructor(){this.qualityReports=new Map,this.metrics={totalRequests:0,successfulRequests:0,failedRequests:0,timeoutErrors:0,rateLimitErrors:0,validationErrors:0,averageResponseTime:0,lastRequestTime:"",consecutiveFailures:0,tokenRefreshCount:0,lastTokenRefresh:"",tokenExpiryTime:""}}}class m{async initDB(){return"undefined"==typeof indexedDB?Promise.resolve():new Promise((e,t)=>{let s=indexedDB.open(this.DB_NAME,this.DB_VERSION);s.onerror=()=>{console.error("IndexedDB初期化エラー:",s.error),t(s.error)},s.onsuccess=()=>{this.db=s.result,console.info("強化版IndexedDB初期化完了"),e()},s.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains(this.STORE_NAME)){let e=t.createObjectStore(this.STORE_NAME,{keyPath:["symbol","date"]});e.createIndex("symbol","symbol",{unique:!1}),e.createIndex("date","date",{unique:!1}),e.createIndex("quality_score","qualityScore",{unique:!1})}if(!t.objectStoreNames.contains(this.METADATA_STORE)){let e=t.createObjectStore(this.METADATA_STORE,{keyPath:"symbol"});e.createIndex("last_updated","lastUpdated",{unique:!1}),e.createIndex("quality_score","qualityScore",{unique:!1})}t.objectStoreNames.contains(this.METRICS_STORE)||t.createObjectStore(this.METRICS_STORE,{keyPath:"id"})}})}async fetchWithRetry(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"API call",r=Date.now();try{let a;if(e.includes("/markets/stock/list")){let{resolveStaticPath:e}=await s.e(3268).then(s.bind(s,73268));a=e("/data/listed_index.json")}else{if(e.includes("/prices/daily_quotes"))return{data:[],message:"価格データは個別銘柄ファイルから取得してください"};let{resolveStaticPath:t}=await s.e(3268).then(s.bind(s,73268));a=t("/data/listed_index.json")}let n=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw Error("HTTP ".concat(n.status,": ").concat(n.statusText));let l=await n.json(),o=Date.now()-r;return this.qualityMonitor.recordRequest(!0,o),console.info("".concat(t,"成功 (静的データ)"),{responseTime:o}),l}catch(s){let e=Date.now()-r;throw this.qualityMonitor.recordRequest(!1,e),console.warn("".concat(t,"失敗 (静的データ):"),s),Error("".concat(t,"が失敗: ").concat(s instanceof Error?s.message:"不明なエラー"))}}async makeApiCall(e){return this.rateLimiter.execute(e)}async getAllSymbols(){try{console.info("全銘柄一覧取得開始 (静的データ)");let e=await this.makeApiCall(()=>this.fetchWithRetry("".concat(this.config.baseUrl,"/markets/stock/list"),{method:"GET"},"全銘柄一覧取得")),t=((null==e?void 0:e.stocks)||(null==e?void 0:e.data)||[]).map(e=>({code:(0,c.G$)((null==e?void 0:e.code)||(null==e?void 0:e.Code)||""),name:(null==e?void 0:e.name)||(null==e?void 0:e.CompanyName)||(null==e?void 0:e.CompanyNameJa)||(null==e?void 0:e.CompanyNameJp)||(null==e?void 0:e.CompanyNameJPN),sector:(null==e?void 0:e.sector)||(null==e?void 0:e.Sector33)||(null==e?void 0:e.SectorName)})).filter(e=>!!e.code&&!!e.name);return console.info("全銘柄一覧取得完了 (静的データ)",{count:t.length}),t}catch(e){return console.error("全銘柄一覧取得エラー (静的データ):",e),[]}}async testConnection(){try{var e,t;console.info("J-Quants接続テスト開始");let s=await this.makeApiCall(()=>this.fetchWithRetry("".concat(this.config.baseUrl,"/markets/stock/list"),{method:"GET"},"接続テスト")),r=this.qualityMonitor.getMetrics(),a=this.qualityMonitor.getHealthStatus();return console.info("J-Quants接続テスト成功",{dataCount:(null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.length)||0,healthStatus:a.status}),{success:!0,message:"接続成功: ".concat((null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.length)||0,"件の銘柄データを取得 (健康状態: ").concat(a.status,")"),metrics:r}}catch(t){console.error("J-Quants接続テスト失敗:",t);let e=this.qualityMonitor.getMetrics();return{success:!1,message:"接続失敗: ".concat(t instanceof Error?t.message:"不明なエラー"),metrics:e}}}async getStockData(e,t,s){let r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];try{if(console.info("株価データ取得開始",{symbol:e,startDate:t,endDate:s,useCache:r}),r){let r=await this.getCachedData(e,t,s);if(r.length>0)return console.info("キャッシュからデータ取得",{symbol:e,count:r.length,dateRange:"".concat(t," - ").concat(s)}),r}let a=await this.makeApiCall(()=>this.fetchFromAPI(e,t,s)),n=a,l=[];if(this.config.enableDataValidation){let e=d.validateStockData(a);n=e.validData,(l=e.errors).length>0&&(console.warn("データ検証エラー:",l),this.qualityMonitor.recordRequest(!1,0,"validation"))}if(this.config.enableQualityMonitoring&&n.length>0){let t=d.calculateQualityScore(n.length,a.length),s={symbol:e,totalRecords:a.length,validRecords:n.length,invalidRecords:a.length-n.length,qualityScore:t,validationErrors:l.map(e=>({type:"validation",count:1,description:e})),recommendations:this.generateQualityRecommendations(t,l)};this.qualityMonitor.recordDataQuality(e,s)}return r&&n.length>0&&await this.saveToCache(e,n,t,s,l),console.info("APIからデータ取得完了",{symbol:e,count:n.length,qualityScore:this.config.enableQualityMonitoring?d.calculateQualityScore(n.length,a.length):void 0}),n}catch(e){throw console.error("株価データ取得エラー:",e),e}}async fetchFromAPI(e,t,s){let r=await this.fetchWithRetry("".concat(this.config.baseUrl,"/markets/daily_quotes"),{method:"GET"},"株価データ取得 (".concat(e,")"));return this.transformAPIResponse(r,e)}transformAPIResponse(e,t){return(null==e?void 0:e.data)?e.data.filter(e=>e.code===t).map(e=>({date:e.date,code:e.code,open:parseFloat(e.open)||0,high:parseFloat(e.high)||0,low:parseFloat(e.low)||0,close:parseFloat(e.close)||0,volume:parseInt(e.volume)||0})):[]}async getCachedData(e,t,s){return this.db?new Promise((r,a)=>{let n=this.db.transaction([this.STORE_NAME],"readonly").objectStore(this.STORE_NAME).index("symbol").getAll(e);n.onsuccess=()=>{r(n.result.filter(e=>e.date>=t&&e.date<=s))},n.onerror=()=>{console.error("キャッシュ取得エラー:",n.error),a(n.error)}}):[]}async saveToCache(e,t,s,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(this.db&&0!==t.length)return new Promise((n,l)=>{let o=this.db.transaction([this.STORE_NAME,this.METADATA_STORE],"readwrite"),c=o.objectStore(this.STORE_NAME),i=o.objectStore(this.METADATA_STORE),u=0,m=t.length+1;t.forEach(e=>{let t=c.put(e);t.onsuccess=()=>{++u===m&&n()},t.onerror=()=>{console.error("キャッシュ保存エラー:",t.error),l(t.error)}});let h=d.calculateQualityScore(t.length,t.length+a.length),x={lastUpdated:new Date().toISOString(),dataVersion:"2.0",symbol:e,dateRange:{start:s,end:r},qualityScore:h,validationErrors:a},g=i.put(x);g.onsuccess=()=>{++u===m&&n()},g.onerror=()=>{console.error("メタデータ保存エラー:",g.error),l(g.error)}})}generateQualityRecommendations(e,t){let s=[];return e<90&&s.push("データ品質が低下しています。APIの安定性を確認してください。"),t.some(e=>e.includes("Invalid date format"))&&s.push("日付フォーマットの検証を強化してください。"),t.some(e=>e.includes("price"))&&s.push("価格データの異常値をチェックしてください。"),t.some(e=>e.includes("volume"))&&s.push("出来高データの検証を強化してください。"),s}getSystemHealth(){let e=this.qualityMonitor.getHealthStatus(),t=this.qualityMonitor.getMetrics(),s=this.qualityMonitor.getAllQualityReports();return{status:e.status,issues:e.issues,metrics:t,qualityReports:s}}async getCacheStats(){return this.db?new Promise((e,t)=>{let s=this.db.transaction([this.STORE_NAME,this.METADATA_STORE],"readonly"),r=s.objectStore(this.STORE_NAME),a=s.objectStore(this.METADATA_STORE),n=r.getAll(),l=a.getAll(),o=[],c=[];n.onsuccess=()=>{o=n.result},l.onsuccess=()=>{c=l.result},s.oncomplete=()=>{let t=[...new Set(o.map(e=>e.symbol))],s=c.length>0?Math.max(...c.map(e=>new Date(e.lastUpdated).getTime())):0,r=c.length>0?c.reduce((e,t)=>e+(t.qualityScore||0),0)/c.length:0,a=c.reduce((e,t)=>{var s;return e+((null===(s=t.validationErrors)||void 0===s?void 0:s.length)||0)},0);e({totalRecords:o.length,symbols:t,lastUpdated:s>0?new Date(s).toISOString():"",averageQualityScore:Math.round(r),totalValidationErrors:a})},s.onerror=()=>{t(s.error)}}):{totalRecords:0,symbols:[],lastUpdated:"",averageQualityScore:0,totalValidationErrors:0}}async clearCache(e){if(this.db)return new Promise((t,s)=>{let r=this.db.transaction([this.STORE_NAME,this.METADATA_STORE],"readwrite");if(e){let s=r.objectStore(this.STORE_NAME),a=r.objectStore(this.METADATA_STORE),n=s.index("symbol").getAll(e);n.onsuccess=()=>{let r=n.result,l=0;r.forEach(n=>{s.delete([n.symbol,n.date]).onsuccess=()=>{++l===r.length&&(a.delete(e),t())}})}}else{let e=r.objectStore(this.STORE_NAME),s=r.objectStore(this.METADATA_STORE);e.clear(),s.clear(),t()}})}constructor(e={}){this.db=null,this.DB_NAME="jquants_enhanced_cache",this.DB_VERSION=2,this.STORE_NAME="stock_data",this.METADATA_STORE="metadata",this.METRICS_STORE="metrics",this.config={token:e.token||"",baseUrl:e.baseUrl||"https://api.jquants.com/v1",timeout:e.timeout||3e4,maxRetries:e.maxRetries||3,retryDelay:e.retryDelay||1e3,rateLimitDelay:e.rateLimitDelay||100,enableDataValidation:!1!==e.enableDataValidation,enableQualityMonitoring:!1!==e.enableQualityMonitoring,autoTokenRefresh:!1!==e.autoTokenRefresh,tokenRefreshThreshold:e.tokenRefreshThreshold||2},this.rateLimiter=new i(this.config.rateLimitDelay),this.qualityMonitor=new u,this.initDB()}}var h=s(32489),x=s(95252),g=s(70525),p=s(3085),f=s(96215);function b(e){let{symbol:t,isOpen:r,onClose:a}=e,[o,i]=(0,l.useState)(null),[d,u]=(0,l.useState)(null),[m,b]=(0,l.useState)(!0),[y,v]=(0,l.useState)(null),[j,N]=(0,l.useState)(!1),[w,S]=(0,l.useState)(!1),[k,E]=(0,l.useState)(!1),[R,C]=(0,l.useState)(null);(0,l.useEffect)(()=>{r&&t&&(async()=>{try{var e;b(!0),v(null);let{resolveStaticPath:r}=await s.e(3268).then(s.bind(s,73268)),a=await fetch(r("/data/listed_index.json"));if(!a.ok)throw Error("銘柄データの取得に失敗しました");let n=await a.json(),l=null===(e=n.stocks)||void 0===e?void 0:e.find(e=>e.code===t);if(!l)throw Error("銘柄コード ".concat(t," が見つかりません"));i(l);let o={symbol:l.code,name:l.name,currentPrice:l.currentPrice||Math.floor(5e3*Math.random())+1e3,priceChange:Math.floor(200*Math.random())-100,priceChangePercent:(Math.random()-.5)*10,recommendation:Math.random()>.5?"BUY":Math.random()>.3?"HOLD":"SELL",confidence:.4*Math.random()+.6,reasons:["テクニカル分析で上昇トレンドを確認","RSIが適正範囲内","ボリンジャーバンド内での価格推移"],riskLevel:Math.random()>.5?"MEDIUM":Math.random()>.3?"LOW":"HIGH",targetPrice:Math.floor(1e3*Math.random())+(l.currentPrice||2e3),technicalIndicators:{sma5:Math.floor(1e3*Math.random())+1e3,sma10:Math.floor(1e3*Math.random())+1e3,sma25:Math.floor(1e3*Math.random())+1e3,sma50:Math.floor(1e3*Math.random())+1e3,rsi:100*Math.random(),macd:{macd:100*Math.random()-50,signal:100*Math.random()-50,histogram:100*Math.random()-50},bollingerBands:{upper:Math.floor(1e3*Math.random())+2e3,middle:Math.floor(1e3*Math.random())+1500,lower:Math.floor(1e3*Math.random())+1e3}}};u(o)}catch(e){console.error("銘柄データの取得エラー:",e),v(e instanceof Error?e.message:"不明なエラーが発生しました")}finally{b(!1)}})()},[r,t]);let M=async()=>{if(o&&d){N(!0),C(null);try{let e=JSON.parse(localStorage.getItem("user_portfolio")||"[]");if(e.findIndex(e=>e.symbol===t)>=0){C("この銘柄は既にポートフォリオに追加されています");return}let s={symbol:t,name:o.name,sector:o.sector,market:o.market,currentPrice:d.currentPrice,addedAt:new Date().toISOString(),targetPrice:d.targetPrice,riskLevel:d.riskLevel,recommendation:d.recommendation,confidence:d.confidence};e.push(s),localStorage.setItem("user_portfolio",JSON.stringify(e)),C("".concat(o.name," (").concat(t,") をポートフォリオに追加しました"))}catch(e){console.error("ポートフォリオ追加エラー:",e),C("ポートフォリオへの追加に失敗しました")}finally{N(!1)}}},A=async()=>{if(o&&d){S(!0),C(null);try{let e=JSON.parse(localStorage.getItem("user_watchlist")||"[]");if(e.findIndex(e=>e.symbol===t)>=0){C("この銘柄は既にウォッチリストに追加されています");return}let s={symbol:t,name:o.name,sector:o.sector,market:o.market,currentPrice:d.currentPrice,addedAt:new Date().toISOString(),targetPrice:d.targetPrice,riskLevel:d.riskLevel,recommendation:d.recommendation,confidence:d.confidence};e.push(s),localStorage.setItem("user_watchlist",JSON.stringify(e)),C("".concat(o.name," (").concat(t,") をウォッチリストに追加しました"))}catch(e){console.error("ウォッチリスト追加エラー:",e),C("ウォッチリストへの追加に失敗しました")}finally{S(!1)}}},_=async()=>{if(o&&d){E(!0),C(null);try{await new Promise(e=>setTimeout(e,2e3));let e=JSON.parse(localStorage.getItem("analysis_history")||"[]"),s={symbol:t,name:o.name,analyzedAt:new Date().toISOString(),currentPrice:d.currentPrice,recommendation:d.recommendation,confidence:d.confidence,riskLevel:d.riskLevel,targetPrice:d.targetPrice,technicalIndicators:d.technicalIndicators,reasons:d.reasons};e.unshift(s),e.length>100&&e.splice(100),localStorage.setItem("analysis_history",JSON.stringify(e)),C("".concat(o.name," (").concat(t,") の詳細分析が完了しました。")+' <a href="/analysis-history" target="_blank" rel="noopener noreferrer" class="underline text-blue-700">分析履歴を見る</a>')}catch(e){console.error("詳細分析エラー:",e),C("詳細分析の実行に失敗しました")}finally{E(!1)}}};return r?(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:(null==o?void 0:o.name)||"銘柄詳細"}),(0,n.jsxs)("p",{className:"text-gray-600",children:["銘柄コード: ",(0,c.LH)(t)]})]}),(0,n.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,n.jsx)(h.Z,{className:"w-6 h-6"})})]}),(0,n.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:m?(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"銘柄データを読み込み中..."})]})}):!y&&o&&d?(0,n.jsx)("div",{className:"p-6",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"lg:col-span-2",children:[(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,n.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"価格情報"]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"現在価格"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\xa5",d.currentPrice.toLocaleString()]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"前日比"}),(0,n.jsxs)("div",{className:"flex items-center ".concat(d.priceChange>=0?"text-red-600":"text-green-600"),children:[d.priceChange>=0?(0,n.jsx)(g.Z,{className:"w-4 h-4 mr-1"}):(0,n.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),(0,n.jsxs)("span",{className:"text-lg font-semibold",children:[d.priceChange>=0?"+":"",d.priceChange.toLocaleString()]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"前日比率"}),(0,n.jsxs)("p",{className:"text-lg font-semibold ".concat(d.priceChangePercent>=0?"text-red-600":"text-green-600"),children:[d.priceChangePercent>=0?"+":"",d.priceChangePercent.toFixed(2),"%"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"出来高"}),(0,n.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:o.volume?o.volume.toLocaleString():"N/A"})]})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,n.jsx)(f.Z,{className:"w-5 h-5 mr-2"}),"投資推奨"]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"推奨アクション"}),(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("BUY"===d.recommendation?"bg-green-100 text-green-800":"SELL"===d.recommendation?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"BUY"===d.recommendation?"買い":"SELL"===d.recommendation?"売り":"ホールド"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"信頼度"}),(0,n.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[(100*d.confidence).toFixed(1),"%"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"リスクレベル"}),(0,n.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("LOW"===d.riskLevel?"bg-green-100 text-green-800":"MEDIUM"===d.riskLevel?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:"LOW"===d.riskLevel?"低":"MEDIUM"===d.riskLevel?"中":"高"})]}),d.targetPrice&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"目標価格"}),(0,n.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["\xa5",d.targetPrice.toLocaleString()]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"推奨理由"}),(0,n.jsx)("ul",{className:"space-y-1",children:d.reasons.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-700 flex items-start",children:[(0,n.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 mr-2 flex-shrink-0"}),e]},t))})]})]})]}),d.technicalIndicators&&(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"テクニカル指標"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"SMA5"}),(0,n.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["\xa5",d.technicalIndicators.sma5.toLocaleString()]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"SMA10"}),(0,n.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["\xa5",d.technicalIndicators.sma10.toLocaleString()]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"SMA25"}),(0,n.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["\xa5",d.technicalIndicators.sma25.toLocaleString()]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"RSI"}),(0,n.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:d.technicalIndicators.rsi.toFixed(1)})]})]})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"基本情報"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"銘柄コード"}),(0,n.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:o.code})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"会社名"}),(0,n.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:o.name})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"セクター"}),(0,n.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:o.sector})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"市場"}),(0,n.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:o.market})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"最終更新"}),(0,n.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:new Date(o.updated_at).toLocaleString("ja-JP")})]})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"クイックアクション"}),R&&(0,n.jsx)("div",{className:"mb-4 p-3 rounded-lg text-sm ".concat(R.includes("失敗")||R.includes("既に")?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-green-100 text-green-800 border border-green-200"),children:(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:R}})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("button",{onClick:()=>M(),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:j,children:j?"追加中...":"ポートフォリオに追加"}),(0,n.jsx)("button",{onClick:()=>A(),className:"w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:w,children:w?"追加中...":"ウォッチリストに追加"}),(0,n.jsx)("button",{onClick:()=>_(),className:"w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:k,children:k?"分析中...":"詳細分析を実行"})]})]})]})]})}):(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,n.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"エラーが発生しました"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:y||"銘柄データが見つかりません"}),(0,n.jsx)("button",{onClick:a,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"閉じる"})]})})})]})}):null}var y=s(71488);function v(e){let{value:t,onChange:r,onSearch:a,placeholder:o="銘柄名またはコードを入力...",className:c="",disabled:i=!1}=e,[d,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(t||""),[x,g]=(0,l.useState)(!1),[p,f]=(0,l.useState)(-1),b=(0,l.useRef)(null),v=(0,l.useRef)(null),j=(0,l.useRef)(null),{suggestions:N,isLoading:w,error:S,showSuggestions:k,handleQueryChange:E,clearSuggestions:R,hideSuggestions:C}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{debounceMs:t=300,minQueryLength:r=1,maxSuggestions:a=10}=e,[n,o]=(0,l.useState)([]),[c,i]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!1),x=(0,l.useRef)(null),g=(0,l.useRef)(null),p=(0,l.useCallback)(async e=>{if(e.length<r){o([]),h(!1);return}g.current&&g.current.abort(),g.current=new AbortController,i(!0),u(null);try{let{resolveStaticPath:t}=await s.e(3268).then(s.bind(s,73268)),r=await fetch(t("/data/listed_index.json"),{signal:g.current.signal});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let n=await r.json(),l=function(e,t,s){if(!t||t.length<1)return[];let r=e=>e.toLowerCase().trim().replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)).replace(/[Ａ-Ｚａ-ｚ]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)).replace(/[（）]/g,e=>"（"===e?"(":")").replace(/[　]/g," "),a=r(t),n=e.filter(e=>{let t=r(e.code),s=r(e.name),n=t.startsWith(a),l=s.startsWith(a);return n||l}).map(e=>({code:e.code,name:e.name,sector:e.sector,market:e.market,displayText:"".concat(e.name," (").concat(e.code,")")})).slice(0,s),l=e.filter(e=>{let t=r(e.code),s=r(e.name),n=t.includes(a),l=s.includes(a),o=t.startsWith(a),c=s.startsWith(a);return(n||l)&&!(o||c)}).map(e=>({code:e.code,name:e.name,sector:e.sector,market:e.market,displayText:"".concat(e.name," (").concat(e.code,")")})),o=n.length>0?n:[...l];return o.sort((e,t)=>{let s=r(e.code).startsWith(a),n=r(t.code).startsWith(a),l=r(e.name).startsWith(a),o=r(t.name).startsWith(a);return s&&!n?-1:!s&&n?1:!l||o||s||n?l||!o||s||n?e.name.localeCompare(t.name,"ja"):1:-1}),o.slice(0,s)}(n.stocks||[],e,a);o(l),h(!0)}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;console.error("Suggestions fetch error:",e),u("サジェッションの取得に失敗しました"),o([]),h(!1)}finally{i(!1)}},[r,a]),f=(0,l.useCallback)(e=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{p(e)},t)},[p,t]),b=(0,l.useCallback)(()=>{o([]),h(!1),u(null),g.current&&g.current.abort()},[]),y=(0,l.useCallback)(()=>{h(!1)},[]);return(0,l.useEffect)(()=>()=>{x.current&&clearTimeout(x.current),g.current&&g.current.abort()},[]),{suggestions:n,isLoading:c,error:d,showSuggestions:m,handleQueryChange:f,clearSuggestions:b,hideSuggestions:y,fetchSuggestions:p}}({debounceMs:300,minQueryLength:1,maxSuggestions:10}),M=e=>{var t;r(e.displayText),R(),f(-1),null===(t=b.current)||void 0===t||t.focus(),a&&a(e.displayText)},A=e=>{M(e)};return(0,l.useEffect)(()=>{if(p>=0&&j.current){let e=j.current.children[p];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[p]),(0,l.useEffect)(()=>{let e=e=>{v.current&&!v.current.contains(e.target)&&b.current&&!b.current.contains(e.target)&&(C(),g(!1),f(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[C]),(0,l.useEffect)(()=>{h(t||"")},[t]),(0,n.jsxs)("div",{className:c?"".concat(c," relative"):"relative",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(y.pn,{delayDuration:150,children:(0,n.jsxs)(y.u,{children:[(0,n.jsx)(y.aJ,{asChild:!0,children:(0,n.jsx)("input",{ref:b,type:"text",value:m,onChange:e=>{let t=e.target.value;h(t),r(t),E(t),f(-1),g(!0)},onFocus:()=>{u(!0),g(!0)},onBlur:()=>{setTimeout(()=>{u(!1),C(),g(!1)},150)},onKeyDown:e=>{if(!k||0===N.length){"Enter"===e.key&&a&&(e.preventDefault(),a(t));return}switch(e.key){case"ArrowDown":e.preventDefault(),f(e=>e<N.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),f(e=>e>0?e-1:N.length-1);break;case"Enter":e.preventDefault(),p>=0&&p<N.length?M(N[p]):a&&a(t);break;case"Escape":var s;e.preventDefault(),C(),g(!1),f(-1),null===(s=b.current)||void 0===s||s.blur()}},placeholder:o,disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",autoComplete:"off",autoFocus:!0})}),(0,n.jsx)(y._v,{side:"bottom",children:"銘柄名または証券コードを入力するとサジェストが表示されます。Enterで検索、↑↓で候補を選択できます。"})]})}),t&&!i&&(0,n.jsx)("button",{type:"button",onClick:()=>{var e;r(""),R(),f(-1),null===(e=b.current)||void 0===e||e.focus()},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":"検索をクリア",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),x&&k&&N.length>0&&(0,n.jsx)("div",{ref:v,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:(0,n.jsx)("ul",{ref:j,className:"py-1",children:N.map((e,t)=>(0,n.jsx)("li",{className:"px-3 py-2 cursor-pointer ".concat(t===p?"bg-blue-100 text-blue-900":"hover:bg-gray-100 text-gray-900"),onClick:()=>A(e),children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"font-medium ".concat(t===p?"bg-blue-100":""),children:e.displayText}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:[e.sector," • ",e.market]})]})},"".concat(e.code,"-").concat(t)))})}),w&&(0,n.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:(0,n.jsxs)("div",{className:"px-3 py-2 text-center text-gray-500",children:[(0,n.jsx)("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}),"検索中..."]})}),S&&(0,n.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-red-50 border border-red-300 rounded-md shadow-lg",children:(0,n.jsx)("div",{className:"px-3 py-2 text-red-600 text-sm",children:"string"==typeof S?S:"エラーが発生しました"})})]})}var j=s(34338),N=s(93285);let w="force-dynamic";function S(){let[e,t]=(0,l.useState)(null),[i,d]=(0,l.useState)(!0),[u,h]=(0,l.useState)(null),[x,g]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[w,S]=(0,l.useState)("code"),[k,E]=(0,l.useState)("asc"),[R,C]=(0,l.useState)(1),[M]=(0,l.useState)(200),[A,_]=(0,l.useState)(!1),[T,I]=(0,l.useState)({min:"",max:""}),[D,L]=(0,l.useState)({min:"",max:""}),[P,O]=(0,l.useState)(null),[q,F]=(0,l.useState)(!1),[U,Q]=(0,l.useState)(null),[H,B]=(0,l.useState)(!1),[J,W]=(0,l.useState)(!1),[V,Z]=(0,l.useState)(!1),z=(0,o.useSearchParams)(),$=(0,o.useRouter)(),G=(0,o.usePathname)(),K=(0,l.useCallback)(async()=>{try{var e;d(!0),h(null);let{resolveStaticPath:n}=await s.e(3268).then(s.bind(s,73268)),l=await fetch(n("/data/listed_index.json"));if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));let o=await l.json();(null==o?void 0:null===(e=o.stocks)||void 0===e?void 0:e.length)&&(o.stocks=o.stocks.map(e=>(0,a._)((0,r._)({},e),{code:(0,c.G$)(e.code)})));try{if(!U)throw Error("adapter_not_ready");let e=await U.getAllSymbols();if(e.length>0){let s=o.stocks.map(t=>{let s=e.find(e=>e.code===t.code);return(0,a._)((0,r._)({},t),{name:(null==s?void 0:s.name)||t.name,sector:(null==s?void 0:s.sector)||t.sector})});t((0,a._)((0,r._)({},o),{stocks:s,metadata:(0,a._)((0,r._)({},o.metadata),{last_updated:new Date().toISOString()})}))}else t(o)}catch(e){console.warn("J-Quants API取得に失敗、キャッシュデータを使用:",e),t(o)}}catch(e){console.error("Error fetching listed data:",e),h("データの取得に失敗しました")}finally{d(!1)}},[U]);(0,l.useEffect)(()=>{Q(new m)},[]),(0,l.useEffect)(()=>{K()},[K]),(0,l.useEffect)(()=>{if(!z)return;let e=z.get("q")||"",t=z.get("sector")||"",s=z.get("market")||"",r=z.get("sortBy")||"code",a=z.get("sortOrder")||"asc",n=parseInt(z.get("page")||"1",10),l="1"===z.get("up"),o="1"===z.get("down"),c="1"===z.get("hv");g(e),f(t),N(s),S(r),E(a),C(isNaN(n)?1:n),B(l),W(o),Z(c);let i=z.get("pmin"),d=z.get("pmax"),u=z.get("vmin"),m=z.get("vmax");I({min:i||"",max:d||""}),L({min:u||"",max:m||""})},[z]),(0,l.useEffect)(()=>{if(!$||!G)return;let e=new URLSearchParams;x&&e.set("q",x),p&&e.set("sector",p),y&&e.set("market",y),w&&e.set("sortBy",w),k&&e.set("sortOrder",k),R>1&&e.set("page",String(R)),T.min&&e.set("pmin",T.min),T.max&&e.set("pmax",T.max),D.min&&e.set("vmin",D.min),D.max&&e.set("vmax",D.max),H&&e.set("up","1"),J&&e.set("down","1"),V&&e.set("hv","1");let t=e.toString();$.replace(t?"".concat(G,"?").concat(t):G)},[x,p,y,w,k,R,T,D,H,J,V,$,G]);let Y=(0,l.useMemo)(()=>e?Array.from(new Set(e.stocks.map(e=>e.sector))).sort():[],[e]),X=(0,l.useMemo)(()=>e?Array.from(new Set(e.stocks.map(e=>e.market))).sort():[],[e]),ee=(0,l.useCallback)(e=>{w===e?E("asc"===k?"desc":"asc"):(S(e),E("asc")),C(1)},[w,k]),et=(0,l.useMemo)(()=>{if(!e)return[];x.toLowerCase();let t=T.min?parseFloat(T.min):null,s=T.max?parseFloat(T.max):null,r=D.min?parseFloat(D.min):null,a=D.max?parseFloat(D.max):null,n=e=>e.toLowerCase().trim().replace(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)).replace(/[Ａ-Ｚａ-ｚ]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248)).replace(/[（）]/g,e=>"（"===e?"(":")").replace(/[　]/g," "),l=n(x),o=e.stocks.filter(e=>{var o,i;let d=n(e.name),u=n((0,c.LH)(e.code)),m=d.includes(l)||u.includes(l),h=!p||e.sector===p,x=!y||e.market===y,g=!t||!s||e.currentPrice&&e.currentPrice>=t&&e.currentPrice<=s,f=!r||!a||e.volume&&e.volume>=r&&e.volume<=a,b=!H&&!J||H&&(null!==(o=e.change)&&void 0!==o?o:0)>=0||J&&(null!==(i=e.change)&&void 0!==i?i:0)<0;return m&&h&&x&&g&&f&&b});if(V){let e=o.map(e=>e.volume||0).sort((e,t)=>e-t),t=Math.floor(.75*e.length),s=e[t]||0;o=o.filter(e=>(e.volume||0)>=s)}return o.sort((e,t)=>{let s=e[w],r=t[w];return(("currentPrice"===w||"change"===w||"changePercent"===w||"volume"===w)&&(s=s||0,r=r||0),"string"==typeof s&&(s=s.toLowerCase(),r=r.toLowerCase()),s<r)?"asc"===k?-1:1:s>r?"asc"===k?1:-1:0}),o},[e,x,p,y,w,k,T,D,H,J,V]);(0,l.useEffect)(()=>{C(1)},[x,p,y,T,D]);let es=(0,l.useMemo)(()=>{let e=(R-1)*M;return et.slice(e,e+M)},[et,R,M]),er=Math.ceil(et.length/M),ea=(0,l.useCallback)(e=>{C(Math.max(1,Math.min(e,er)))},[er]),en=(0,l.useCallback)(()=>ea(1),[ea]),el=(0,l.useCallback)(()=>ea(er),[ea,er]),eo=(0,l.useCallback)(()=>ea(R-1),[ea,R]),ec=(0,l.useCallback)(()=>ea(R+1),[ea,R]);return i?(0,n.jsx)("div",{className:"container mx-auto p-4",children:(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-lg",children:"上場銘柄データを読み込み中..."})]})})}):u?(0,n.jsx)("div",{className:"container mx-auto p-4",children:(0,n.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-2",children:"エラーが発生しました"}),(0,n.jsx)("p",{children:u}),(0,n.jsx)("button",{onClick:K,className:"mt-4 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"再試行"})]})}):e?(0,n.jsxs)("div",{className:"container mx-auto p-4",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"jQuants 上場銘柄データ"}),(0,n.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"データ情報"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"総銘柄数:"})," ",e.metadata.total_stocks]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"最終更新:"})," ",new Date(e.metadata.last_updated).toLocaleString("ja-JP")]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"データタイプ:"})," ",e.metadata.data_type]})]})]}),(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"検索・フィルター"}),(0,n.jsx)("button",{onClick:()=>_(!A),className:"text-blue-600 hover:text-blue-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded","aria-expanded":A,"aria-controls":"advanced-filters",children:A?"詳細フィルターを閉じる":"詳細フィルターを開く"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索 (銘柄名・コード)"}),(0,n.jsx)(v,{value:x,onChange:g,placeholder:"銘柄名またはコードを入力...",className:"w-full"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"セクター"}),(0,n.jsxs)("select",{value:p,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"",children:"すべてのセクター"}),Y.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"市場"}),(0,n.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"",children:"すべての市場"}),X.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})]}),A&&(0,n.jsx)("div",{id:"advanced-filters",className:"mt-4 pt-4 border-t border-gray-200",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"価格範囲 (円)"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"number",value:T.min,onChange:e=>I(t=>(0,a._)((0,r._)({},t),{min:e.target.value})),placeholder:"最小価格",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("input",{type:"number",value:T.max,onChange:e=>I(t=>(0,a._)((0,r._)({},t),{max:e.target.value})),placeholder:"最大価格",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"出来高範囲"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"number",value:D.min,onChange:e=>L(t=>(0,a._)((0,r._)({},t),{min:e.target.value})),placeholder:"最小出来高",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("input",{type:"number",value:D.max,onChange:e=>L(t=>(0,a._)((0,r._)({},t),{max:e.target.value})),placeholder:"最大出来高",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})})]}),(0,n.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)("button",{onClick:()=>{B(e=>!e),!H&&J&&W(!1),C(1)},className:"px-3 py-1 text-sm rounded border ".concat(H?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700"),children:"上昇"}),(0,n.jsx)("button",{onClick:()=>{W(e=>!e),!J&&H&&B(!1),C(1)},className:"px-3 py-1 text-sm rounded border ".concat(J?"bg-red-50 border-red-500 text-red-700":"bg-white border-gray-300 text-gray-700"),children:"下落"}),(0,n.jsx)("button",{onClick:()=>{Z(e=>!e),C(1)},className:"px-3 py-1 text-sm rounded border ".concat(V?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700"),children:"高出来高"}),["プライム","スタンダード","グロース"].map(e=>(0,n.jsx)("button",{onClick:()=>{N(t=>t===e?"":e),C(1)},className:"px-3 py-1 text-sm rounded border ".concat(y===e?"bg-purple-50 border-purple-500 text-purple-700":"bg-white border-gray-300 text-gray-700"),children:e},e))]})}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,n.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[(0,n.jsxs)("h2",{className:"text-xl font-semibold",children:["銘柄一覧 (",et.length,"件)"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-sm text-gray-500",children:[R," / ",er," ページ"]}),(0,n.jsx)("button",{onClick:()=>{let e=et.map(e=>{var t,s,r,a;return{code:e.code,name:e.name,sector:e.sector,market:e.market,currentPrice:null!==(t=e.currentPrice)&&void 0!==t?t:"",change:null!==(s=e.change)&&void 0!==s?s:"",changePercent:null!==(r=e.changePercent)&&void 0!==r?r:"",volume:null!==(a=e.volume)&&void 0!==a?a:"",updated_at:e.updated_at}}),t=Object.keys(e[0]||{code:"",name:""}),s=new Blob([[t.join(","),...e.map(e=>t.map(t=>"".concat(e[t]).replace(/"/g,'""')).map(e=>/[",\n]/.test(e)?'"'.concat(e,'"'):e).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download="listed_stocks_".concat(new Date().toISOString().slice(0,10),".csv"),a.click(),URL.revokeObjectURL(r)},className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50",children:"CSVエクスポート"}),(0,n.jsx)("button",{onClick:K,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"更新"})]})]}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>ee("code"),tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),ee("code"))},children:["銘柄コード","code"===w&&(0,n.jsx)("span",{className:"ml-1","aria-hidden":"true",children:"asc"===k?"↑":"↓"})]}),(0,n.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>ee("name"),tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),ee("name"))},children:["会社名","name"===w&&(0,n.jsx)("span",{className:"ml-1","aria-hidden":"true",children:"asc"===k?"↑":"↓"})]}),(0,n.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>ee("sector"),tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),ee("sector"))},children:["セクター","sector"===w&&(0,n.jsx)("span",{className:"ml-1","aria-hidden":"true",children:"asc"===k?"↑":"↓"})]}),(0,n.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>ee("market"),tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),ee("market"))},children:["市場","market"===w&&(0,n.jsx)("span",{className:"ml-1","aria-hidden":"true",children:"asc"===k?"↑":"↓"})]}),(0,n.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>ee("changePercent"),tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),ee("changePercent"))},children:["騰落率","changePercent"===w&&(0,n.jsx)("span",{className:"ml-1","aria-hidden":"true",children:"asc"===k?"↑":"↓"})]}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"現在価格"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"出来高"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"更新日時"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"チャート"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"みんかぶ"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"アクション"})]})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:es.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,c.LH)(e.code)}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,n.jsx)("div",{className:"max-w-xs truncate",title:e.name,children:e.name})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,n.jsx)("div",{className:"max-w-xs truncate",title:e.sector,children:e.sector})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("プライム"===e.market?"bg-green-100 text-green-800":"スタンダード"===e.market?"bg-blue-100 text-blue-800":"グロース"===e.market?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.market})}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.currentPrice?"\xa5".concat(e.currentPrice.toLocaleString()):(0,n.jsx)("span",{className:"text-gray-400 italic",children:"データ取得中..."}),e.change&&e.changePercent&&(0,n.jsxs)("div",{className:"text-xs ".concat(e.change>=0?"text-red-600":"text-green-600"),children:[e.change>=0?"+":"",e.change.toLocaleString()," (",e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%)"]})]}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.volume?e.volume.toLocaleString():(0,n.jsx)("span",{className:"text-gray-400 italic",children:"データ取得中..."})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.updated_at).toLocaleString("ja-JP")}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,n.jsx)("button",{onClick:()=>{window.location.href="/analysis?code=".concat(e.code)},className:"text-green-600 hover:text-green-800 font-medium focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 rounded px-2 py-1","aria-label":"".concat(e.name," (").concat((0,c.LH)(e.code),") のチャートを表示"),children:"チャート"})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,n.jsx)("button",{onClick:()=>(0,j.X6)(e.code),className:"text-orange-600 hover:text-orange-800 font-medium focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 rounded px-2 py-1","aria-label":"".concat(e.name," (").concat((0,c.LH)(e.code),") のみんかぶページを開く"),children:"みんかぶ"})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>{O(e.code),F(!0)},className:"text-blue-600 hover:text-blue-800 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2 py-1","aria-label":"".concat(e.name," (").concat((0,c.LH)(e.code),") の詳細を表示"),children:"詳細"}),(0,n.jsx)("button",{onClick:()=>{try{let t=JSON.parse(localStorage.getItem("user_watchlist")||"[]"),s=(0,c.G$)(e.code);t.some(e=>e.symbol===s)||(t.push({symbol:s,name:e.name,sector:e.sector,market:e.market,currentPrice:e.currentPrice||0,change:e.change||0,changePercent:e.changePercent||0,addedAt:new Date().toISOString()}),localStorage.setItem("user_watchlist",JSON.stringify(t)))}catch(e){console.error("ウォッチリスト追加失敗",e)}},className:"text-purple-600 hover:text-purple-800 font-medium focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 rounded px-2 py-1",children:"ウォッチ追加"})]})})]},e.code))})]})}),er>1&&(0,n.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-between",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsxs)("span",{className:"text-sm text-gray-700",children:[(R-1)*M+1," - ",Math.min(R*M,et.length)," / ",et.length," 件"]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("button",{onClick:en,disabled:1===R,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"最初のページへ",children:"最初"}),(0,n.jsx)("button",{onClick:eo,disabled:1===R,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"前のページへ",children:"前へ"}),(0,n.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-500 text-white rounded","aria-label":"現在のページ: ".concat(R),children:R}),(0,n.jsx)("button",{onClick:ec,disabled:R===er,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"次のページへ",children:"次へ"}),(0,n.jsx)("button",{onClick:el,disabled:R===er,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"最後のページへ",children:"最後"})]})]})]}),P&&(0,n.jsx)(b,{symbol:P,isOpen:q,onClose:()=>{F(!1),O(null)}})]}):(0,n.jsx)("div",{className:"container mx-auto p-4",children:(0,n.jsxs)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-2",children:"データが見つかりません"}),(0,n.jsx)("p",{children:"上場銘柄データが利用できません。"})]})})}function k(){return(0,n.jsx)(N.ZP,{onError:(e,t)=>{console.error("listed-data page error:",e,t)},children:(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)("div",{className:"container mx-auto p-4",children:(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"上場銘柄一覧を読み込み中..."})]})})}),children:(0,n.jsx)(S,{})})})}},93285:function(e,t,s){"use strict";var r=s(57437),a=s(2265),n=s(76865),l=s(82431),o=s(14938),c=s(47260);class i extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){var s,r;this.setState({error:e,errorInfo:t}),console.error("ErrorBoundary caught an error:",e,t),null===(s=(r=this.props).onError)||void 0===s||s.call(r,e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"エラーが発生しました"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"申し訳ございません。予期しないエラーが発生しました。"}),!1,(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"再試行"]}),(0,r.jsxs)("button",{onClick:this.handleReload,className:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"ページを再読み込み"]}),(0,r.jsxs)("button",{onClick:this.handleGoHome,className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"ホームに戻る"]})]}),(0,r.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"問題が解決しない場合は、サポートまでお問い合わせください。"}),(0,r.jsxs)("button",{onClick:()=>{var e,t,s;console.log("Error Report:",{error:null===(e=this.state.error)||void 0===e?void 0:e.toString(),stack:null===(t=this.state.error)||void 0===t?void 0:t.stack,componentStack:null===(s=this.state.errorInfo)||void 0===s?void 0:s.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}),alert("エラーレポートがコンソールに出力されました。")},className:"mt-2 text-xs text-blue-600 hover:text-blue-800 flex items-center justify-center",children:[(0,r.jsx)(c.Z,{className:"h-3 w-3 mr-1"}),"エラーレポートを生成"]})]})]})})}):this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleReload=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null,errorInfo:null}}}t.ZP=i},71488:function(e,t,s){"use strict";s.d(t,{_v:function(){return m},aJ:function(){return u},pn:function(){return i},u:function(){return d}});var r=s(85583),a=s(46796),n=s(57437),l=s(2265),o=s(61312),c=s(93448);let i=o.zt,d=o.fC,u=o.xz,m=l.forwardRef((e,t)=>{var{className:s,sideOffset:l=4}=e,i=(0,a._)(e,["className","sideOffset"]);return(0,n.jsx)(o.VY,(0,r._)({ref:t,sideOffset:l,className:(0,c.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s)},i))});m.displayName=o.VY.displayName},34338:function(e,t,s){"use strict";s.d(t,{X6:function(){return a}});var r=s(53834);function a(e){try{let t=function(e){let t=(0,r.To)(e);if(!t)throw Error("無効な銘柄コードです");return"https://minkabu.jp/stock/".concat(t)}(e);window.open(t,"_blank","noopener,noreferrer")}catch(e){console.error("みんかぶリンクの生成に失敗しました:",e),alert("みんかぶリンクを開けませんでした。銘柄コードを確認してください。")}}},53834:function(e,t,s){"use strict";function r(e){if(!e)return"";let t=e.trim();return/^[A-Za-z]\d{4}$/.test(t)?t.toUpperCase():/^\d+$/.test(t)&&5===t.length&&t.startsWith("0")?t.substring(1):t}function a(e){if(!e)return"";let t=e.trim();return/^[A-Za-z]\d{4}$/.test(t)?t.toUpperCase():/^\d{5}$/.test(t)&&t.startsWith("0")?t.substring(1):(/^\d{4}$/.test(t),t)}function n(e){if(!e)return null;let t=r(e);return/^\d{4}$/.test(t)?t:null}s.d(t,{G$:function(){return r},LH:function(){return a},To:function(){return n}})},93448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[1216,1744],function(){return e(e.s=80080)}),_N_E=e.O()}]);