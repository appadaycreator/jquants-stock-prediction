"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2304],{41671:function(e,t,s){s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91723:function(e,t,s){s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},50091:function(e,t,s){s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},33276:function(e,t,s){s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},82431:function(e,t,s){s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},98728:function(e,t,s){s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},88906:function(e,t,s){s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},76865:function(e,t,s){s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},75395:function(e,t,s){s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},63889:function(e,t,s){s.d(t,{S:function(){return u}});var r=s(57437),n=s(2265),a=s(98728),o=s(82431),i=s(76865),c=s(75395),l=s(50091);class u extends n.Component{static getDerivedStateFromError(e){let t=u.categorizeError(e);return{hasError:!0,error:e,errorType:t}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("ErrorBoundary caught an error:",e,t),this.props.onError&&this.props.onError(e,t)}componentWillUnmount(){this.retryTimeoutId&&clearTimeout(this.retryTimeoutId)}static categorizeError(e){let t=e.message.toLowerCase();return t.includes("401")||t.includes("403")||t.includes("unauthorized")?"AUTH_ERROR":t.includes("429")||t.includes("rate limit")?"RATE_LIMIT":t.includes("5")||t.includes("server error")?"SERVER_ERROR":t.includes("network")||t.includes("fetch")||t.includes("timeout")?"NETWORK_ERROR":t.includes("schema")||t.includes("validation")?"SCHEMA_ERROR":"UNKNOWN_ERROR"}getErrorDetails(){let{errorType:e}=this.state;switch(e){case"AUTH_ERROR":return{type:"AUTH_ERROR",message:"認証に失敗しました",userMessage:"ログイン情報が無効または期限切れです",action:"設定画面で認証情報を確認してください",icon:(0,r.jsx)(a.Z,{className:"w-8 h-8 text-red-500"}),canRetry:!0,canUseSample:!0,canGoToSettings:!0};case"RATE_LIMIT":return{type:"RATE_LIMIT",message:"API呼び出し制限に達しました",userMessage:"しばらく待ってから再試行してください",action:"数分後に自動的に再試行します",icon:(0,r.jsx)(o.Z,{className:"w-8 h-8 text-yellow-500"}),canRetry:!0,canUseSample:!0,canGoToSettings:!1};case"SERVER_ERROR":return{type:"SERVER_ERROR",message:"サーバーエラーが発生しました",userMessage:"サーバー側で問題が発生しています",action:"しばらく待ってから再試行してください",icon:(0,r.jsx)(i.Z,{className:"w-8 h-8 text-red-500"}),canRetry:!0,canUseSample:!0,canGoToSettings:!1};case"NETWORK_ERROR":return{type:"NETWORK_ERROR",message:"ネットワーク接続エラー",userMessage:"インターネット接続を確認してください",action:"接続が回復すると自動的に再試行します",icon:(0,r.jsx)(c.Z,{className:"w-8 h-8 text-orange-500"}),canRetry:!0,canUseSample:!0,canGoToSettings:!1};case"SCHEMA_ERROR":return{type:"SCHEMA_ERROR",message:"データ形式エラー",userMessage:"受信したデータの形式が正しくありません",action:"サンプルデータに切り替えます",icon:(0,r.jsx)(l.Z,{className:"w-8 h-8 text-blue-500"}),canRetry:!1,canUseSample:!0,canGoToSettings:!1};default:return{type:"UNKNOWN_ERROR",message:"予期しないエラーが発生しました",userMessage:"システムで予期しない問題が発生しました",action:"ページを再読み込みしてください",icon:(0,r.jsx)(i.Z,{className:"w-8 h-8 text-gray-500"}),canRetry:!0,canUseSample:!0,canGoToSettings:!1}}}render(){if(this.state.hasError){let e=this.getErrorDetails(),{retryCount:t,lastRetryTime:s}=this.state,{maxRetries:n=3}=this.props;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[e.icon,(0,r.jsx)("h2",{className:"mt-4 text-xl font-semibold text-gray-900",children:e.message}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:e.userMessage}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.action})]}),(0,r.jsxs)("div",{className:"mt-6 space-y-3",children:[e.canRetry&&t<n&&(0,r.jsxs)("button",{onClick:this.handleRetry,className:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"再試行 (",t+1,"/",n,")"]}),e.canUseSample&&(0,r.jsxs)("button",{onClick:this.handleUseSample,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),"サンプルデータを使用"]}),e.canGoToSettings&&(0,r.jsxs)("button",{onClick:this.handleGoToSettings,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,r.jsx)(a.Z,{className:"w-4 h-4 mr-2"}),"設定画面へ"]}),(0,r.jsx)("button",{onClick:this.handleReload,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"ページを再読み込み"})]}),t>0&&(0,r.jsxs)("div",{className:"mt-4 text-xs text-gray-500 text-center",children:["再試行回数: ",t,"/",n,s&&(0,r.jsxs)("div",{children:["最終再試行: ",new Date(s).toLocaleTimeString()]})]}),!1]})})}return this.props.children}constructor(e){super(e),this.retryTimeoutId=null,this.handleRetry=()=>{let{maxRetries:e=3,retryDelay:t=1e3}=this.props,{retryCount:s}=this.state;if(s>=e){console.warn("最大再試行回数に達しました");return}this.retryTimeoutId=setTimeout(()=>{this.setState(e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1,lastRetryTime:Date.now()}))},t*Math.pow(2,s))},this.handleUseSample=()=>{console.log("サンプルデータに切り替え"),this.setState({hasError:!1,error:null,errorInfo:null})},this.handleGoToSettings=()=>{window.location.href="/settings/auth"},this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null,errorType:"UNKNOWN_ERROR",retryCount:0,lastRetryTime:null}}}}}]);