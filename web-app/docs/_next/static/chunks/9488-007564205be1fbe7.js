"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9488],{39488:function(e,t,n){n.d(t,{JR:function(){return s},analyzeMultipleStocks:function(){return o},getPopularSymbols:function(){return c}});var a=n(85583);function r(e,t){if(e.length<t)return e[e.length-1]||0;let n=e.slice(-t);return n.reduce((e,t)=>e+t,0)/n.length}async function l(e,t){try{var l,o;if(!e||""===e.trim())return null;let c=new Date("2025-07-10"),i=new Date,s=i>c?c:i,h=s.toISOString().split("T")[0],u=new Date(s.getTime()-5184e6).toISOString().split("T")[0],m=function(e,t,n){let a=[],r=new Date(t),l=new Date(n),o={7203:2500,6758:12e3,9984:6e3,6861:5e4,4063:15e3}[e]||1e3,c={7203:"トヨタ自動車",6758:"ソニーグループ",9984:"ソフトバンクグループ",6861:"キーエンス",4063:"信越化学工業"}[e]||e,i=o;for(let t=new Date(r);t<=l;t.setDate(t.getDate()+1)){if(0===t.getDay()||6===t.getDay())continue;let n=(Math.random()-.5)*.1,r=i*n,l=Math.floor(1e6*Math.random())+1e5,s=(i=Math.max(i+r,.5*o))*l*.1;a.push({symbol:e,name:c,price:i,change:r,changePercent:100*n,volume:l,marketCap:s,lastUpdated:t.toISOString(),close:i,date:t.toISOString().split("T")[0]})}return a}(e,u,h);if(0===m.length)return console.warn("株価データが取得できませんでした: ".concat(e)),null;let d=t||e;if(!d)try{let{resolveStaticPath:t}=await n.e(3268).then(n.bind(n,73268)),a=await fetch(t("/data/listed_index.json"));if(a.ok){let t=await a.json(),n=null===(o=t.stocks)||void 0===o?void 0:o.find(t=>t.code===e);d=(null==n?void 0:n.name)||e}else{let t=[{code:"7203",name:"トヨタ自動車"},{code:"6758",name:"ソニーグループ"},{code:"9984",name:"ソフトバンクグループ"},{code:"6861",name:"キーエンス"},{code:"4063",name:"信越化学工業"},{code:"A1234",name:"新形式銘柄例1"},{code:"B0001",name:"新形式銘柄例2"}].find(t=>t.code===e);d=(null==t?void 0:t.name)||e}}catch(t){console.warn("銘柄名の取得に失敗しました:",t),d=e}let g=function(e){let t=e.map(e=>e.close);return{sma5:r(t,5),sma10:r(t,10),sma25:r(t,25),sma50:r(t,50),rsi:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;if(e.length<t+1)return 50;let n=[];for(let t=1;t<e.length;t++)n.push(e[t]-e[t-1]);let a=n.slice(-t).filter(e=>e>0),r=n.slice(-t).filter(e=>e<0).map(Math.abs);if(0===r.length)return 100;if(0===a.length)return 0;let l=a.reduce((e,t)=>e+t,0)/t,o=r.reduce((e,t)=>e+t,0)/t;return 0===o?100:100-100/(1+l/o)}(t),macd:function(e){if(e.length<26)return{macd:0,signal:0,histogram:0};let t=(e,t)=>{let n=[e[0]],a=2/(t+1);for(let t=1;t<e.length;t++)n.push(e[t]*a+n[t-1]*(1-a));return n},n=t(e,12),a=t(e,26),r=n[n.length-1]-a[a.length-1],l=[];for(let t=26;t<e.length;t++)l.push(n[t]-a[t]);let o=t(l.slice(-9),9),c=o.length>0?o[o.length-1]:0;return{macd:r,signal:c,histogram:r-c}}(t),bollinger:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(e.length<t){let t=e[e.length-1]||0;return{upper:t,middle:t,lower:t}}let n=e.slice(-t),a=n.reduce((e,t)=>e+t,0)/n.length,r=Math.sqrt(n.reduce((e,t)=>e+Math.pow(t-a,2),0)/n.length);return{upper:a+2*r,middle:a,lower:a-2*r}}(t)}}(m),p=function(e,t){var n,a;let r,l,o,c;let i=[],s=0,h=0,u=0,m=(null===(n=e[e.length-1])||void 0===n?void 0:n.close)||0,d=(null===(a=e[e.length-2])||void 0===a?void 0:a.close)||m;t.sma5>t.sma10&&t.sma10>t.sma25?(s+=2,i.push("短期上昇トレンド（SMA5 > SMA10 > SMA25）")):t.sma5<t.sma10&&t.sma10<t.sma25&&(h+=2,i.push("短期下降トレンド（SMA5 < SMA10 < SMA25）")),m>t.sma50?(s+=1,i.push("長期上昇トレンド（価格 > SMA50）")):(h+=1,i.push("長期下降トレンド（価格 < SMA50）")),t.rsi<30?(s+=2,i.push("RSI過売り状態（".concat(t.rsi.toFixed(1),"）"))):t.rsi>70?(h+=2,i.push("RSI過買い状態（".concat(t.rsi.toFixed(1),"）")),u+=1):t.rsi>=40&&t.rsi<=60&&i.push("RSI中立圏（".concat(t.rsi.toFixed(1),"）")),t.macd.macd>t.macd.signal&&t.macd.histogram>0?(s+=1,i.push("MACD買いシグナル")):t.macd.macd<t.macd.signal&&t.macd.histogram<0&&(h+=1,i.push("MACD売りシグナル")),m<t.bollinger.lower?(s+=1,i.push("ボリンジャーバンド下限接触（反発期待）")):m>t.bollinger.upper&&(h+=1,i.push("ボリンジャーバンド上限接触（過熱警戒）"),u+=1),Math.abs((m-d)/d)>.05&&(u+=1,i.push("高ボラティリティ（急激な価格変動）"));let g=s-h;return g>=3?(r="STRONG_BUY",l=Math.min(.9,.6+(g-3)*.1)):g>=1?(r="BUY",l=.6+(g-1)*.1):g<=-3?(r="STRONG_SELL",l=Math.min(.9,.6+.1*Math.abs(g+3))):g<=-1?(r="SELL",l=.6+.1*Math.abs(g+1)):(r="HOLD",l=.5),l=Math.max(.3,l-.1*u),o=u>=2?"HIGH":u>=1?"MEDIUM":"LOW","STRONG_BUY"===r||"BUY"===r?c=t.sma5>t.sma50?1.05*m:t.sma25:("STRONG_SELL"===r||"SELL"===r)&&(c=.95*m),{recommendation:r,confidence:l,reasons:i,riskLevel:o,targetPrice:c}}(m,g),f=m[m.length-1].close,S=(null===(l=m[m.length-2])||void 0===l?void 0:l.close)||f,w=f-S;return(0,a._)({symbol:e,name:d,currentPrice:f,priceChange:w,priceChangePercent:w/S*100,indicators:g},p)}catch(t){return console.error("株価分析エラー (".concat(e,"):"),t),null}}async function o(e){let t=[],n=[{code:"7203",name:"トヨタ自動車",sector:"自動車"},{code:"6758",name:"ソニーグループ",sector:"エンターテインメント"},{code:"9984",name:"ソフトバンクグループ",sector:"通信"},{code:"6861",name:"キーエンス",sector:"電子部品"},{code:"4063",name:"信越化学工業",sector:"化学"}],a=[];for(let t=0;t<e.length;t+=5)a.push(e.slice(t,t+5));for(let e of a){let a=e.map(async e=>{let t=n.find(t=>t.code===e);return l(e,null==t?void 0:t.name)}),r=await Promise.all(a);t.push(...r.filter(e=>null!==e))}return t}async function c(){try{let{getAllSymbols:e}=await n.e(8381).then(n.bind(n,48381)),t=await e();if(0===t.length)return console.warn("全銘柄取得失敗、デフォルト銘柄を使用"),i();console.log("全銘柄取得完了: ".concat(t.length,"件"));let a=Math.min(4e3,t.length),r=t.slice(0,a).map(e=>e.code);return console.log("分析対象銘柄: ".concat(r.length,"件")),r}catch(e){return console.warn("全銘柄取得エラー、デフォルト銘柄を使用:",e),i()}}function i(){return["7203","6758","9984","6861","8035","4063","6981","7974","4519","8031","9432","2914","4568","6954","6367"]}async function s(e){try{let t=e||await c();console.log("市場サマリー生成開始: ".concat(t.length,"銘柄を分析"));let n=await o(t);if(0===n.length)return console.warn("分析結果が0件です。サンプルデータを使用します。"),h();let a={STRONG_BUY:0,BUY:0,HOLD:0,SELL:0,STRONG_SELL:0};n.forEach(e=>{a[e.recommendation]++});let r=n.filter(e=>e.priceChangePercent>0).sort((e,t)=>t.priceChangePercent-e.priceChangePercent).slice(0,5),l=n.filter(e=>e.priceChangePercent<0).sort((e,t)=>e.priceChangePercent-t.priceChangePercent).slice(0,5);return console.log("市場サマリー生成完了: ".concat(n.length,"銘柄分析済み")),{totalSymbols:t.length,analyzedSymbols:n.length,recommendations:a,topGainers:r,topLosers:l,lastUpdated:new Date().toISOString()}}catch(e){return console.error("市場サマリー生成エラー:",e),console.log("サンプルデータにフォールバックします"),h()}}function h(){return{totalSymbols:5,analyzedSymbols:5,recommendations:{STRONG_BUY:1,BUY:2,HOLD:1,SELL:1,STRONG_SELL:0},topGainers:[{symbol:"7203",name:"トヨタ自動車",currentPrice:2500,priceChange:50,priceChangePercent:2.04,indicators:{sma5:2480,sma10:2460,sma25:2400,sma50:2350,rsi:65,macd:{macd:2.5,signal:1.8,histogram:.7},bollinger:{upper:2600,middle:2450,lower:2300}},recommendation:"BUY",confidence:.75,reasons:["短期上昇トレンド","RSI中立圏"],riskLevel:"LOW",targetPrice:2600}],topLosers:[{symbol:"6758",name:"ソニーグループ",currentPrice:12e3,priceChange:-100,priceChangePercent:-.83,indicators:{sma5:12100,sma10:12200,sma25:12300,sma50:12500,rsi:45,macd:{macd:-1.2,signal:-.8,histogram:-.4},bollinger:{upper:13e3,middle:12200,lower:11400}},recommendation:"HOLD",confidence:.6,reasons:["短期調整局面","RSI中立圏"],riskLevel:"MEDIUM"}],lastUpdated:new Date().toISOString()}}}}]);