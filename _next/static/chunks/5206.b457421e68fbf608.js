"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5206],{5206:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(5155),n=s(2115),r=s(1773);function l(e){let{onRefresh:t,children:s,threshold:l=80,resistance:i=.5}=e,[c,o]=(0,n.useState)(!1),[u,d]=(0,n.useState)(!1),[h,f]=(0,n.useState)(0),[m,v]=(0,n.useState)(0),[x,p]=(0,n.useState)(0),[y,b]=(0,n.useState)(!1),N=(0,n.useRef)(null),j=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=N.current;if(!e)return;let s=t=>{0===e.scrollTop&&(b(!0),v(t.touches[0].clientY),p(t.touches[0].clientY))},a=e=>{if(!y)return;let t=e.touches[0].clientY,s=t-m;if(s>0){e.preventDefault();let a=Math.min(s*i,1.5*l);f(a),p(t),a>0&&o(!0)}},n=async()=>{if(!y||!c){r();return}if(h>=l){d(!0);try{await t()}catch(e){console.error("Refresh failed:",e)}finally{d(!1)}}r()},r=()=>{o(!1),f(0),v(0),p(0),b(!1)};return e.addEventListener("touchstart",s,{passive:!1}),e.addEventListener("touchmove",a,{passive:!1}),e.addEventListener("touchend",n,{passive:!1}),()=>{e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",a),e.removeEventListener("touchend",n)}},[y,c,h,m,l,i,t]);let g=Math.min(h/l,1),E=h>=l;return(0,a.jsxs)("div",{ref:N,className:"relative overflow-auto mobile-scroll-y",children:[(0,a.jsx)("div",{ref:j,className:"fixed top-0 left-0 right-0 z-50 transition-all duration-200 ".concat(c||u?"translate-y-0":"-translate-y-full"),style:{transform:"translateY(".concat(Math.max(0,h-60),"px)")},children:(0,a.jsxs)("div",{className:"bg-white shadow-lg border-b",children:[(0,a.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"transition-all duration-200 ".concat(u?"animate-spin":""),style:{transform:"rotate(".concat(180*g,"deg)")},children:(0,a.jsx)(r.A,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:u?"更新中...":E?"離すと更新されます":"引っ張って更新"})]})}),(0,a.jsx)("div",{className:"h-1 bg-gray-200",children:(0,a.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-200",style:{width:"".concat(100*g,"%")}})})]})}),(0,a.jsx)("div",{className:"transition-transform duration-200",style:{transform:"translateY(".concat(c?Math.min(.3*h,20):0,"px)")},children:s}),c&&(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-40",style:{background:"linear-gradient(to bottom, \n              rgba(59, 130, 246, ".concat(.1*g,") 0%, \n              rgba(59, 130, 246, 0) 100%)")}})]})}}}]);