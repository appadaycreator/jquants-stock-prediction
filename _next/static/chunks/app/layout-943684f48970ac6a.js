(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177,7456],{465:(e,t,r)=>{Promise.resolve().then(r.bind(r,9014))},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var s=r(9233),a=r(2175),n=r(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var h=r(5843),u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,n.forwardRef)((e,t)=>{var{color:r="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:m="",children:x,iconNode:g}=e,p=(0,a._)(e,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return(0,n.createElement)("svg",(0,s._)((0,h._)((0,s._)({ref:t},u),{width:l,height:l,stroke:r,strokeWidth:o?24*Number(i)/Number(l):i,className:c("lucide",m)}),!x&&!d(p)&&{"aria-hidden":"true"},p),[...g.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(x)?x:[x]])}),x=(e,t)=>{let r=(0,n.forwardRef)((r,i)=>{var{className:d}=r,h=(0,a._)(r,["className"]);return(0,n.createElement)(m,(0,s._)({ref:i,iconNode:t,className:c("lucide-".concat(l(o(e))),"lucide-".concat(e),d)},h))});return r.displayName=o(e),r}},6967:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1476:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},6507:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},6710:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},1773:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8236:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3950:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5996:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},767:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(7401).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},9014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var s=r(5155),a=r(8346),n=r.n(a);r(347);var l=r(7581),i=r(3295),o=r(2115);let c=(0,o.createContext)(void 0),d=e=>{let{children:t}=e,[r,a]=(0,o.useState)(!1),[n,l]=(0,o.useState)(!1),[i,d]=(0,o.useState)(!1),[h,u]=(0,o.useState)(!1),[m,x]=(0,o.useState)(16),[g,p]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=localStorage.getItem("accessibility-settings");if(e)try{let t=JSON.parse(e);a(t.highContrast||!1),l(t.largeText||!1),d(t.reducedMotion||!1),u(t.colorBlindMode||!1),x(t.fontSize||16),p(t.screenReader||!1)}catch(e){console.warn("Failed to load accessibility settings:",e)}d(window.matchMedia("(prefers-reduced-motion: reduce)").matches)},[]),(0,o.useEffect)(()=>{localStorage.setItem("accessibility-settings",JSON.stringify({highContrast:r,largeText:n,reducedMotion:i,colorBlindMode:h,fontSize:m,screenReader:g}))},[r,n,i,h,m,g]),(0,o.useEffect)(()=>{let e=document.documentElement;r?e.classList.add("high-contrast-mode"):e.classList.remove("high-contrast-mode"),n?e.classList.add("large-text-mode"):e.classList.remove("large-text-mode"),i?e.classList.add("reduced-motion-mode"):e.classList.remove("reduced-motion-mode"),h?e.classList.add("colorblind-mode"):e.classList.remove("colorblind-mode"),e.style.fontSize="".concat(m,"px"),g?e.classList.add("screen-reader-mode"):e.classList.remove("screen-reader-mode")},[r,n,i,h,m,g]),(0,s.jsx)(c.Provider,{value:{highContrast:r,setHighContrast:a,largeText:n,setLargeText:l,reducedMotion:i,setReducedMotion:d,colorBlindMode:h,setColorBlindMode:u,fontSize:m,setFontSize:x,screenReader:g,setScreenReader:p},children:t})};var h=r(7456),u=r(7396),m=r(6046),x=r(767),g=r(6710),p=r(6967);let f=(0,r(7401).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function y(){let e=(0,m.usePathname)(),[t,r]=(0,o.useState)(!1),[a,n]=(0,o.useState)(!1),l=[{name:"ホーム",href:"/",icon:"\uD83C\uDFE0"},{name:"今日のタスク",href:"/today",icon:"\uD83C\uDFAF"},{name:"詳細分析",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"銘柄一覧",href:"/listed-data",icon:"\uD83D\uDCCB"},{name:"リスク管理",href:"/risk",icon:"\uD83D\uDEE1️"},{name:"設定",href:"/settings",icon:"⚙️"}],i=[{name:"個人投資",href:"/personal-investment",icon:"\uD83D\uDCBC"},{name:"レポート",href:"/reports",icon:"\uD83D\uDCC8"},{name:"分析状況",href:"/analysis-progress",icon:"\uD83D\uDD04"}];return(0,o.useEffect)(()=>{let e=localStorage.getItem("sidebar-collapsed");null!==e&&r(JSON.parse(e))},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{n(!a)},className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-md border border-gray-200",children:a?(0,s.jsx)(x.A,{className:"h-5 w-5"}):(0,s.jsx)(g.A,{className:"h-5 w-5"})}),a&&(0,s.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>n(!1)}),(0,s.jsx)("nav",{className:"hidden lg:block fixed left-0 top-0 h-full bg-white border-r border-gray-200 z-40 transition-all duration-300 ".concat(t?"w-16":"w-64"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[!t&&(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"J-Quants株価予測"}),(0,s.jsx)("button",{onClick:()=>{let e=!t;r(e),localStorage.setItem("sidebar-collapsed",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("sidebar-toggle"))},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:t?"サイドバーを展開":"サイドバーを折りたたむ",children:t?(0,s.jsx)(p.A,{className:"h-5 w-5 text-gray-600"}):(0,s.jsx)(f,{className:"h-5 w-5 text-gray-600"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[l.map(r=>{let a=e===r.href;return(0,s.jsxs)(u.default,{href:r.href,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors group ".concat(a?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50"),title:t?r.name:void 0,children:[(0,s.jsx)("span",{className:"text-lg flex-shrink-0",children:r.icon}),!t&&(0,s.jsx)("span",{className:"font-medium truncate",children:r.name}),t&&(0,s.jsx)("div",{className:"absolute left-16 bg-gray-900 text-white text-sm px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:r.name})]},r.name)}),(0,s.jsx)("div",{className:"border-t border-gray-200 my-4"}),i.map(r=>{let a=e===r.href;return(0,s.jsxs)(u.default,{href:r.href,className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors group ".concat(a?"bg-gray-50":""),title:t?r.name:void 0,children:[(0,s.jsx)("span",{className:"text-lg flex-shrink-0",children:r.icon}),!t&&(0,s.jsx)("span",{className:"font-medium truncate",children:r.name}),t&&(0,s.jsx)("div",{className:"absolute left-16 bg-gray-900 text-white text-sm px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:r.name})]},r.name)})]})]})}),(0,s.jsx)("nav",{className:"lg:hidden fixed left-0 top-0 h-full w-64 bg-white border-r border-gray-200 z-50 transform transition-transform duration-300 ".concat(a?"translate-x-0":"-translate-x-full"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"J-Quants株価予測"}),(0,s.jsx)("button",{onClick:()=>n(!1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)(x.A,{className:"h-5 w-5 text-gray-600"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[l.map(t=>{let r=e===t.href;return(0,s.jsxs)(u.default,{href:t.href,onClick:()=>n(!1),className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ".concat(r?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50"),children:[(0,s.jsx)("span",{className:"text-lg",children:t.icon}),(0,s.jsx)("span",{className:"font-medium",children:t.name})]},t.name)}),(0,s.jsx)("div",{className:"border-t border-gray-200 my-4"}),i.map(t=>{let r=e===t.href;return(0,s.jsxs)(u.default,{href:t.href,onClick:()=>n(!1),className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors ".concat(r?"bg-gray-50":""),children:[(0,s.jsx)("span",{className:"text-lg",children:t.icon}),(0,s.jsx)("span",{className:"font-medium",children:t.name})]},t.name)})]})]})})]})}var b=r(8834),v=r(9654);function j(e){let{error:t,resetErrorBoundary:r}=e,[a,n]=(0,o.useState)(!0),[l,i]=(0,o.useState)(0),[c,d]=(0,o.useState)(!1),[h,u]=(0,o.useState)("unknown");(0,o.useEffect)(()=>{if(u(function(e){var t;let r=e.message.toLowerCase(),s=(null===(t=e.stack)||void 0===t?void 0:t.toLowerCase())||"";return r.includes("rsc payload")||r.includes("server component")||r.includes("connection closed")?"rsc":r.includes("network")||r.includes("fetch")||r.includes("connection")||r.includes("timeout")?"network":r.includes("data")||r.includes("json")||r.includes("parse")||r.includes("invalid")?"data":s.includes("react")||s.includes("component")||r.includes("render")?"component":"unknown"}(t)),t.message.includes("Maximum update depth exceeded")){console.warn("Infinite loop detected, disabling auto-retry"),setTimeout(()=>{window.location.reload()},1e3);return}},[t]),(0,o.useCallback)(()=>{c||l>=3||(d(!0),i(e=>e+1),console.log("Auto retry attempt ".concat(l+1,"/3 for ").concat(h," error")),setTimeout(()=>{"caches"in window&&caches.keys().then(e=>{e.forEach(e=>caches.delete(e))});try{Object.keys(localStorage).forEach(e=>{(e.startsWith("app_cache:")||e.startsWith("next:"))&&localStorage.removeItem(e)})}catch(e){console.warn("Failed to clear localStorage cache:",e)}console.log("Recovery completed without reset to prevent loop"),d(!1)},Math.min(1e3*Math.pow(2,l),5e3)))},[h,l,c,r]);let m=(0,o.useMemo)(()=>{try{let e=JSON.parse(t.message);if(e&&"object"==typeof e&&"string"==typeof e.error_code&&"string"==typeof e.user_message)return e.user_message}catch(e){}return t.message||"予期しないエラーが発生しました"},[t]),x=(0,o.useCallback)(async()=>{let e="".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,10));try{await fetch("/api/retry",{method:"POST",headers:{"Content-Type":"application/json","Idempotency-Key":e},body:JSON.stringify({reason:"frontend_retry"})})}catch(e){}r()},[r]),g=e=>{switch(e){case"rsc":return"\uD83D\uDD04";case"network":return"\uD83C\uDF10";case"data":return"\uD83D\uDCCA";case"component":return"⚛️";default:return"⚠️"}},p=e=>{switch(e){case"rsc":return"RSC Payload エラー";case"network":return"ネットワークエラー";case"data":return"データ取得エラー";case"component":return"コンポーネントエラー";default:return"システムエラー"}},f=(0,s.jsx)("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50",children:(0,s.jsxs)("div",{className:"bg-red-600 text-white px-4 py-3 rounded shadow-lg max-w-md",children:[(0,s.jsxs)("div",{className:"font-semibold flex items-center space-x-2",children:[(0,s.jsx)("span",{children:g(h)}),(0,s.jsx)("span",{children:p(h)}),c&&(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})]}),(0,s.jsx)("div",{className:"text-sm opacity-90 truncate",children:m}),c&&(0,s.jsxs)("div",{className:"text-xs opacity-75 mt-1",children:["自動復旧中... (",l,"/3)"]})]})});return(0,s.jsxs)(s.Fragment,{children:[f,a&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("div",{className:"text-3xl",children:g(h)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:p(h)}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["エラーカテゴリ: ",h]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-gray-700 mb-2",children:m}),c&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,s.jsxs)("span",{className:"text-sm text-blue-800",children:["自動復旧を試行中... (",l,"/3)"]})]})})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:x,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:c,children:c?"復旧中...":"手動で再試行"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/",className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"ホームに戻る"})]}),l>=3&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-yellow-800",children:"自動復旧に失敗しました。手動で再試行するか、ホームに戻ってください。"})}),!1]})})})]})}function w(e){let{children:t}=e;return(0,s.jsx)(v.tH,{FallbackComponent:j,children:t})}class N{categorizeError(e){let t=e.message.toLowerCase(),r=e.stack||"";return t.includes("network")||t.includes("fetch")||t.includes("timeout")||t.includes("connection")?{category:"network",severity:"medium",message:e.message,userMessage:"ネットワーク接続に問題があります。しばらく待ってから再試行してください。",autoRetry:!0,retryDelay:2e3,fallbackAction:"refresh",timestamp:new Date().toISOString()}:t.includes("api")||t.includes("http")||t.includes("status")||r.includes("fetch")?{category:"api",severity:"high",message:e.message,userMessage:"データの取得に失敗しました。しばらく待ってから再試行してください。",autoRetry:!0,retryDelay:3e3,fallbackAction:"fallback",timestamp:new Date().toISOString()}:t.includes("data")||t.includes("parse")||t.includes("json")||t.includes("format")?{category:"data",severity:"medium",message:e.message,userMessage:"データの処理に問題があります。ページを再読み込みしてください。",autoRetry:!1,retryDelay:0,fallbackAction:"refresh",timestamp:new Date().toISOString()}:t.includes("validation")||t.includes("invalid")||t.includes("required")?{category:"validation",severity:"low",message:e.message,userMessage:"入力内容に問題があります。入力内容を確認してください。",autoRetry:!1,retryDelay:0,fallbackAction:"none",timestamp:new Date().toISOString()}:t.includes("system")||t.includes("internal")||t.includes("server")?{category:"system",severity:"critical",message:e.message,userMessage:"システムエラーが発生しました。管理者にお問い合わせください。",autoRetry:!1,retryDelay:0,fallbackAction:"redirect",timestamp:new Date().toISOString()}:{category:"unknown",severity:"medium",message:e.message,userMessage:"予期しないエラーが発生しました。ページを再読み込みしてください。",autoRetry:!0,retryDelay:2e3,fallbackAction:"refresh",timestamp:new Date().toISOString()}}async handleError(e,t){let r=this.categorizeError(e);this.errorHistory.push(r);let s=t?"".concat(t.operation,"_").concat(t.component,"_").concat(e.message):e.message,a=Date.now(),n=this.lastErrorTime.get(s)||0,l=this.errorCounts.get(s)||0;if(a-n<6e4&&l>=this.maxErrorsPerMinute)return!1;if(this.errorCounts.set(s,l+1),this.lastErrorTime.set(s,a),console.error("統一エラーハンドラー:",r),this.isRecovering)return console.log("既に復旧処理中です"),!1;this.isRecovering=!0;try{for(let e of this.recoveryActions.get(r.category)||[])if(await e.execute())return console.log("復旧成功: ".concat(e.description)),this.isRecovering=!1,!0;if(await this.executeFallbackAction(r))return console.log("フォールバック復旧成功"),this.isRecovering=!1,!0}catch(e){console.error("復旧処理エラー:",e)}finally{this.isRecovering=!1}return!1}initializeRecoveryActions(){this.recoveryActions.set("network",[{type:"retry",description:"ネットワーク接続の再試行",execute:async()=>!!navigator.onLine},{type:"clear-cache",description:"キャッシュのクリア",execute:async()=>{try{if("caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}return!0}catch(e){return console.error("キャッシュクリアエラー:",e),!1}}}]),this.recoveryActions.set("api",[{type:"retry",description:"API呼び出しの再試行",execute:async()=>{try{return(await fetch("/api/health",{method:"HEAD"})).ok}catch(e){return!1}}},{type:"fallback",description:"フォールバックデータの使用",execute:async()=>!0}]),this.recoveryActions.set("data",[{type:"refresh",description:"ページの再読み込み",execute:async()=>(window.location.reload(),!0)}]),this.recoveryActions.set("system",[{type:"redirect",description:"エラーページへのリダイレクト",execute:async()=>(window.location.href="/error",!0)}])}async executeFallbackAction(e){switch(e.fallbackAction){case"refresh":return window.location.reload(),!0;case"redirect":return window.location.href="/error",!0;case"fallback":return!0;case"clear-cache":try{if("caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}return!0}catch(e){return console.error("キャッシュクリアエラー:",e),!1}default:return!1}}getErrorHistory(){return[...this.errorHistory]}getErrorStats(){let e={};for(let[t,r]of this.errorCounts)e[t]=r;return e}reset(){this.errorHistory=[],this.errorCounts.clear(),this.lastErrorTime.clear(),this.isRecovering=!1}constructor(){this.errorHistory=[],this.recoveryActions=new Map,this.isRecovering=!1,this.errorCounts=new Map,this.lastErrorTime=new Map,this.maxErrorsPerMinute=10,this.initializeRecoveryActions()}}let k=new N;var S=r(1773),A=r(6507),C=r(3950),E=r(5996),D=r(1476),_=r(8236);class M extends o.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var r,s;console.error("統一エラーバウンダリ:",e,t),k.handleError(e).then(t=>{if(t)this.setState({hasError:!1,error:null,errorInfo:null,isRecovering:!1});else{let t=k.categorizeError(e);this.setState({errorInfo:t,isRecovering:!1})}}),null===(r=(s=this.props).onError)||void 0===r||r.call(s,e,t)}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;let{errorInfo:e,isRecovering:t,retryCount:r}=this.state,a=r<this.maxRetries;return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,s.jsx)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:this.getErrorIcon()}),(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"エラーが発生しました"}),(0,s.jsx)("p",{className:"text-sm mb-4 ".concat(this.getErrorColor()),children:(null==e?void 0:e.userMessage)||"予期しないエラーが発生しました"}),e&&(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:(0,s.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,s.jsxs)("div",{children:["カテゴリ: ",e.category]}),(0,s.jsxs)("div",{children:["重要度: ",e.severity]}),(0,s.jsxs)("div",{children:["時刻: ",new Date(e.timestamp).toLocaleString("ja-JP")]})]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[a&&(0,s.jsxs)("button",{onClick:this.handleRetry,disabled:t,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(S.A,{className:"h-4 w-4 ".concat(t?"animate-spin":"")}),(0,s.jsx)("span",{children:t?"復旧中...":"再試行"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("button",{onClick:this.handleGoHome,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"ホーム"})]}),(0,s.jsxs)("button",{onClick:this.handleRefresh,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[(0,s.jsx)(S.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"再読み込み"})]})]}),(0,s.jsxs)("button",{onClick:this.handleDismiss,className:"w-full flex items-center justify-center space-x-2 px-3 py-2 text-gray-500 hover:text-gray-700",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"エラーを無視"})]})]}),r>0&&(0,s.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:["再試行回数: ",r,"/",this.maxRetries]})]})})})}return this.props.children}constructor(e){super(e),this.maxRetries=3,this.handleRetry=async()=>{if(!(this.state.retryCount>=this.maxRetries)){this.setState({isRecovering:!0,retryCount:this.state.retryCount+1});try{if("caches"in window){let e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}try{Object.keys(localStorage).forEach(e=>{(e.startsWith("app_cache:")||e.startsWith("next:"))&&localStorage.removeItem(e)})}catch(e){console.warn("ローカルストレージのクリアに失敗:",e)}this.setState({hasError:!1,error:null,errorInfo:null,isRecovering:!1})}catch(e){console.error("リトライエラー:",e),this.setState({isRecovering:!1})}}},this.handleGoHome=()=>{window.location.href="/"},this.handleRefresh=()=>{window.location.reload()},this.handleDismiss=()=>{this.setState({hasError:!1,error:null,errorInfo:null,retryCount:0})},this.getErrorIcon=()=>{if(!this.state.errorInfo)return(0,s.jsx)(C.A,{className:"h-8 w-8 text-red-500"});switch(this.state.errorInfo.category){case"network":return(0,s.jsx)(E.A,{className:"h-8 w-8 text-orange-500"});case"api":return(0,s.jsx)(D.A,{className:"h-8 w-8 text-blue-500"});case"system":return(0,s.jsx)(_.A,{className:"h-8 w-8 text-purple-500"});default:return(0,s.jsx)(C.A,{className:"h-8 w-8 text-red-500"})}},this.getErrorColor=()=>{if(!this.state.errorInfo)return"text-red-600";switch(this.state.errorInfo.severity){case"low":return"text-yellow-600";case"medium":return"text-orange-600";default:return"text-red-600"}},this.state={hasError:!1,error:null,errorInfo:null,isRecovering:!1,retryCount:0}}}let I=e=>{let{className:t=""}=e,[r,a]=(0,o.useState)(!1),n=(0,m.usePathname)();return(0,o.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),(0,o.useEffect)(()=>{a(!1)},[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>a(!r),className:"\n          relative z-50 p-2 rounded-md text-gray-600 dark:text-gray-300\n          hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200\n          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n          ".concat(t,"\n        "),"aria-label":"メニューを開く","aria-expanded":r,children:(0,s.jsxs)("div",{className:"w-6 h-6 flex flex-col justify-center space-y-1",children:[(0,s.jsx)("span",{className:"\n              block h-0.5 w-6 bg-current transition-all duration-300 ease-in-out\n              ".concat(r?"rotate-45 translate-y-1.5":"","\n            ")}),(0,s.jsx)("span",{className:"\n              block h-0.5 w-6 bg-current transition-all duration-300 ease-in-out\n              ".concat(r?"opacity-0":"","\n            ")}),(0,s.jsx)("span",{className:"\n              block h-0.5 w-6 bg-current transition-all duration-300 ease-in-out\n              ".concat(r?"-rotate-45 -translate-y-1.5":"","\n            ")})]})}),r&&(0,s.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 transition-opacity duration-300",onClick:()=>a(!1)}),(0,s.jsxs)("div",{className:"\n          fixed top-0 left-0 z-50 h-full w-80 max-w-[85vw] bg-white dark:bg-gray-900\n          shadow-xl transform transition-transform duration-300 ease-in-out\n          ".concat(r?"translate-x-0":"-translate-x-full","\n        "),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"メニュー"}),(0,s.jsx)("button",{onClick:()=>a(!1),className:"p-2 rounded-md text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200","aria-label":"メニューを閉じる",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("nav",{className:"flex-1 overflow-y-auto py-4",children:(0,s.jsx)("ul",{className:"space-y-1 px-4",children:[{href:"/",label:"ダッシュボード",icon:"\uD83D\uDCCA"},{href:"/today",label:"今日の分析",icon:"\uD83D\uDCC8"},{href:"/personal-investment",label:"個人投資",icon:"\uD83D\uDCB0"},{href:"/risk",label:"リスク管理",icon:"⚠️"},{href:"/reports",label:"レポート",icon:"\uD83D\uDCCB"},{href:"/five-min-routine",label:"5分ルーチン",icon:"⚡"},{href:"/analysis-progress",label:"分析進捗",icon:"\uD83D\uDD04"},{href:"/logs",label:"ログ",icon:"\uD83D\uDCDD"},{href:"/troubleshooting",label:"トラブルシューティング",icon:"\uD83D\uDD27"},{href:"/usage",label:"使用方法",icon:"❓"},{href:"/settings",label:"設定",icon:"⚙️"}].map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)(u.default,{href:e.href,className:"\n                    flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium\n                    transition-colors duration-200 group\n                    ".concat(n===e.href?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800","\n                  "),children:[(0,s.jsx)("span",{className:"text-lg",children:e.icon}),(0,s.jsx)("span",{className:"flex-1",children:e.label}),n===e.href&&(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-600 dark:bg-blue-400 rounded-full"})]})},e.href))})}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"J-Quants 株価予測システム"})})]})]})};var L=r(3890);let R=()=>{let e=(0,m.usePathname)();return(0,s.jsx)("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-30",children:(0,s.jsxs)("div",{className:"container-responsive",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)(u.default,{href:"/",className:"flex items-center space-x-2 text-xl font-bold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"J-Quants"})]})}),(0,s.jsx)("nav",{className:"hidden lg:flex items-center space-x-1",children:[{href:"/",label:"ダッシュボード"},{href:"/today",label:"今日の分析"},{href:"/personal-investment",label:"個人投資"},{href:"/risk",label:"リスク管理"},{href:"/reports",label:"レポート"}].map(t=>(0,s.jsx)(u.default,{href:t.href,className:"\n                  px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200\n                  ".concat(e===t.href?"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100","\n                "),children:t.label},t.href))}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"hidden sm:block",children:(0,s.jsx)(L.A,{})}),(0,s.jsx)("div",{className:"lg:hidden",children:(0,s.jsx)(I,{})})]})]}),(0,s.jsx)("div",{className:"sm:hidden pb-4",children:(0,s.jsx)(L.A,{})})]})})},P=e=>{let{children:t,className:r=""}=e,[a,n]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("sidebar-collapsed");null!==e&&n(JSON.parse(e))};return e(),window.addEventListener("storage",e),window.addEventListener("sidebar-toggle",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("sidebar-toggle",e)}},[]),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300 ".concat(a?"sidebar-collapsed":""),children:[(0,s.jsx)(R,{}),(0,s.jsx)("main",{className:"\n        container-responsive py-6\n        ".concat(r,"\n      "),children:t})]})},O=()=>{"undefined"!=typeof document&&(document.title="J-Quants株価予測システム",[{name:"description",content:"J-Quants APIを使用した株価予測システム - モバイル最適化された投資判断支援ツール"},{name:"keywords",content:"株価,予測,J-Quants,機械学習,データ分析,モバイル,投資,トレーディング"},{name:"author",content:"J-Quants Stock Prediction Team"},{name:"robots",content:"index, follow"},{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes"},{name:"theme-color",content:"#2563eb"},{name:"mobile-web-app-capable",content:"yes"},{name:"mobile-web-app-status-bar-style",content:"default"},{name:"format-detection",content:"telephone=no"},{property:"og:title",content:"J-Quants株価予測システム"},{property:"og:description",content:"J-Quants APIを使用した株価予測システム - モバイル最適化された投資判断支援ツール"},{property:"og:type",content:"website"},{property:"og:locale",content:"ja_JP"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:"J-Quants株価予測システム"},{name:"twitter:description",content:"J-Quants APIを使用した株価予測システム - モバイル最適化された投資判断支援ツール"}].forEach(e=>{let{name:t,content:r,property:s}=e,a=document.querySelector(s?'meta[property="'.concat(s,'"]'):'meta[name="'.concat(t,'"]'));a||(a=document.createElement("meta"),s?a.setAttribute("property",s):t&&a.setAttribute("name",t),document.head.appendChild(a)),a.setAttribute("content",r)}))};function z(e){let{children:t}=e,[r,a]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{a(!0),O(),console.log("エラーハンドリングシステムを初期化しました")},[]),r)?(0,s.jsx)("html",{lang:"ja",children:(0,s.jsx)("body",{className:"".concat(n().className," theme-base"),children:(0,s.jsx)(i.N,{children:(0,s.jsx)(d,{children:(0,s.jsx)(l.Z,{children:(0,s.jsx)(b.o,{children:(0,s.jsx)(M,{children:(0,s.jsx)(w,{children:(0,s.jsxs)("div",{id:"root",children:[(0,s.jsx)(P,{children:t}),(0,s.jsx)(y,{}),(0,s.jsx)(h.default,{})]})})})})})})})})}):(0,s.jsxs)("html",{lang:"ja",children:[(0,s.jsxs)("head",{children:[(0,s.jsx)("title",{children:"J-Quants株価予測システム"}),(0,s.jsx)("meta",{name:"description",content:"J-Quants APIを使用した株価予測システム - モバイル最適化された投資判断支援ツール"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes"}),(0,s.jsx)("meta",{name:"theme-color",content:"#2563eb"})]}),(0,s.jsx)("body",{className:n().className,children:(0,s.jsx)("div",{id:"root",children:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"読み込み中..."})]})})})})]})}},3890:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155);r(2115);var a=r(3295);let n=()=>{let{theme:e,setTheme:t,effectiveTheme:r}=(0,a.D)();return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"テーマ:"}),(0,s.jsx)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[{value:"light",label:"ライト",icon:"☀️"},{value:"dark",label:"ダーク",icon:"\uD83C\uDF19"},{value:"auto",label:"自動",icon:"\uD83D\uDD04"}].map(r=>{let{value:a,label:n,icon:l}=r;return(0,s.jsxs)("button",{onClick:()=>t(a),className:"\n              flex items-center space-x-1 px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200\n              ".concat(e===a?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200","\n            "),title:"".concat(n,"テーマに切り替え"),children:[(0,s.jsx)("span",{className:"text-base",children:l}),(0,s.jsx)("span",{className:"hidden sm:inline",children:n})]},a)})}),"auto"===e&&(0,s.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(","dark"===r?"ダーク":"ライト",")"]})]})}},7456:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(5155),a=r(7396),n=r(6046),l=r(2115);let i=[{href:"/",label:"ホーム",icon:"\uD83C\uDFE0",shortLabel:"ホーム"},{href:"/today",label:"今日のタスク",icon:"\uD83C\uDFAF",shortLabel:"今日"},{href:"/dashboard",label:"詳細分析",icon:"\uD83D\uDCCA",shortLabel:"分析"},{href:"/listed-data",label:"銘柄一覧",icon:"\uD83D\uDCCB",shortLabel:"銘柄"},{href:"/risk",label:"リスク管理",icon:"\uD83D\uDEE1️",shortLabel:"リスク"},{href:"/settings",label:"設定",icon:"⚙️",shortLabel:"設定"}];function o(){let e=(0,n.usePathname)(),[t,r]=(0,l.useState)(!1),o=t=>"/"===t?"/"===e:e.startsWith(t);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 md:hidden",children:(0,s.jsx)("div",{className:"flex items-center justify-around px-3 py-3",children:i.map(e=>(0,s.jsxs)(a.default,{href:e.href,className:"flex flex-col items-center justify-center min-h-[48px] min-w-[48px] px-3 py-2 rounded-lg transition-colors touch-target ".concat(o(e.href)?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,s.jsx)("span",{className:"text-xl mb-1 leading-none",children:e.icon}),(0,s.jsx)("span",{className:"text-[13px] font-medium leading-tight text-center",children:e.shortLabel})]},e.href))})}),(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 md:hidden",children:(0,s.jsx)("button",{onClick:()=>r(!t),className:"bg-white shadow-lg rounded-full p-3 border border-gray-200 min-h-[48px] min-w-[48px] flex items-center justify-center touch-target","aria-label":"メニューを開く",children:(0,s.jsx)("span",{className:"text-lg",children:"☰"})})}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>r(!1)}),(0,s.jsx)("div",{className:"fixed top-16 right-4 bg-white rounded-lg shadow-lg border border-gray-200 z-50 md:hidden min-w-[200px]",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"メニュー"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(a.default,{href:"/personal-investment",className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>r(!1),children:[(0,s.jsx)("span",{children:"\uD83D\uDCBC"}),(0,s.jsx)("span",{children:"個人投資"})]}),(0,s.jsxs)(a.default,{href:"/reports",className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>r(!1),children:[(0,s.jsx)("span",{children:"\uD83D\uDCC8"}),(0,s.jsx)("span",{children:"レポート"})]}),(0,s.jsxs)(a.default,{href:"/analysis-progress",className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-50 text-sm",onClick:()=>r(!1),children:[(0,s.jsx)("span",{children:"\uD83D\uDD04"}),(0,s.jsx)("span",{children:"分析状況"})]})]})]})})]}),(0,s.jsx)("nav",{className:"hidden md:block fixed left-0 top-0 h-full w-64 bg-white border-r border-gray-200 z-40",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"J-Quants株価予測"}),(0,s.jsxs)("div",{className:"space-y-2",children:[i.map(e=>(0,s.jsxs)(a.default,{href:e.href,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ".concat(o(e.href)?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50"),children:[(0,s.jsx)("span",{className:"text-lg",children:e.icon}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]},e.href)),(0,s.jsx)("div",{className:"border-t border-gray-200 my-4"}),(0,s.jsxs)(a.default,{href:"/personal-investment",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCBC"}),(0,s.jsx)("span",{className:"font-medium",children:"個人投資"})]}),(0,s.jsxs)(a.default,{href:"/reports",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCC8"}),(0,s.jsx)("span",{className:"font-medium",children:"レポート"})]}),(0,s.jsxs)(a.default,{href:"/analysis-progress",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDD04"}),(0,s.jsx)("span",{className:"font-medium",children:"分析状況"})]})]})]})})]})}},7581:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o,t:()=>c});var s=r(9233),a=r(5155),n=r(2115);let l={prediction:{days:30},model:{type:"all",primary_model:"xgboost",compare_models:!0,auto_retrain:!1,retrain_frequency:"weekly"},data:{refresh_interval:"daily",max_data_points:1e3,include_technical_indicators:!0},features:{selected:["sma_5","sma_10","sma_25","sma_50","rsi","macd"]},ui:{theme:"light",refresh_rate:30,show_tooltips:!0}},i=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,n.useState)(l),[c,d]=(0,n.useState)(!1),[h,u]=(0,n.useState)(!1),m=async()=>{try{d(!0);let e=localStorage.getItem("jquants-settings");if(e){let t=JSON.parse(e);o(e=>(0,s._)({},e,t))}}catch(e){console.error("設定の読み込みに失敗:",e)}finally{d(!1)}},x=async()=>{try{u(!0),localStorage.setItem("jquants-settings",JSON.stringify(r))}catch(e){throw console.error("設定保存エラー:",e),e}finally{u(!1)}};return(0,n.useEffect)(()=>{(async()=>{try{d(!0);let e=localStorage.getItem("jquants-settings");if(e){let t=JSON.parse(e);o(e=>(0,s._)({},e,t))}}catch(e){console.error("設定の読み込みに失敗:",e)}finally{d(!1)}})()},[]),(0,a.jsx)(i.Provider,{value:{settings:r,updateSettings:e=>{o(t=>(0,s._)({},t,e))},loadSettings:m,saveSettings:x,resetSettings:()=>{o(l)},isLoading:c,isSaving:h},children:t})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}},3295:(e,t,r)=>{"use strict";r.d(t,{D:()=>l,N:()=>i});var s=r(5155),a=r(2115);let n=(0,a.createContext)(void 0),l=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e},i=e=>{let{children:t}=e,[r,l]=(0,a.useState)("auto"),[i,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");o(e.matches);let t=e=>{o(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,a.useEffect)(()=>{let e=localStorage.getItem("theme");e&&["light","dark","auto","blue","green","purple"].includes(e)?l(e):l("auto")},[]);let c=e=>{l(e),localStorage.setItem("theme",e)},d="auto"===r?i?"dark":"light":"blue"===r||"green"===r||"purple"===r?"light":r,h="dark"===d;return(0,a.useEffect)(()=>{let e=document.documentElement;e.classList.remove("theme-light","theme-dark","theme-blue","theme-green","theme-purple"),e.classList.add("theme-".concat(r)),e.setAttribute("data-theme",r),e.setAttribute("data-effective-theme",d)},[r,d]),(0,s.jsx)(n.Provider,{value:{theme:r,setTheme:c,toggleTheme:()=>{c("light"===r?"dark":"dark"===r?"auto":"light")},isDark:h,effectiveTheme:d},children:t})}},8834:(e,t,r)=>{"use strict";r.d(t,{o:()=>c,s:()=>d});var s=r(9233),a=r(5155),n=r(2115);let l={capitalAmount:1e6,riskTolerance:"MEDIUM",preferredSectors:[],esgPreference:!1,maxPositions:8,excludeSymbols:[]},i=(0,n.createContext)(null),o="user_profile";function c(e){let{children:t}=e,[r,c]=(0,n.useState)(l);(0,n.useEffect)(()=>{try{let e=localStorage.getItem(o);if(e){let t=JSON.parse(e);"number"==typeof t.capitalAmount&&t.capitalAmount>=0&&c((0,s._)({},l,t))}}catch(e){}},[]);let d=e=>{c(t=>{let r="function"==typeof e?e(t):e;try{localStorage.setItem(o,JSON.stringify(r))}catch(e){}return r})},h=()=>d(l),u=(0,n.useMemo)(()=>({profile:r,setProfile:d,resetProfile:h}),[r]);return(0,a.jsx)(i.Provider,{value:u,children:t})}function d(){let e=(0,n.useContext)(i);if(!e)throw Error("useUserProfile must be used within UserProfileProvider");return e}},347:()=>{},8346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_5cc04a"}},2175:(e,t,r)=>{"use strict";function s(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r,s,a={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}r.r(t),r.d(t,{_:()=>s})},9654:(e,t,r)=>{"use strict";r.d(t,{tH:()=>l});var s=r(2115);let a=(0,s.createContext)(null),n={didCatch:!1,error:null};class l extends s.Component{static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(null!==e){for(var t,r,s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];null===(t=(r=this.props).onReset)||void 0===t||t.call(r,{args:a,reason:"imperative-api"}),this.setState(n)}}componentDidCatch(e,t){var r,s;null===(r=(s=this.props).onError)||void 0===r||r.call(s,e,t)}componentDidUpdate(e,t){let{didCatch:r}=this.state,{resetKeys:s}=this.props;if(r&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,r)=>!Object.is(e,t[r]))}(e.resetKeys,s)){var a,l;null===(a=(l=this.props).onReset)||void 0===a||a.call(l,{next:s,prev:e.resetKeys,reason:"keys"}),this.setState(n)}}render(){let{children:e,fallbackRender:t,FallbackComponent:r,fallback:n}=this.props,{didCatch:l,error:i}=this.state,o=e;if(l){let e={error:i,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)o=t(e);else if(r)o=(0,s.createElement)(r,e);else if(void 0!==n)o=n;else throw i}return(0,s.createElement)(a.Provider,{value:{didCatch:l,error:i,resetErrorBoundary:this.resetErrorBoundary}},o)}constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=n}}}},e=>{var t=t=>e(e.s=t);e.O(0,[9161,7690,7396,8441,1517,7358],()=>t(465)),_N_E=e.O()}]);