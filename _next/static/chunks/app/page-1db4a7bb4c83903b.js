(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{66307:(e,s,a)=>{Promise.resolve().then(a.bind(a,9809))},9809:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>F});var t=a(39233),l=a(65843),r=a(95155),d=a(12115),i=a(59909),c=a(58581),n=a(94973),x=a(15255),o=a(12800),m=a(66963),h=a(71214),j=a(85608),u=a(57851),g=a(394),p=a(79449),y=a(30563),b=a(909),N=a(67732),f=a(46699),v=a(7032),w=a(73239),k=a(29191),_=a(68236),A=a(21773),S=a(59136),C=a(86878),M=a(59676),K=a(81476);let E=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function F(){var e;let[s,a]=(0,d.useState)("overview"),[F,D]=(0,d.useState)([]),[W,R]=(0,d.useState)([]),[P,T]=(0,d.useState)([]),[z,B]=(0,d.useState)([]),[I,J]=(0,d.useState)(null),[L,O]=(0,d.useState)(!0),[X,G]=(0,d.useState)(!1),[H,Q]=(0,d.useState)(!1),[U,q]=(0,d.useState)(!1),[V,Y]=(0,d.useState)(0),[Z,$]=(0,d.useState)("");(0,d.useEffect)(()=>{ee()},[]);let ee=async()=>{try{O(!0);let e=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;for(let a=0;a<s;a++)try{let s=await fetch(e,{cache:"no-cache",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(s.ok)return s;throw Error("HTTP ".concat(s.status))}catch(t){if(console.warn("Fetch attempt ".concat(a+1," failed for ").concat(e,":"),t),a===s-1)throw t;await new Promise(e=>setTimeout(e,1e3*(a+1)))}throw Error("All retry attempts failed")},[s,a,t,l,r]=await Promise.all([e("./data/dashboard_summary.json"),e("./data/stock_data.json"),e("./data/model_comparison.json"),e("./data/feature_analysis.json"),e("./data/prediction_results.json")]),d=await s.json(),i=await a.json(),c=await t.json(),n=await l.json(),x=await r.json();J(d),D(i.slice(0,100)),R(c),T(n),B(x)}catch(e){console.error("データの読み込みに失敗:",e),e instanceof Error&&(e.message.includes("RSC payload")||e.message.includes("Connection closed")||e.message.includes("Failed to fetch"))&&(console.log("RSC payload error detected, retrying in 3 seconds..."),setTimeout(()=>{ee()},3e3))}finally{O(!1)}},es=async()=>{try{q(!0),Y(0),$("分析を開始しています...");let e=setInterval(()=>{Y(s=>s>=90?(clearInterval(e),s):s+10*Math.random())},500);$("分析が完了しました。データを更新しています..."),Y(100),await ee(),setTimeout(()=>{G(!1),q(!1),Y(0),$("")},1e3)}catch(e){console.error("分析実行エラー:",e),$("分析の実行に失敗しました"),q(!1)}};if(L)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"データを読み込み中..."})]})});let ea=e=>new Date(e).toLocaleDateString("ja-JP"),et=F.map(e=>({date:ea(e.date),実際価格:e.close,SMA_5:e.sma_5,SMA_10:e.sma_10,SMA_25:e.sma_25,SMA_50:e.sma_50,出来高:e.volume/1e6})),el=z.slice(0,50).map(e=>({index:e.index,実際値:e.actual,予測値:e.predicted}));return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"J-Quants 株価予測ダッシュボード"}),(0,r.jsx)("p",{className:"text-gray-600",children:"機械学習による株価予測システム"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(w.A,{className:"h-5 w-5 text-green-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"システム: 正常稼働中"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["最終更新: ",I?I.last_updated:"-"]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("button",{onClick:()=>G(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"分析実行"]}),(0,r.jsxs)("button",{onClick:()=>Q(!0),className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,r.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"設定"]}),(0,r.jsxs)("button",{onClick:ee,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,r.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"更新"]})]})]})]})})}),(0,r.jsx)("nav",{className:"bg-white border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"flex space-x-8",children:[{id:"overview",label:"概要",icon:S.A},{id:"predictions",label:"予測結果",icon:C.A},{id:"models",label:"モデル比較",icon:M.A},{id:"analysis",label:"分析",icon:K.A}].map(e=>{let t=e.icon;return(0,r.jsxs)("button",{onClick:()=>a(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat(s===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)(t,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.label})]},e.id)})})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(C.A,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"最優秀モデル"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==I?void 0:null===(e=I.best_model)||void 0===e?void 0:e.toUpperCase())||"-"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(M.A,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"予測精度 (R\xb2)"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==I?void 0:I.r2)||"-"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(S.A,{className:"h-6 w-6 text-yellow-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"MAE"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==I?void 0:I.mae)||"-"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(K.A,{className:"h-6 w-6 text-purple-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"データ数"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==I?void 0:I.total_data_points)||"-"})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"株価推移と移動平均"}),(0,r.jsx)(c.u,{width:"100%",height:400,children:(0,r.jsxs)(n.b,{data:et,children:[(0,r.jsx)(x.d,{strokeDasharray:"3 3"}),(0,r.jsx)(o.W,{dataKey:"date"}),(0,r.jsx)(m.h,{}),(0,r.jsx)(h.m,{}),(0,r.jsx)(j.s,{}),(0,r.jsx)(u.N,{type:"monotone",dataKey:"実際価格",stroke:"#2563eb",strokeWidth:2}),(0,r.jsx)(u.N,{type:"monotone",dataKey:"SMA_5",stroke:"#dc2626",strokeWidth:1}),(0,r.jsx)(u.N,{type:"monotone",dataKey:"SMA_10",stroke:"#059669",strokeWidth:1}),(0,r.jsx)(u.N,{type:"monotone",dataKey:"SMA_25",stroke:"#d97706",strokeWidth:1}),(0,r.jsx)(u.N,{type:"monotone",dataKey:"SMA_50",stroke:"#7c3aed",strokeWidth:1})]})})]})]}),"predictions"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"予測 vs 実際値"}),(0,r.jsx)(c.u,{width:"100%",height:400,children:(0,r.jsxs)(n.b,{data:el,children:[(0,r.jsx)(x.d,{strokeDasharray:"3 3"}),(0,r.jsx)(o.W,{dataKey:"index"}),(0,r.jsx)(m.h,{}),(0,r.jsx)(h.m,{}),(0,r.jsx)(j.s,{}),(0,r.jsx)(u.N,{type:"monotone",dataKey:"実際値",stroke:"#2563eb",strokeWidth:2}),(0,r.jsx)(u.N,{type:"monotone",dataKey:"予測値",stroke:"#dc2626",strokeWidth:2})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"予測誤差分布"}),(0,r.jsx)(c.u,{width:"100%",height:300,children:(0,r.jsxs)(g.E,{data:z.slice(0,20).map(e=>({index:e.index,誤差:e.error.toFixed(2)})),children:[(0,r.jsx)(x.d,{strokeDasharray:"3 3"}),(0,r.jsx)(o.W,{dataKey:"index"}),(0,r.jsx)(m.h,{}),(0,r.jsx)(h.m,{}),(0,r.jsx)(p.y,{dataKey:"誤差",fill:"#8884d8"})]})})]})]}),"models"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"モデル性能比較"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"順位"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"モデル名"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MAE"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RMSE"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xb2"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map((e,s)=>(0,r.jsxs)("tr",{className:0===s?"bg-green-50":"",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[s+1,0===s&&(0,r.jsx)("span",{className:"ml-2 text-green-600",children:"\uD83C\uDFC6"})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.mae.toFixed(4)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.rmse.toFixed(4)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.r2.toFixed(4)})]},e.name))})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"MAE比較"}),(0,r.jsx)(c.u,{width:"100%",height:300,children:(0,r.jsxs)(g.E,{data:W,children:[(0,r.jsx)(x.d,{strokeDasharray:"3 3"}),(0,r.jsx)(o.W,{dataKey:"name"}),(0,r.jsx)(m.h,{}),(0,r.jsx)(h.m,{}),(0,r.jsx)(p.y,{dataKey:"mae",fill:"#8884d8"})]})})]})]}),"analysis"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"特徴量重要度"}),(0,r.jsx)(c.u,{width:"100%",height:300,children:(0,r.jsxs)(g.E,{data:P,layout:"horizontal",children:[(0,r.jsx)(x.d,{strokeDasharray:"3 3"}),(0,r.jsx)(o.W,{type:"number"}),(0,r.jsx)(m.h,{dataKey:"feature",type:"category",width:100}),(0,r.jsx)(h.m,{}),(0,r.jsx)(p.y,{dataKey:"percentage",fill:"#82ca9d"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"特徴量重要度分布"}),(0,r.jsx)(c.u,{width:"100%",height:300,children:(0,r.jsxs)(y.r,{children:[(0,r.jsx)(b.F,{data:P.map(e=>(0,l._)((0,t._)({},e),{name:e.feature})),cx:"50%",cy:"50%",labelLine:!1,label:!1,outerRadius:80,fill:"#8884d8",dataKey:"percentage",children:P.map((e,s)=>(0,r.jsx)(N.f,{fill:E[s%E.length]},"cell-".concat(s)))}),(0,r.jsx)(h.m,{})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"実際値 vs 予測値散布図"}),(0,r.jsx)(c.u,{width:"100%",height:400,children:(0,r.jsxs)(f.t,{data:z.slice(0,50),children:[(0,r.jsx)(x.d,{}),(0,r.jsx)(o.W,{dataKey:"actual",name:"実際値"}),(0,r.jsx)(m.h,{dataKey:"predicted",name:"予測値"}),(0,r.jsx)(h.m,{cursor:{strokeDasharray:"3 3"}}),(0,r.jsx)(v.X,{name:"予測ポイント",data:z.slice(0,50),fill:"#8884d8"})]})})]})]})]}),X&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"分析実行"}),(0,r.jsx)("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),U?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:Z})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(V,"%")}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:[Math.round(V),"% 完了"]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"新しい分析を実行しますか？この処理には数分かかる場合があります。"}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>G(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,r.jsx)("button",{onClick:es,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"実行"})]})]})]})}),H&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"設定"}),(0,r.jsx)("button",{onClick:()=>Q(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"予測期間（日数）"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"7",children:"7日"}),(0,r.jsx)("option",{value:"14",children:"14日"}),(0,r.jsx)("option",{value:"30",selected:!0,children:"30日"}),(0,r.jsx)("option",{value:"60",children:"60日"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"使用するモデル"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"すべてのモデル"}),(0,r.jsx)("option",{value:"linear",children:"線形回帰"}),(0,r.jsx)("option",{value:"random_forest",children:"ランダムフォレスト"}),(0,r.jsx)("option",{value:"xgboost",children:"XGBoost"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"特徴量選択"}),(0,r.jsx)("div",{className:"space-y-2",children:["SMA_5","SMA_10","SMA_25","SMA_50","RSI","MACD","ボリンジャーバンド"].map(e=>(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{onClick:()=>Q(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,r.jsx)("button",{onClick:()=>{Q(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"保存"})]})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[96,76,358],()=>s(66307)),_N_E=e.O()}]);