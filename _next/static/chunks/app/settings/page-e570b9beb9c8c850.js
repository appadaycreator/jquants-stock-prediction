(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4662],{838:(e,s,t)=>{Promise.resolve().then(t.bind(t,5126))},5126:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>W});var a=t(9233),r=t(5843),l=t(5155),n=t(2115),i=t(7396),d=t(9909),o=t(9191),c=t(1773),m=t(7780),x=t(4857),u=t(8684),h=t(2598),p=t(3239),g=t(1594),b=t(3467),y=t(8236),v=t(6062),f=t(426),j=t(1476),N=t(9257),_=t(3950),w=t(5288),k=t(2640),C=t(4561),S=t(7581),A=t(6889),I=t(6462),L=t(6118),T=t(2320);function E(){let[e,s]=(0,n.useState)(null),[t,r]=(0,n.useState)(!1),[i,d]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null),[x,u]=(0,n.useState)("unknown"),[h,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{b(T.J.getInstance()),v(),f()},[]);let v=async()=>{if(h)try{let e=await h.loadConfig();s(e)}catch(e){console.error("設定読み込みエラー:",e)}},f=async()=>{try{let e=localStorage.getItem("auto-update-enabled");u("true"===e?"running":"stopped")}catch(e){console.error("自動更新ステータス確認エラー:",e)}},j=async()=>{if(e&&h){d(!0);try{await h.saveConfig(e),c("設定を保存しました"),setTimeout(()=>c(null),3e3)}catch(e){c("設定の保存に失敗しました")}finally{d(!1)}}},N=async()=>{if(e&&h){r(!0);try{await h.startAutoUpdate(),u("running"),c("自動更新を開始しました"),setTimeout(()=>c(null),3e3)}catch(e){c("自動更新の開始に失敗しました")}finally{r(!1)}}},_=async()=>{if(h){r(!0);try{await h.stopAutoUpdate(),u("stopped"),c("自動更新を停止しました"),setTimeout(()=>c(null),3e3)}catch(e){c("自動更新の停止に失敗しました")}finally{r(!1)}}},k=async()=>{if(h){r(!0);try{await h.initializePushNotifications(),await h.notifyAnalysisComplete({title:"通知テスト",message:"通知設定は正常です",timestamp:new Date().toISOString()}),c("通知テストを送信しました"),setTimeout(()=>c(null),3e3)}catch(e){c("通知テストに失敗しました")}finally{r(!1)}}},C=async()=>{if(h)try{await h.initializePushNotifications(),c("ブラウザ通知を有効化しました"),setTimeout(()=>c(null),3e3)}catch(e){c("通知の有効化に失敗しました（サポート外または権限未許可）")}},S=(t,r)=>{e&&s(e=>{if(!e)return e;let s=(0,a._)({},e),l=t.split("."),n=s;for(let e=0;e<l.length-1;e++)n=n[l[e]];return n[l[l.length-1]]=r,s})};return e?(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,l.jsx)(y.A,{className:"w-6 h-6 text-blue-600"}),(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"自動更新・通知設定"})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(A.A,{className:"w-5 h-5 text-gray-600"}),(0,l.jsx)("span",{className:"font-medium text-gray-900",children:"自動更新ステータス"})]}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:"running"===x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.A,{className:"w-5 h-5 text-green-600"}),(0,l.jsx)("span",{className:"text-green-600 font-medium",children:"実行中"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.A,{className:"w-5 h-5 text-red-600"}),(0,l.jsx)("span",{className:"text-red-600 font-medium",children:"停止中"})]})})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"自動更新コントロール"}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:N,disabled:t||"running"===x,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"自動更新開始"}),(0,l.jsx)("button",{onClick:_,disabled:t||"stopped"===x,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"自動更新停止"}),(0,l.jsx)("button",{onClick:C,disabled:t,className:"bg-blue-50 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-100 transition-colors",title:"ブラウザ通知の権限をリクエストし、次回更新完了時に通知を受け取れるようにします",children:"ブラウザ通知を有効化"})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"スケジュール設定"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"朝の分析時間"}),(0,l.jsx)("input",{type:"time",value:e.schedule.morning_analysis,onChange:e=>S("schedule.morning_analysis",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"夕方の分析時間"}),(0,l.jsx)("input",{type:"time",value:e.schedule.evening_analysis,onChange:e=>S("schedule.evening_analysis",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"通知設定"}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(I.A,{className:"w-5 h-5 text-gray-600"}),(0,l.jsx)("span",{className:"font-medium text-gray-900",children:"メール通知"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,l.jsx)("input",{type:"checkbox",checked:e.email.enabled,onChange:e=>S("email.enabled",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"メール通知を有効にする"})]}),e.email.enabled&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,l.jsx)("input",{type:"email",placeholder:"送信先メールアドレス",value:e.email.email_to,onChange:e=>S("email.email_to",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,l.jsx)("input",{type:"email",placeholder:"送信者メールアドレス",value:e.email.email_user,onChange:e=>S("email.email_user",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(w.A,{className:"w-5 h-5 text-gray-600"}),(0,l.jsx)("span",{className:"font-medium text-gray-900",children:"プッシュ通知"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,l.jsx)("input",{type:"checkbox",checked:e.push.enabled,onChange:e=>S("push.enabled",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"プッシュ通知を有効にする"})]})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"通知内容設定"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:e.content.include_analysis_summary,onChange:e=>S("content.include_analysis_summary",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"分析サマリーを含める"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:e.content.include_recommendations,onChange:e=>S("content.include_recommendations",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"推奨事項を含める"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:e.content.include_risk_alerts,onChange:e=>S("content.include_risk_alerts",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"リスク警告を含める"})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("button",{onClick:k,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[(0,l.jsx)(L.A,{className:"w-4 h-4"}),"通知テスト"]}),(0,l.jsxs)("button",{onClick:j,disabled:i,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[(0,l.jsx)(m.A,{className:"w-4 h-4"}),"設定保存"]})]}),o&&(0,l.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,l.jsx)("p",{className:"text-blue-800",children:o})})]}):(0,l.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}var O=t(1360),F=t(1719),P=t(6967);let q=[{id:"moving_averages",name:"移動平均系",description:"価格のトレンドを分析するための移動平均線とその派生指標",features:[{key:"sma_5",label:"SMA_5",description:"5日単純移動平均。短期トレンドの方向性を示します。推奨値：短期分析に有効",recommended:!0},{key:"sma_10",label:"SMA_10",description:"10日単純移動平均。中短期トレンドの確認に使用。推奨値：バランスの取れた分析",recommended:!0},{key:"sma_25",label:"SMA_25",description:"25日単純移動平均。中期トレンドの判断に使用。推奨値：中期分析の基準",recommended:!0},{key:"sma_50",label:"SMA_50",description:"50日単純移動平均。長期トレンドの確認に使用。推奨値：長期トレンド分析",recommended:!1}]},{id:"oscillators",name:"オシレーター系",description:"価格の過買い・過売り状態を判断するための振動系指標",features:[{key:"rsi",label:"RSI",description:"相対力指数。0-100の範囲で過買い・過売りを判断。推奨値：30以下で買い、70以上で売り",recommended:!0},{key:"macd",label:"MACD",description:"移動平均収束発散。トレンドの変化を捉える。推奨値：シグナルラインとの交差で判断",recommended:!0}]},{id:"volatility",name:"ボラティリティ系",description:"価格の変動率を測定する指標",features:[{key:"bollinger_upper",label:"ボリンジャー上",description:"ボリンジャーバンドの上限。価格が上回ると過買いの可能性。推奨値：価格が上回ったら売りシグナル",recommended:!0},{key:"bollinger_lower",label:"ボリンジャー下",description:"ボリンジャーバンドの下限。価格が下回ると過売りの可能性。推奨値：価格が下回ったら買いシグナル",recommended:!0}]},{id:"volume",name:"出来高系",description:"取引量に基づく分析指標",features:[{key:"volume_sma",label:"出来高移動平均",description:"出来高の移動平均。取引の活発さを測定。推奨値：価格上昇時の出来高増加を確認",recommended:!1},{key:"volume_ratio",label:"出来高比率",description:"現在の出来高と平均出来高の比率。推奨値：1.5以上で異常な取引量",recommended:!1}]}];function R(e){let{selectedFeatures:s,onFeatureChange:t}=e,[a,r]=(0,n.useState)(["moving_averages","oscillators","volatility"]),i=e=>{r(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},d=(e,a)=>{a?t([...s,e]):t(s.filter(s=>s!==e))};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6",children:[(0,l.jsx)("button",{onClick:()=>{t(q.flatMap(e=>e.features).filter(e=>e.recommended).map(e=>e.key))},className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:"推奨特徴量を選択"}),(0,l.jsx)("button",{onClick:()=>{t(q.flatMap(e=>e.features).map(e=>e.key))},className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"すべて選択"}),(0,l.jsx)("button",{onClick:()=>{t([])},className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors",children:"すべてクリア"})]}),q.map(e=>(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,l.jsxs)("button",{onClick:()=>i(e.id),className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[a.includes(e.id)?(0,l.jsx)(F.A,{className:"h-4 w-4 text-gray-500"}):(0,l.jsx)(P.A,{className:"h-4 w-4 text-gray-500"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,l.jsx)(O.default,{content:"".concat(e.name,"の特徴量について：\n").concat(e.description,"\n\n各特徴量の詳細は展開してご確認ください。")})]}),a.includes(e.id)&&(0,l.jsx)("div",{className:"px-4 pb-4 border-t border-gray-100",children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:e.features.map(e=>(0,l.jsxs)("label",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,l.jsx)("input",{type:"checkbox",checked:s.includes(e.key),onChange:s=>d(e.key,s.target.checked),className:"mt-1 rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.label}),e.recommended&&(0,l.jsx)("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-800 rounded-full",children:"推奨"}),(0,l.jsx)(O.default,{content:e.description})]}),(0,l.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description})]})]},e.key))})})]},e.id)),(0,l.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"選択された特徴量"}),(0,l.jsxs)("p",{className:"text-sm text-blue-700",children:[s.length,"個の特徴量が選択されています"]})]}),(0,l.jsx)("div",{className:"text-sm text-blue-600",children:s.length>0?(0,l.jsxs)("span",{className:"font-medium",children:["推奨: ",q.flatMap(e=>e.features).filter(e=>e.recommended&&s.includes(e.key)).length,"個"]}):(0,l.jsx)("span",{className:"text-gray-500",children:"特徴量を選択してください"})})]})})]})}var M=t(7072),D=t(9676);let J=[{id:"xgboost",name:"XGBoost",description:"勾配ブースティングによる高精度な予測モデル",speed:"medium",accuracy:"high",useCase:"高精度な予測が必要な場合",pros:["高い予測精度","過学習に強い","特徴量の重要度を分析可能"],cons:["計算時間が長い","パラメータ調整が複雑"],recommended:!0},{id:"random_forest",name:"Random Forest",description:"複数の決定木を組み合わせたアンサンブル学習",speed:"fast",accuracy:"high",useCase:"バランスの取れた性能を求める場合",pros:["高速処理","過学習に強い","解釈しやすい"],cons:["大量データではメモリ使用量が多い"],recommended:!0},{id:"linear_regression",name:"線形回帰",description:"線形関係を仮定したシンプルな予測モデル",speed:"fast",accuracy:"medium",useCase:"シンプルで高速な予測が必要な場合",pros:["高速処理","解釈しやすい","計算リソースが少ない"],cons:["非線形関係を捉えられない","精度に限界"],recommended:!1},{id:"ridge",name:"Ridge回帰",description:"正則化を加えた線形回帰の改良版",speed:"fast",accuracy:"medium",useCase:"過学習を防ぎたい場合",pros:["過学習に強い","高速処理","パラメータ調整が簡単"],cons:["線形関係の仮定が必要","非線形関係を捉えられない"],recommended:!1}];function z(e){let{selectedModel:s,onModelChange:t,compareModels:a,onCompareChange:r}=e,[i,d]=(0,n.useState)(null),o=e=>{switch(e){case"fast":return(0,l.jsx)(M.A,{className:"h-4 w-4 text-green-600"});case"medium":return(0,l.jsx)(A.A,{className:"h-4 w-4 text-yellow-600"});case"slow":return(0,l.jsx)(A.A,{className:"h-4 w-4 text-red-600"});default:return(0,l.jsx)(A.A,{className:"h-4 w-4 text-gray-600"})}},c=e=>{switch(e){case"high":return(0,l.jsx)(D.A,{className:"h-4 w-4 text-green-600"});case"medium":return(0,l.jsx)(D.A,{className:"h-4 w-4 text-yellow-600"});case"low":return(0,l.jsx)(D.A,{className:"h-4 w-4 text-red-600"});default:return(0,l.jsx)(D.A,{className:"h-4 w-4 text-gray-600"})}},m=e=>{switch(e){case"fast":return"高速";case"medium":return"中速";case"slow":return"低速";default:return"不明"}},x=e=>{switch(e){case"high":return"高精度";case"medium":return"中精度";case"low":return"低精度";default:return"不明"}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,l.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)(N.A,{className:"h-6 w-6 text-blue-600"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-blue-900",children:"自動モデル比較"}),(0,l.jsx)(O.default,{content:"複数のモデルを同時に実行し、最も性能の良いモデルを自動選択します。初心者におすすめの設定です。"})]}),(0,l.jsx)("p",{className:"text-sm text-blue-700 mb-4",children:"初心者の方は「自動比較」を有効にすることで、最適なモデルが自動的に選択されます。"}),(0,l.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,l.jsx)("input",{type:"checkbox",checked:a,onChange:e=>r(e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"自動モデル比較を有効にする"})]}),a&&(0,l.jsx)("div",{className:"mt-3 p-3 bg-blue-100 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(p.A,{className:"h-4 w-4 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-blue-800",children:"推奨設定が有効になりました。複数のモデルが自動的に比較されます。"})]})})]})]})}),!a&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"モデル選択"}),(0,l.jsx)(O.default,{content:"自動比較を無効にした場合、使用するモデルを手動で選択できます。各モデルの特徴を確認して選択してください。"})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:J.map(e=>(0,l.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition-all ".concat(s===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),onClick:()=>t(e.id),children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"radio",name:"model",value:e.id,checked:s===e.id,onChange:()=>t(e.id),className:"text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),e.recommended&&(0,l.jsx)("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-800 rounded-full",children:"推奨"})]}),(0,l.jsx)(O.default,{content:"".concat(e.name,"について：\n").concat(e.description,"\n\n詳細はクリックして展開してください。")})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[o(e.speed),(0,l.jsx)("span",{children:m(e.speed)})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[c(e.accuracy),(0,l.jsx)("span",{children:x(e.accuracy)})]})]}),(0,l.jsx)("button",{onClick:s=>{s.stopPropagation(),d(i===e.id?null:e.id)},className:"mt-2 text-xs text-blue-600 hover:text-blue-800",children:i===e.id?"詳細を閉じる":"詳細を表示"}),i===e.id&&(0,l.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-1",children:"適用場面"}),(0,l.jsx)("p",{className:"text-xs text-gray-600",children:e.useCase})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-1",children:"メリット"}),(0,l.jsx)("ul",{className:"text-xs text-gray-600 space-y-1",children:e.pros.map((e,s)=>(0,l.jsxs)("li",{className:"flex items-start space-x-1",children:[(0,l.jsx)(p.A,{className:"h-3 w-3 text-green-500 mt-0.5 flex-shrink-0"}),(0,l.jsx)("span",{children:e})]},s))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"text-xs font-medium text-gray-700 mb-1",children:"デメリット"}),(0,l.jsx)("ul",{className:"text-xs text-gray-600 space-y-1",children:e.cons.map((e,s)=>(0,l.jsxs)("li",{className:"flex items-start space-x-1",children:[(0,l.jsx)(g.A,{className:"h-3 w-3 text-red-500 mt-0.5 flex-shrink-0"}),(0,l.jsx)("span",{children:e})]},s))})]})]})})]},e.id))})]}),(0,l.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,l.jsx)(p.A,{className:"h-5 w-5 text-green-600 mt-0.5"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-green-900",children:"推奨設定"}),(0,l.jsx)("p",{className:"text-sm text-green-700 mt-1",children:a?"自動比較が有効です。複数のモデルが実行され、最適な結果が選択されます。":"個別モデル選択では、XGBoostまたはRandom Forestが推奨されます。"})]})]})})]})}function U(e){let{type:s,value:t,onChange:a,label:r,description:i,placeholder:d,validation:o,recommendedValue:c,className:m="",disabled:x=!1}=e,[u,h]=(0,n.useState)(null),[b,y]=(0,n.useState)(!1),v=e=>{if(o.required&&(null==e||""===e))return"この項目は必須です";if(null==e||""===e)return null;if("number"===s){let s=Number(e);if(isNaN(s))return"数値を入力してください";if(void 0!==o.min&&s<o.min)return"最小値は ".concat(o.min," です");if(void 0!==o.max&&s>o.max)return"最大値は ".concat(o.max," です")}return o.pattern&&!o.pattern.test(String(e))?"正しい形式で入力してください":o.custom?o.custom(e):null};(0,n.useEffect)(()=>{b&&h(v(t))},[t,b,o]);let f=void 0!==c&&t===c,j=u&&b,N=!u&&b&&null!=t&&""!==t;return(0,l.jsxs)("div",{className:"space-y-2 ".concat(m),children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[r,i&&(0,l.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",i,")"]})]}),(0,l.jsx)(O.default,{content:u||"",className:"w-full",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:s,value:t||"",onChange:e=>{a("number"===s?Number(e.target.value):e.target.value),b||y(!0)},onBlur:()=>{y(!0),h(v(t))},onFocus:()=>{y(!0)},placeholder:d,disabled:x,className:"w-full rounded-md border shadow-sm focus:ring-2 focus:ring-offset-0 ".concat(j?"border-red-300 focus:border-red-500 focus:ring-red-500":N?"border-green-300 focus:border-green-500 focus:ring-green-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"," ").concat(x?"bg-gray-100 cursor-not-allowed":"")}),(0,l.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:[j&&(0,l.jsx)(g.A,{className:"h-4 w-4 text-red-500"}),N&&(0,l.jsx)(p.A,{className:"h-4 w-4 text-green-500"}),f&&!j&&!N&&(0,l.jsx)("div",{className:"h-2 w-2 bg-blue-500 rounded-full"})]})]})}),void 0!==c&&(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,l.jsx)("span",{className:"text-gray-500",children:"推奨値:"}),(0,l.jsx)("span",{className:"px-2 py-1 rounded ".concat(t===c?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:c}),t!==c&&(0,l.jsx)("button",{onClick:()=>a(c),className:"text-blue-600 hover:text-blue-800 underline",children:"推奨値に設定"})]}),(void 0!==o.min||void 0!==o.max)&&(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["範囲: ",void 0!==o.min?o.min:"制限なし"," ～ ",void 0!==o.max?o.max:"制限なし"]})]})}let B={predictionDays:{min:1,max:365,required:!0,custom:e=>e<7?"予測期間が短すぎます。最低7日以上を推奨します。":e>90?"予測期間が長すぎます。90日以下を推奨します。":null},maxDataPoints:{min:100,max:1e4,required:!0,custom:e=>e<500?"データポイント数が少なすぎます。最低500以上を推奨します。":e>5e3?"データポイント数が多すぎます。5000以下を推奨します。":null},refreshRate:{min:1,max:3600,required:!0,custom:e=>e<5?"更新間隔が短すぎます。最低5秒以上を推奨します。":e>300?"更新間隔が長すぎます。300秒以下を推奨します。":null}};var V=t(3890);function W(){var e,s,t,A,I,L,T,F,P,q,M,D,J,W,G,H,X,Q,K,Y,Z,$,ee,es,et,ea,er,el,en,ei,ed,eo,ec,em,ex,eu,eh,ep,eg,eb,ey,ev,ef,ej,eN,e_,ew,ek,eC,eS,eA,eI;let{settings:eL,updateSettings:eT,saveSettings:eE,resetSettings:eO,isLoading:eF,isSaving:eP}=(0,S.t)(),[eq,eR]=(0,n.useState)(""),[eM,eD]=(0,n.useState)(""),[eJ,ez]=(0,n.useState)(null),[eU,eB]=(0,n.useState)(!1),[eV,eW]=(0,n.useState)(!1),[eG,eH]=(0,n.useState)(""),[eX,eQ]=(0,n.useState)(""),[eK,eY]=(0,n.useState)(null),[eZ,e$]=(0,n.useState)(!1),{runAnalysisWithSettings:e0,isAnalyzing:e1,analysisProgress:e2,analysisStatus:e5,getAnalysisDescription:e6}=(0,C.P)(),e3=(e,s)=>{eR(e),eD(s),setTimeout(()=>{eR(""),eD("")},3e3)},e4=async()=>{try{await eE(),e3("設定が正常に保存されました","success")}catch(e){console.error("設定保存エラー:",e),e3("設定の保存に失敗しました","error")}},e7=async()=>{try{let e=await fetch("/api/config/export",{cache:"no-store"}),s=await e.json();if(!(null==s?void 0:s.ok))throw Error("エクスポート失敗");let t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="config_export.json",r.click(),URL.revokeObjectURL(a),e3("設定をエクスポートしました","success")}catch(e){console.error(e),e3("エクスポートに失敗しました","error")}},e8=async e=>{let s=await e.text();eH(s);try{let e=JSON.parse(s),t=await fetch("/api/config/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok||!(null==a?void 0:a.ok)){eY((null==a?void 0:a.validation)||null),e3("インポート検証に失敗しました（保存されていません）","error");return}eY(a.validation),e3("インポートと保存が完了しました","success")}catch(e){console.error(e),e3("インポートに失敗しました（ファイル形式を確認）","error")}},e9=async()=>{try{var e,s;e$(!0);let t=await fetch("/api/config/validate",{method:"GET",cache:"no-store"}),a=await t.json();eY((null==a?void 0:a.result)||null),(null==a?void 0:null===(s=a.result)||void 0===s?void 0:null===(e=s.summary)||void 0===e?void 0:e.is_valid)?e3("検証成功：エラーはありません","success"):e3("検証完了：修正が必要です","error")}catch(e){console.error(e),e3("検証に失敗しました","error")}finally{e$(!1)}},se=async()=>{try{eB(!0);let e=await fetch("/api/risk-settings",{cache:"no-store"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();ez(s)}catch(e){console.error("リスク設定読み込みエラー:",e),ez({riskTolerance:"medium",maxLossPercentage:5,stopLossPercentage:3,takeProfitPercentage:10,maxPositionSize:10,diversificationLevel:"medium",rebalanceFrequency:"monthly",volatilityThreshold:.2,correlationThreshold:.7,sectorLimits:{technology:30,healthcare:20,finance:15,consumer:15,industrial:10,utilities:5,energy:5},countryLimits:{japan:60,usa:25,europe:10,asia:5},assetAllocation:{stocks:70,bonds:20,cash:10},riskMetrics:{maxDrawdown:15,sharpeRatio:1,volatility:.15},notifications:{priceAlerts:!0,riskAlerts:!0,rebalanceAlerts:!0,newsAlerts:!1},advanced:{useOptions:!1,useLeverage:!1,useShortSelling:!1,useDerivatives:!1}})}finally{eB(!1)}};(0,n.useEffect)(()=>{se()},[]);let ss=async()=>{try{var e,s;eW(!0);let t=null==eJ?void 0:null===(e=eJ.maxLoss)||void 0===e?void 0:e.max_loss_percent;if("number"==typeof t&&(t<=0||t>.5)){e3("最大損失率は 0 < p <= 0.5 で指定してください","error");return}let a=await fetch("/api/risk-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(eJ)}),r=await a.json();if(!a.ok||(null==r?void 0:r.ok)===!1){let e=(null==r?void 0:null===(s=r.errors)||void 0===s?void 0:s.join("\n"))||"保存に失敗しました";e3(e,"error");return}ez(r.settings||r),e3("リスク設定を保存し即時適用しました","success")}catch(e){console.error("リスク設定保存エラー:",e),e3("リスク設定の保存に失敗しました","error")}finally{eW(!1)}},st=(e,s)=>{ez(t=>{let r=t?(0,a._)({},t):{},l=e.split("."),n=r;for(let e=0;e<l.length-1;e++){var i;n[l[e]]=null!==(i=n[l[e]])&&void 0!==i?i:{},n=n[l[e]]}return n[l[l.length-1]]=s,r})},sa=async()=>{try{e3("設定に基づく分析を実行しています...","success");let e=await e0({analysisType:"comprehensive",useSettings:!0});e.success?e3("分析が完了しました","success"):e3("分析エラー: ".concat(e.error),"error")}catch(e){console.error("分析実行エラー:",e),e3("分析の実行に失敗しました","error")}};return eF?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,l.jsx)("p",{className:"mt-4 text-gray-600",children:"設定を読み込み中..."})]})}):(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(d.default,{}),(0,l.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"システム設定"}),(0,l.jsx)("p",{className:"text-gray-600",children:"予測システムの動作を設定"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(V.A,{}),(0,l.jsx)("button",{onClick:sa,disabled:e1,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50",children:e1?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"実行中..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"設定で分析実行"]})}),(0,l.jsxs)("button",{onClick:()=>{confirm("設定をリセットしますか？")&&(eO(),e3("設定がリセットされました","success"))},className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,l.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"リセット"]}),(0,l.jsxs)("button",{onClick:e4,disabled:eP,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:[(0,l.jsx)(m.A,{className:"h-4 w-4 mr-2"}),eP?"保存中...":"保存"]}),(0,l.jsxs)("button",{onClick:e7,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,l.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"エクスポート"]}),(0,l.jsxs)("label",{className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:[(0,l.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"インポート",(0,l.jsx)("input",{type:"file",accept:"application/json",className:"hidden",onChange:e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&e8(t)}})]}),(0,l.jsxs)("button",{onClick:e9,disabled:eZ,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[(0,l.jsx)(h.A,{className:"h-4 w-4 mr-2"}),eZ?"検証中...":"検証"]})]})]})})}),eq&&(0,l.jsx)("div",{className:"fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ".concat("success"===eM?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:(0,l.jsxs)("div",{className:"flex items-center",children:["success"===eM?(0,l.jsx)(p.A,{className:"h-5 w-5 mr-2"}):(0,l.jsx)(g.A,{className:"h-5 w-5 mr-2"}),eq]})}),(0,l.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,l.jsx)("div",{className:"w-full lg:w-1/4",children:(0,l.jsxs)("nav",{className:"bg-white rounded-lg shadow p-4 sticky top-8",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"設定メニュー"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("a",{href:"#prediction",className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:"予測設定"}),(0,l.jsx)("a",{href:"#features",className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:"特徴量設定"}),(0,l.jsx)("a",{href:"#model",className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:"モデル設定"}),(0,l.jsx)("a",{href:"#data",className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:"データ設定"}),(0,l.jsx)("a",{href:"#ui",className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:"UI設定"}),(0,l.jsx)("a",{href:"#system",className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:"システム情報"}),(0,l.jsx)("a",{href:"#notifications",className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900",children:"自動更新・通知"}),(0,l.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,l.jsxs)(i.default,{href:"/usage",className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium text-blue-600 hover:bg-blue-50 hover:text-blue-700",children:[(0,l.jsx)(b.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"使い方ガイド"})]})})]})]})}),(0,l.jsx)("div",{className:"w-full lg:w-3/4",children:(0,l.jsxs)("div",{className:"space-y-8",children:[(eG||eK)&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsx)(y.A,{className:"h-6 w-6 text-gray-600 mr-3"}),(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"設定プレビュー / 検証結果"})]}),eG&&(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"インポートファイルの内容（JSON）"}),(0,l.jsx)("pre",{className:"p-3 bg-gray-50 rounded overflow-auto text-xs max-h-64 whitespace-pre-wrap",children:eG})]}),eK&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"検証結果サマリー"}),(0,l.jsxs)("div",{className:"text-sm grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{children:["Issues: ",(0,l.jsx)("span",{className:"font-semibold",children:null!==(ej=null==eK?void 0:null===(e=eK.summary)||void 0===e?void 0:e.total_issues)&&void 0!==ej?ej:"-"})]}),(0,l.jsxs)("div",{children:["Errors: ",(0,l.jsx)("span",{className:"font-semibold text-red-600",children:null!==(eN=null==eK?void 0:null===(s=eK.summary)||void 0===s?void 0:s.errors)&&void 0!==eN?eN:"-"})]}),(0,l.jsxs)("div",{children:["Warnings: ",(0,l.jsx)("span",{className:"font-semibold text-yellow-600",children:null!==(e_=null==eK?void 0:null===(t=eK.summary)||void 0===t?void 0:t.warnings)&&void 0!==e_?e_:"-"})]}),(0,l.jsxs)("div",{children:["Valid: ",(0,l.jsx)("span",{className:"font-semibold {validationResult?.summary?.is_valid ? 'text-green-600' : 'text-red-600'}",children:String(null==eK?void 0:null===(A=eK.summary)||void 0===A?void 0:A.is_valid)})]})]}),(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"詳細"}),(0,l.jsx)("div",{className:"max-h-64 overflow-auto text-xs",children:(0,l.jsx)("ul",{className:"list-disc list-inside space-y-1",children:((null==eK?void 0:eK.results)||[]).map((e,s)=>(0,l.jsxs)("li",{className:"error"===e.level||"critical"===e.level?"text-red-700":"warning"===e.level?"text-yellow-700":"text-gray-700",children:["[",e.level,"] ",e.section,".",e.key,": ",e.message]},s))})})]})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsx)(y.A,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"現在の設定"})]}),(()=>{let e=e6();return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"予測期間:"}),(0,l.jsx)("span",{className:"font-medium",children:e.prediction})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"モデル設定:"}),(0,l.jsx)("span",{className:"font-medium",children:e.model})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"再訓練:"}),(0,l.jsx)("span",{className:"font-medium",children:e.retrain})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"特徴量:"}),(0,l.jsx)("span",{className:"font-medium",children:e.features})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"データ量:"}),(0,l.jsx)("span",{className:"font-medium",children:e.data})]})]})]})})(),e1&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-white rounded-lg border",children:[(0,l.jsxs)("div",{className:"flex items-center mb-2",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"分析実行中..."})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e2,"%")}})}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e5})]})]}),(0,l.jsxs)("div",{id:"prediction",className:"bg-white rounded-lg shadow p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)(v.A,{className:"h-6 w-6 text-purple-600 mr-3"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"予測設定"}),(0,l.jsx)(O.default,{content:"予測設定では、分析の期間と使用するモデルを設定できます。\\n\\n予測期間：将来何日先まで予測するかを設定\\n使用モデル：どの機械学習モデルを使用するかを選択",children:(0,l.jsx)(f.A,{className:"h-4 w-4 text-gray-400 hover:text-gray-600 transition-colors"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsx)(U,{type:"number",value:eL.prediction.days,onChange:e=>eT({prediction:(0,r._)((0,a._)({},eL.prediction),{days:e})}),label:"予測期間（日数）",description:"将来何日先まで予測するか",validation:B.predictionDays,recommendedValue:30,placeholder:"30"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["使用するモデル",(0,l.jsx)(O.default,{content:"使用する機械学習モデルを選択します。\\n\\n・すべてのモデル：複数のモデルを比較して最適な結果を選択\\n・個別モデル：特定のモデルのみを使用"})]}),(0,l.jsxs)("select",{value:eL.model.type,onChange:e=>eT({model:(0,r._)((0,a._)({},eL.model),{type:e.target.value})}),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"all",children:"すべてのモデル（推奨）"}),(0,l.jsx)("option",{value:"linear",children:"線形回帰"}),(0,l.jsx)("option",{value:"random_forest",children:"ランダムフォレスト"}),(0,l.jsx)("option",{value:"xgboost",children:"XGBoost"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"推奨：すべてのモデルを選択すると、最適な結果が自動選択されます"})]})]})]}),(0,l.jsxs)("div",{id:"features",className:"bg-white rounded-lg shadow p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)(j.A,{className:"h-6 w-6 text-green-600 mr-3"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"特徴量設定"}),(0,l.jsx)(O.default,{content:"特徴量設定では、分析に使用する技術指標を選択できます。\\n\\n特徴量は予測精度に大きく影響するため、推奨設定を使用することをお勧めします。\\n各特徴量の詳細は展開してご確認ください。"})]}),(0,l.jsx)(R,{selectedFeatures:eL.features.selected,onFeatureChange:e=>eT({features:(0,r._)((0,a._)({},eL.features),{selected:e})})})]}),(0,l.jsxs)("div",{id:"model",className:"bg-white rounded-lg shadow p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)(N.A,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"モデル設定"}),(0,l.jsx)(O.default,{content:"モデル設定では、機械学習モデルの選択と動作を設定できます。\\n\\n初心者の方は「自動モデル比較」を有効にすることをお勧めします。\\nこれにより、最適なモデルが自動的に選択されます。"})]}),(0,l.jsx)(z,{selectedModel:eL.model.primary_model,onModelChange:e=>eT({model:(0,r._)((0,a._)({},eL.model),{primary_model:e})}),compareModels:eL.model.compare_models,onCompareChange:e=>eT({model:(0,r._)((0,a._)({},eL.model),{compare_models:e})})}),(0,l.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["再訓練頻度",(0,l.jsx)(O.default,{content:"モデルの再訓練頻度を設定します。\\n\\n・毎日：最新データで毎日モデルを更新（高精度だが計算負荷大）\\n・毎週：週1回モデルを更新（バランス型）\\n・毎月：月1回モデルを更新（計算負荷軽）\\n・手動：手動で再訓練を実行"})]}),(0,l.jsxs)("select",{value:eL.model.retrain_frequency,onChange:e=>eT({model:(0,r._)((0,a._)({},eL.model),{retrain_frequency:e.target.value})}),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"daily",children:"毎日（高精度）"}),(0,l.jsx)("option",{value:"weekly",children:"毎週（推奨）"}),(0,l.jsx)("option",{value:"monthly",children:"毎月（軽量）"}),(0,l.jsx)("option",{value:"manual",children:"手動"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"推奨：毎週（バランスの取れた設定）"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:eL.model.auto_retrain,onChange:e=>eT({model:(0,r._)((0,a._)({},eL.model),{auto_retrain:e.target.checked})}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"自動再訓練を有効にする"}),(0,l.jsx)(O.default,{content:"自動再訓練を有効にすると、設定した頻度でモデルが自動的に更新されます。\\n\\nメリット：\\n・常に最新データで学習されたモデルを使用\\n・予測精度の向上\\n\\n注意：\\n・再訓練中は一時的に分析機能が制限される場合があります"})]}),(0,l.jsxs)("div",{className:"ml-6 text-xs text-gray-500",children:[(0,l.jsx)("p",{children:"• 設定した頻度でモデルを自動的に再訓練します"}),(0,l.jsx)("p",{children:"• 新しいデータに基づいてモデルの精度を向上させます"}),(0,l.jsx)("p",{children:"• 再訓練はバックグラウンドで実行され、完了時に通知されます"})]})]})]})]}),(0,l.jsxs)("div",{id:"hyperparameters",className:"bg-white rounded-lg shadow p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)(N.A,{className:"h-6 w-6 text-purple-600 mr-3"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"ハイパーパラメータ設定"}),(0,l.jsx)("span",{className:"ml-3 px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full",children:"上級者向け"})]}),(0,l.jsx)("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)(_.A,{className:"h-5 w-5 text-yellow-600 mr-2 mt-0.5"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-yellow-800",children:"注意事項"}),(0,l.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"ハイパーパラメータの変更はモデルの性能に大きく影響します。不適切な設定は予測精度の低下を招く可能性があります。 変更前には必ずバックアップを取ることを推奨します。"})]})]})}),(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"XGBoost"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"n_estimators"}),(0,l.jsx)("input",{type:"number",min:"10",max:"1000",step:"10",value:(null===(L=eL.hyperparameters)||void 0===L?void 0:null===(I=L.xgboost)||void 0===I?void 0:I.n_estimators)||100,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{xgboost:(0,r._)((0,a._)({learning_rate:.1,max_depth:6,subsample:.8,colsample_bytree:.8,reg_alpha:.1},null===(s=eL.hyperparameters)||void 0===s?void 0:s.xgboost),{n_estimators:parseInt(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"ブースティングラウンド数 (10-1000)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"learning_rate"}),(0,l.jsx)("input",{type:"number",min:"0.01",max:"1.0",step:"0.01",value:(null===(F=eL.hyperparameters)||void 0===F?void 0:null===(T=F.xgboost)||void 0===T?void 0:T.learning_rate)||.1,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{xgboost:(0,r._)((0,a._)({n_estimators:100,max_depth:6,subsample:.8,colsample_bytree:.8,reg_alpha:.1},null===(s=eL.hyperparameters)||void 0===s?void 0:s.xgboost),{learning_rate:parseFloat(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"学習率 (0.01-1.0)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"max_depth"}),(0,l.jsx)("input",{type:"number",min:"1",max:"20",step:"1",value:(null===(q=eL.hyperparameters)||void 0===q?void 0:null===(P=q.xgboost)||void 0===P?void 0:P.max_depth)||6,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{xgboost:(0,r._)((0,a._)({n_estimators:100,learning_rate:.1,subsample:.8,colsample_bytree:.8,reg_alpha:.1},null===(s=eL.hyperparameters)||void 0===s?void 0:s.xgboost),{max_depth:parseInt(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"木の最大深度 (1-20)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"subsample"}),(0,l.jsx)("input",{type:"number",min:"0.1",max:"1.0",step:"0.1",value:(null===(D=eL.hyperparameters)||void 0===D?void 0:null===(M=D.xgboost)||void 0===M?void 0:M.subsample)||1,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{xgboost:(0,r._)((0,a._)({n_estimators:100,learning_rate:.1,max_depth:6,colsample_bytree:.8,reg_alpha:.1},null===(s=eL.hyperparameters)||void 0===s?void 0:s.xgboost),{subsample:parseFloat(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"サンプリング比率 (0.1-1.0)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"colsample_bytree"}),(0,l.jsx)("input",{type:"number",min:"0.1",max:"1.0",step:"0.1",value:(null===(W=eL.hyperparameters)||void 0===W?void 0:null===(J=W.xgboost)||void 0===J?void 0:J.colsample_bytree)||1,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{xgboost:(0,r._)((0,a._)({n_estimators:100,learning_rate:.1,max_depth:6,subsample:.8,reg_alpha:.1},null===(s=eL.hyperparameters)||void 0===s?void 0:s.xgboost),{colsample_bytree:parseFloat(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"特徴量サンプリング比率 (0.1-1.0)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"reg_alpha"}),(0,l.jsx)("input",{type:"number",min:"0",max:"10",step:"0.1",value:(null===(H=eL.hyperparameters)||void 0===H?void 0:null===(G=H.xgboost)||void 0===G?void 0:G.reg_alpha)||0,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{xgboost:(0,r._)((0,a._)({n_estimators:100,learning_rate:.1,max_depth:6,subsample:.8,colsample_bytree:.8},null===(s=eL.hyperparameters)||void 0===s?void 0:s.xgboost),{reg_alpha:parseFloat(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"L1正則化 (0-10)"})]})]})]}),(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Random Forest"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"n_estimators"}),(0,l.jsx)("input",{type:"number",min:"10",max:"500",step:"10",value:(null===(Q=eL.hyperparameters)||void 0===Q?void 0:null===(X=Q.random_forest)||void 0===X?void 0:X.n_estimators)||100,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{random_forest:(0,r._)((0,a._)({max_depth:10,min_samples_split:2,min_samples_leaf:1,max_features:"sqrt",bootstrap:!0},null===(s=eL.hyperparameters)||void 0===s?void 0:s.random_forest),{n_estimators:parseInt(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"決定木の数 (10-500)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"max_depth"}),(0,l.jsx)("input",{type:"number",min:"1",max:"50",step:"1",value:(null===(Y=eL.hyperparameters)||void 0===Y?void 0:null===(K=Y.random_forest)||void 0===K?void 0:K.max_depth)||10,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{random_forest:(0,r._)((0,a._)({n_estimators:100,min_samples_split:2,min_samples_leaf:1,max_features:"sqrt",bootstrap:!0},null===(s=eL.hyperparameters)||void 0===s?void 0:s.random_forest),{max_depth:parseInt(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"木の最大深度 (1-50)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"min_samples_split"}),(0,l.jsx)("input",{type:"number",min:"2",max:"20",step:"1",value:(null===($=eL.hyperparameters)||void 0===$?void 0:null===(Z=$.random_forest)||void 0===Z?void 0:Z.min_samples_split)||2,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{random_forest:(0,r._)((0,a._)({n_estimators:100,max_depth:10,min_samples_leaf:1,max_features:"sqrt",bootstrap:!0},null===(s=eL.hyperparameters)||void 0===s?void 0:s.random_forest),{min_samples_split:parseInt(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"分割に必要な最小サンプル数 (2-20)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"min_samples_leaf"}),(0,l.jsx)("input",{type:"number",min:"1",max:"10",step:"1",value:(null===(es=eL.hyperparameters)||void 0===es?void 0:null===(ee=es.random_forest)||void 0===ee?void 0:ee.min_samples_leaf)||1,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{random_forest:(0,r._)((0,a._)({n_estimators:100,max_depth:10,min_samples_split:2,max_features:"sqrt",bootstrap:!0},null===(s=eL.hyperparameters)||void 0===s?void 0:s.random_forest),{min_samples_leaf:parseInt(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"葉ノードの最小サンプル数 (1-10)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"max_features"}),(0,l.jsxs)("select",{value:(null===(ea=eL.hyperparameters)||void 0===ea?void 0:null===(et=ea.random_forest)||void 0===et?void 0:et.max_features)||"sqrt",onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{random_forest:(0,r._)((0,a._)({n_estimators:100,max_depth:10,min_samples_split:2,min_samples_leaf:1,bootstrap:!0},null===(s=eL.hyperparameters)||void 0===s?void 0:s.random_forest),{max_features:e.target.value})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"sqrt",children:"sqrt"}),(0,l.jsx)("option",{value:"log2",children:"log2"}),(0,l.jsx)("option",{value:"auto",children:"auto"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"各分割で考慮する特徴量数"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"bootstrap"}),(0,l.jsxs)("select",{value:(null===(el=eL.hyperparameters)||void 0===el?void 0:null===(er=el.random_forest)||void 0===er?void 0:er.bootstrap)?"true":"false",onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{random_forest:(0,r._)((0,a._)({n_estimators:100,max_depth:10,min_samples_split:2,min_samples_leaf:1,max_features:"sqrt"},null===(s=eL.hyperparameters)||void 0===s?void 0:s.random_forest),{bootstrap:"true"===e.target.value})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"true",children:"True"}),(0,l.jsx)("option",{value:"false",children:"False"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"ブートストラップサンプリング"})]})]})]}),(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"線形回帰・Ridge回帰"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ridge alpha"}),(0,l.jsx)("input",{type:"number",min:"0.001",max:"100",step:"0.001",value:(null===(ei=eL.hyperparameters)||void 0===ei?void 0:null===(en=ei.ridge)||void 0===en?void 0:en.alpha)||1,onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{ridge:(0,r._)((0,a._)({fit_intercept:!0,normalize:!1},null===(s=eL.hyperparameters)||void 0===s?void 0:s.ridge),{alpha:parseFloat(e.target.value)})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"正則化強度 (0.001-100)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"fit_intercept"}),(0,l.jsxs)("select",{value:(null===(eo=eL.hyperparameters)||void 0===eo?void 0:null===(ed=eo.ridge)||void 0===ed?void 0:ed.fit_intercept)?"true":"false",onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{ridge:(0,r._)((0,a._)({alpha:1,normalize:!1},null===(s=eL.hyperparameters)||void 0===s?void 0:s.ridge),{fit_intercept:"true"===e.target.value})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"true",children:"True"}),(0,l.jsx)("option",{value:"false",children:"False"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"切片項の計算"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"normalize"}),(0,l.jsxs)("select",{value:(null===(em=eL.hyperparameters)||void 0===em?void 0:null===(ec=em.ridge)||void 0===ec?void 0:ec.normalize)?"true":"false",onChange:e=>{var s;return eT({hyperparameters:(0,r._)((0,a._)({},eL.hyperparameters),{ridge:(0,r._)((0,a._)({alpha:1,fit_intercept:!0},null===(s=eL.hyperparameters)||void 0===s?void 0:s.ridge),{normalize:"true"===e.target.value})})})},className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"true",children:"True"}),(0,l.jsx)("option",{value:"false",children:"False"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"特徴量の正規化"})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"ハイパーパラメータのリセット"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"デフォルト値に戻します"})]}),(0,l.jsx)("button",{onClick:()=>{eT({hyperparameters:{xgboost:{n_estimators:100,learning_rate:.1,max_depth:6,subsample:1,colsample_bytree:1,reg_alpha:0},random_forest:{n_estimators:100,max_depth:10,min_samples_split:2,min_samples_leaf:1,max_features:"sqrt",bootstrap:!0},ridge:{alpha:1,fit_intercept:!0,normalize:!1}}})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"デフォルトに戻す"})]})]})]}),(0,l.jsxs)("div",{id:"data",className:"bg-white rounded-lg shadow p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)(j.A,{className:"h-6 w-6 text-green-600 mr-3"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"データ設定"}),(0,l.jsx)(O.default,{content:"データ設定では、データの取得頻度と処理方法を設定できます。\\n\\nデータ更新間隔：どの頻度でデータを取得するか\\n最大データポイント数：分析に使用するデータの量\\n技術指標：計算済みの技術指標を含めるかどうか"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["データ更新間隔",(0,l.jsx)(O.default,{content:"データの取得頻度を設定します。\\n\\n・リアルタイム：常に最新データを取得（高負荷）\\n・1時間ごと：1時間に1回データを更新（推奨）\\n・毎日：1日1回データを更新（軽量）\\n・毎週：1週間に1回データを更新（軽量）"})]}),(0,l.jsxs)("select",{value:eL.data.refresh_interval,onChange:e=>eT({data:(0,r._)((0,a._)({},eL.data),{refresh_interval:e.target.value})}),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"realtime",children:"リアルタイム（高負荷）"}),(0,l.jsx)("option",{value:"hourly",children:"1時間ごと（推奨）"}),(0,l.jsx)("option",{value:"daily",children:"毎日（軽量）"}),(0,l.jsx)("option",{value:"weekly",children:"毎週（軽量）"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"推奨：1時間ごと（バランスの取れた設定）"})]}),(0,l.jsx)(U,{type:"number",value:eL.data.max_data_points,onChange:e=>eT({data:(0,r._)((0,a._)({},eL.data),{max_data_points:e})}),label:"最大データポイント数",description:"分析に使用するデータの量",validation:B.maxDataPoints,recommendedValue:1e3,placeholder:"1000"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:eL.data.include_technical_indicators,onChange:e=>eT({data:(0,r._)((0,a._)({},eL.data),{include_technical_indicators:e.target.checked})}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"技術指標を含める"}),(0,l.jsx)(O.default,{content:"技術指標（RSI、MACD、ボリンジャーバンドなど）を事前計算して含めます。\\n\\nメリット：\\n・分析の高速化\\n・一貫した指標計算\\n\\nデメリット：\\n・ストレージ使用量の増加\\n・初期計算時間の増加"})]})]})]}),(0,l.jsxs)("div",{id:"ui",className:"bg-white rounded-lg shadow p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)(v.A,{className:"h-6 w-6 text-purple-600 mr-3"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"UI設定"}),(0,l.jsx)(O.default,{content:"UI設定では、画面の表示と動作を設定できます。\\n\\nテーマ：画面の色合いを選択\\n更新間隔：データの自動更新頻度\\nツールチップ：ヘルプ情報の表示"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["テーマ",(0,l.jsx)(O.default,{content:"画面の色合いを選択します。\\n\\n・ライト：明るい色合い（推奨）\\n・ダーク：暗い色合い\\n・自動：システム設定に従う"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("select",{value:eL.ui.theme,onChange:e=>eT({ui:(0,r._)((0,a._)({},eL.ui),{theme:e.target.value})}),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"light",children:"ライト（推奨）"}),(0,l.jsx)("option",{value:"dark",children:"ダーク"}),(0,l.jsx)("option",{value:"auto",children:"自動"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"推奨：ライト（視認性が良い）"})]}),(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)(V.A,{})})]})]}),(0,l.jsx)(U,{type:"number",value:eL.ui.refresh_rate,onChange:e=>eT({ui:(0,r._)((0,a._)({},eL.ui),{refresh_rate:e})}),label:"更新間隔（秒）",description:"データの自動更新頻度",validation:B.refreshRate,recommendedValue:30,placeholder:"30"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:eL.ui.show_tooltips,onChange:e=>eT({ui:(0,r._)((0,a._)({},eL.ui),{show_tooltips:e.target.checked})}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),(0,l.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"ツールチップを表示"}),(0,l.jsx)(O.default,{content:"ツールチップ（ヘルプ情報）の表示を制御します。\\n\\n有効：各項目にマウスを合わせると説明が表示されます\\n無効：ツールチップは表示されません"})]})]})]}),(0,l.jsxs)("div",{id:"notifications",className:"bg-white rounded-lg shadow p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)(w.A,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"自動更新・通知設定"})]}),(0,l.jsx)(E,{})]}),(0,l.jsxs)("div",{id:"system",className:"bg-white rounded-lg shadow p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)(y.A,{className:"h-6 w-6 text-gray-600 mr-3"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"システム情報"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"バージョン"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:"v1.0.0"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"最終更新"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:"2024-09-27"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"データソース"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:"J-Quants API"})]})]})]})]})}),(0,l.jsxs)("div",{id:"risk",className:"bg-white rounded-lg shadow p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)(k.A,{className:"h-6 w-6 text-red-600 mr-3"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"リスク管理設定"})]}),eU?(0,l.jsx)("div",{className:"text-gray-500",children:"読み込み中..."}):(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"リスク管理 全体ON/OFF"}),(0,l.jsx)("input",{type:"checkbox",checked:!!(null==eJ?void 0:eJ.enabled),onChange:e=>st("enabled",e.target.checked)})]}),(0,l.jsxs)("div",{className:"mt-4 p-4 border rounded space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"最大損失管理を有効化"}),(0,l.jsx)("input",{type:"checkbox",checked:!!(null==eJ?void 0:null===(ex=eJ.maxLoss)||void 0===ex?void 0:ex.enabled),onChange:e=>st("maxLoss.enabled",e.target.checked)})]}),(0,l.jsxs)("label",{className:"block text-sm text-gray-600",children:["最大損失率（小数, 0.05=5%）",(0,l.jsx)("input",{className:"mt-1 w-full border rounded p-2",type:"number",step:"0.005",min:"0.005",max:"0.5",value:null!==(ew=null==eJ?void 0:null===(eu=eJ.maxLoss)||void 0===eu?void 0:eu.max_loss_percent)&&void 0!==ew?ew:.05,onChange:e=>st("maxLoss.max_loss_percent",parseFloat(e.target.value))})]}),(0,l.jsxs)("label",{className:"block text-sm text-gray-600",children:["自動損切り閾値（小数, 0.08=8%）",(0,l.jsx)("input",{className:"mt-1 w-full border rounded p-2",type:"number",step:"0.005",min:"0.01",max:"0.9",value:null!==(ek=null==eJ?void 0:null===(eh=eJ.maxLoss)||void 0===eh?void 0:eh.auto_stop_loss_threshold)&&void 0!==ek?ek:.08,onChange:e=>st("maxLoss.auto_stop_loss_threshold",parseFloat(e.target.value))})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"ボラティリティ調整を有効化"}),(0,l.jsx)("input",{type:"checkbox",checked:!!(null==eJ?void 0:null===(ep=eJ.volatility)||void 0===ep?void 0:ep.enabled),onChange:e=>st("volatility.enabled",e.target.checked)})]}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("label",{className:"text-sm text-gray-600",children:["高ボラ閾値（年率）",(0,l.jsx)("input",{className:"mt-1 w-full border rounded p-2",type:"number",step:"0.05",min:"0.05",max:"2",value:null!==(eC=null==eJ?void 0:null===(eg=eJ.volatility)||void 0===eg?void 0:eg.high_vol_threshold)&&void 0!==eC?eC:.4,onChange:e=>st("volatility.high_vol_threshold",parseFloat(e.target.value))})]}),(0,l.jsxs)("label",{className:"text-sm text-gray-600",children:["極端ボラ閾値（年率）",(0,l.jsx)("input",{className:"mt-1 w-full border rounded p-2",type:"number",step:"0.05",min:"0.05",max:"2",value:null!==(eS=null==eJ?void 0:null===(eb=eJ.volatility)||void 0===eb?void 0:eb.extreme_vol_threshold)&&void 0!==eS?eS:.6,onChange:e=>st("volatility.extreme_vol_threshold",parseFloat(e.target.value))})]}),(0,l.jsxs)("label",{className:"text-sm text-gray-600",children:["高ボラ縮小係数",(0,l.jsx)("input",{className:"mt-1 w-full border rounded p-2",type:"number",step:"0.05",min:"0.1",max:"1.5",value:null!==(eA=null==eJ?void 0:null===(ey=eJ.volatility)||void 0===ey?void 0:ey.high_vol_multiplier)&&void 0!==eA?eA:.7,onChange:e=>st("volatility.high_vol_multiplier",parseFloat(e.target.value))})]}),(0,l.jsxs)("label",{className:"text-sm text-gray-600",children:["極端ボラ縮小係数",(0,l.jsx)("input",{className:"mt-1 w-full border rounded p-2",type:"number",step:"0.05",min:"0.1",max:"1.5",value:null!==(eI=null==eJ?void 0:null===(ev=eJ.volatility)||void 0===ev?void 0:ev.extreme_vol_multiplier)&&void 0!==eI?eI:.4,onChange:e=>st("volatility.extreme_vol_multiplier",parseFloat(e.target.value))})]})]}),(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsxs)("label",{className:"inline-flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:!!(null==eJ?void 0:null===(ef=eJ.enforcement)||void 0===ef?void 0:ef.block_violation_signals),onChange:e=>st("enforcement.block_violation_signals",e.target.checked)}),(0,l.jsx)("span",{className:"text-sm",children:"リスク違反提案をブロック（売買提案/執行に反映）"})]})})]})]}),(0,l.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,l.jsx)("button",{onClick:ss,disabled:eV,className:"px-4 py-2 rounded ".concat(eV?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"," text-white"),children:eV?"保存中...":"リスク設定を保存して即時適用"}),(0,l.jsx)("button",{onClick:se,className:"px-4 py-2 rounded bg-gray-100 hover:bg-gray-200",children:"再読込"})]})]})]})})]})}},9909:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(5155),r=t(7396),l=t(6046),n=t(6507),i=t(6889),d=t(2423),o=t(8701),c=t(4081),m=t(8236),x=t(3467),u=t(1594),h=t(9136),p=t(2598);function g(e){let{activeTab:s,onTabChange:t,onAnalysisClick:g,onSettingsClick:b,onMonitoringClick:y}=e,v=(0,l.usePathname)(),f=[{href:"/",label:"ダッシュボード",icon:n.A,description:"メインダッシュボード"},{href:"/five-min-routine",label:"5分ルーティン",icon:i.A,description:"効率的な投資分析ルーティン"},{href:"/today",label:"今日の投資指示",icon:d.A,description:"本日の売買候補と指示"},{href:"/listed-data",label:"銘柄一覧",icon:o.A,description:"上場銘柄検索・分析"},{href:"/reports",label:"レポート",icon:c.A,description:"詳細レポート"},{href:"/settings",label:"設定",icon:m.A,description:"システム設定"},{href:"/usage",label:"使い方",icon:x.A,description:"使用方法ガイド"},{href:"/troubleshooting",label:"トラブルシューティング",icon:u.A,description:"問題解決ガイド"}];return(0,a.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"J-Quants株価予測"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"機械学習による株価予測システム"})]})]})}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[f.map(e=>{let s=e.icon,t=v===e.href;return(0,a.jsxs)(r.default,{href:e.href,prefetch:!1,className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),title:e.description,children:[(0,a.jsx)(s,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.label})]},e.href)}),y&&(0,a.jsxs)("button",{onClick:y,className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-colors",title:"銘柄監視管理",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"銘柄監視"})]})]})]})})})}},3890:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(5155);t(2115);var r=t(3295);let l=()=>{let{theme:e,setTheme:s,effectiveTheme:t}=(0,r.D)();return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"テーマ:"}),(0,a.jsx)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[{value:"light",label:"ライト",icon:"☀️"},{value:"dark",label:"ダーク",icon:"\uD83C\uDF19"},{value:"auto",label:"自動",icon:"\uD83D\uDD04"}].map(t=>{let{value:r,label:l,icon:n}=t;return(0,a.jsxs)("button",{onClick:()=>s(r),className:"\n              flex items-center space-x-1 px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200\n              ".concat(e===r?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200","\n            "),title:"".concat(l,"テーマに切り替え"),children:[(0,a.jsx)("span",{className:"text-base",children:n}),(0,a.jsx)("span",{className:"hidden sm:inline",children:l})]},r)})}),"auto"===e&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(","dark"===t?"ダーク":"ライト",")"]})]})}},1360:(e,s,t)=>{"use strict";t.r(s),t.d(s,{HelpTooltip:()=>i,ValidationTooltip:()=>d,default:()=>n});var a=t(5155),r=t(2115),l=t(426);function n(e){let{content:s,children:t,position:n="top",className:i="",maxWidth:d="300px"}=e,[o,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)({top:0,left:0}),u=(0,r.useRef)(null),h=(0,r.useRef)(null),p=()=>{if(!u.current||!h.current)return;let e=u.current.getBoundingClientRect(),s=h.current.getBoundingClientRect(),t=window.innerWidth,a=window.innerHeight,r=0,l=0;switch(n){case"top":r=e.top-s.height-8,l=e.left+(e.width-s.width)/2;break;case"bottom":r=e.bottom+8,l=e.left+(e.width-s.width)/2;break;case"left":r=e.top+(e.height-s.height)/2,l=e.left-s.width-8;break;case"right":r=e.top+(e.height-s.height)/2,l=e.right+8}l<8&&(l=8),l+s.width>t-8&&(l=t-s.width-8),r<8&&(r=8),r+s.height>a-8&&(r=a-s.height-8),x({top:r,left:l})};return(0,r.useEffect)(()=>{if(o){p();let e=()=>p(),s=()=>p();return window.addEventListener("resize",e),window.addEventListener("scroll",s),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",s)}}},[o,n]),(0,a.jsxs)("div",{className:"relative inline-block ".concat(i),children:[(0,a.jsx)("div",{ref:u,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),className:"cursor-help",children:t||(0,a.jsx)(l.A,{className:"h-4 w-4 text-gray-400 hover:text-gray-600 transition-colors"})}),o&&(0,a.jsxs)("div",{ref:h,className:"fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none",style:{top:m.top,left:m.left,maxWidth:d},children:[(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:s}),(0,a.jsx)("div",{className:"absolute w-2 h-2 bg-gray-900 transform rotate-45 ".concat("top"===n?"top-full left-1/2 -translate-x-1/2 -translate-y-1/2":"bottom"===n?"bottom-full left-1/2 -translate-x-1/2 translate-y-1/2":"left"===n?"left-full top-1/2 -translate-y-1/2 -translate-x-1/2":"right-full top-1/2 -translate-y-1/2 translate-x-1/2")})]})]})}function i(e){let{content:s,className:t=""}=e;return(0,a.jsx)(n,{content:s,className:t,children:(0,a.jsx)(l.A,{className:"h-4 w-4 text-gray-400 hover:text-gray-600 transition-colors"})})}function d(e){let{isValid:s,message:t,children:l,className:n=""}=e,[i,d]=(0,r.useState)(!1);return s?(0,a.jsx)(a.Fragment,{children:l}):(0,a.jsxs)("div",{className:"relative ".concat(n),children:[(0,a.jsxs)("div",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:"relative",children:[l,(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"})]}),i&&(0,a.jsxs)("div",{className:"absolute z-50 px-3 py-2 text-sm text-white bg-red-600 rounded-lg shadow-lg pointer-events-none top-full left-0 mt-1",children:[(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:t}),(0,a.jsx)("div",{className:"absolute -top-1 left-4 w-2 h-2 bg-red-600 transform rotate-45"})]})]})}},7581:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d,t:()=>o});var a=t(9233),r=t(5155),l=t(2115);let n={prediction:{days:30},model:{type:"all",primary_model:"xgboost",compare_models:!0,auto_retrain:!1,retrain_frequency:"weekly"},data:{refresh_interval:"daily",max_data_points:1e3,include_technical_indicators:!0},features:{selected:["sma_5","sma_10","sma_25","sma_50","rsi","macd"]},ui:{theme:"light",refresh_rate:30,show_tooltips:!0}},i=(0,l.createContext)(void 0);function d(e){let{children:s}=e,[t,d]=(0,l.useState)(n),[o,c]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),u=async()=>{try{c(!0);let e=localStorage.getItem("jquants-settings");if(e){let s=JSON.parse(e);d(e=>(0,a._)({},e,s))}}catch(e){console.error("設定の読み込みに失敗:",e)}finally{c(!1)}},h=async()=>{try{x(!0),localStorage.setItem("jquants-settings",JSON.stringify(t))}catch(e){throw console.error("設定保存エラー:",e),e}finally{x(!1)}};return(0,l.useEffect)(()=>{(async()=>{try{c(!0);let e=localStorage.getItem("jquants-settings");if(e){let s=JSON.parse(e);d(e=>(0,a._)({},e,s))}}catch(e){console.error("設定の読み込みに失敗:",e)}finally{c(!1)}})()},[]),(0,r.jsx)(i.Provider,{value:{settings:t,updateSettings:e=>{d(s=>(0,a._)({},s,e))},loadSettings:u,saveSettings:h,resetSettings:()=>{d(n)},isLoading:o,isSaving:m},children:s})}function o(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}},3295:(e,s,t)=>{"use strict";t.d(s,{D:()=>n,N:()=>i});var a=t(5155),r=t(2115);let l=(0,r.createContext)(void 0),n=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e},i=e=>{let{children:s}=e,[t,n]=(0,r.useState)("auto"),[i,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)");d(e.matches);let s=e=>{d(e.matches)};return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("theme");e&&["light","dark","auto","blue","green","purple"].includes(e)?n(e):n("auto")},[]);let o=e=>{n(e),localStorage.setItem("theme",e)},c="auto"===t?i?"dark":"light":"blue"===t||"green"===t||"purple"===t?"light":t,m="dark"===c;return(0,r.useEffect)(()=>{let e=document.documentElement;e.classList.remove("theme-light","theme-dark","theme-blue","theme-green","theme-purple"),e.classList.add("theme-".concat(t)),e.setAttribute("data-theme",t),e.setAttribute("data-effective-theme",c)},[t,c]),(0,a.jsx)(l.Provider,{value:{theme:t,setTheme:o,toggleTheme:()=>{o("light"===t?"dark":"dark"===t?"auto":"light")},isDark:m,effectiveTheme:c},children:s})}},4561:(e,s,t)=>{"use strict";t.d(s,{P:()=>l});var a=t(2115),r=t(7581);function l(){let{settings:e}=(0,r.t)(),[s,t]=(0,a.useState)(!1),[l,n]=(0,a.useState)(0),[i,d]=(0,a.useState)("");return{runAnalysisWithSettings:async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{t(!0),n(0),d("設定に基づく分析を開始しています...");let a={prediction_days:e.prediction.days,primary_model:e.model.primary_model,compare_models:e.model.compare_models,auto_retrain:e.model.auto_retrain,retrain_frequency:e.model.retrain_frequency,max_data_points:e.data.max_data_points,include_technical_indicators:e.data.include_technical_indicators,selected_features:e.features.selected,symbols:s.symbols||[],analysis_type:s.analysisType||"comprehensive",use_settings:!1!==s.useSettings},r=setInterval(()=>{n(e=>e>=90?(clearInterval(r),e):e+10*Math.random())},500);d("分析パラメータを送信中..."),n(10),await new Promise(e=>setTimeout(e,1e3)),d("分析を実行中..."),n(50);let l={success:!0,analysis_id:"analysis_".concat(Date.now()),predictions:[{symbol:"7203.T",name:"トヨタ自動車",prediction:"BUY",confidence:.85,price:2500,change:2.5},{symbol:"6758.T",name:"ソニーグループ",prediction:"SELL",confidence:.72,price:12e3,change:-1.8}],summary:{total_predictions:2,buy_signals:1,sell_signals:1,avg_confidence:.785}};return d("分析が完了しました。データを更新しています..."),n(100),{success:!0,result:l,settings:a}}catch(e){return console.error("分析実行エラー:",e),d("分析エラー: ".concat(e instanceof Error?e.message:"不明なエラー")),{success:!1,error:e instanceof Error?e.message:"不明なエラー"}}finally{t(!1),setTimeout(()=>{n(0),d("")},2e3)}},isAnalyzing:s,analysisProgress:l,analysisStatus:i,getAnalysisDescription:()=>{let s=e.model.compare_models?"複数モデル比較（メイン: ".concat(e.model.primary_model,"）"):"単一モデル（".concat(e.model.primary_model,"）"),t=e.model.auto_retrain?"自動再訓練（".concat(e.model.retrain_frequency,"）"):"手動再訓練";return{prediction:"".concat(e.prediction.days,"日先予測"),model:s,retrain:t,features:"".concat(e.features.selected.length,"個の特徴量"),data:"".concat(e.data.max_data_points,"データポイント")}}}}},2320:(e,s,t)=>{"use strict";t.d(s,{J:()=>r});var a=t(2818);class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}async initialize(){try{await this.loadConfig(),console.log("✅ 通知サービス初期化完了")}catch(e){throw console.error("通知サービス初期化エラー:",e),e}}async loadConfig(){try{let e=localStorage.getItem("notification-config");if(e)try{return this.config=JSON.parse(e),this.config}catch(e){console.warn("通知設定のJSON解析に失敗しました。デフォルトにフォールバックします。")}let s=void 0!==a&&a.env&&!1,t={email:{enabled:!1,smtp_server:"smtp.gmail.com",smtp_port:587,email_user:"",email_password:"",email_to:""},push:{enabled:!1,vapid_public_key:"",vapid_private_key:"",vapid_subject:"mailto:example@example.com"},schedule:{morning_analysis:"09:00",evening_analysis:"15:00",timezone:"Asia/Tokyo"},content:{include_analysis_summary:!0,include_performance_metrics:!0,include_recommendations:!0,include_risk_alerts:!0},filters:{min_confidence_threshold:.7,include_errors:!0,include_success:!0}};if(s){try{localStorage.setItem("notification-config",JSON.stringify(t))}catch(e){}return this.config=t,t}throw Error("設定が見つかりません")}catch(e){throw console.error("設定読み込みエラー:",e),e}}async saveConfig(e){try{localStorage.setItem("notification-config",JSON.stringify(e)),this.config=e}catch(e){throw console.error("設定保存エラー:",e),e}}async initializePushNotifications(){if(!("serviceWorker"in navigator)||!("PushManager"in window))return console.warn("プッシュ通知がサポートされていません"),!1;try{this.registration=await navigator.serviceWorker.register("/sw.js");let e=await Notification.requestPermission();if("granted"!==e)return console.warn("通知の許可が得られませんでした"),!1;return await this.subscribeToPushNotifications(),!0}catch(e){return console.error("プッシュ通知の初期化エラー:",e),!1}}async subscribeToPushNotifications(){var e;if(this.registration&&(null===(e=this.config)||void 0===e?void 0:e.push.enabled))try{let e=await this.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.config.push.vapid_public_key});localStorage.setItem("push-subscription",JSON.stringify(e))}catch(e){console.error("プッシュ通知の購読エラー:",e)}}async sendLocalNotification(e){if(!this.registration||"granted"!==Notification.permission)return;let s={body:e.message,icon:"/favicon.ico",badge:"/favicon.ico",tag:e.type,data:e.data,requireInteraction:"high"===e.priority};await this.registration.showNotification(e.title,s)}async notifyAnalysisComplete(e){let s={type:"analysis_complete",title:"\uD83D\uDCCA 株価分析完了",message:"分析が完了しました。".concat(e.buy_candidates||0,"件の買い候補、").concat(e.sell_candidates||0,"件の売り候補が見つかりました。"),data:e,timestamp:new Date().toISOString(),priority:"high"};await this.sendLocalNotification(s)}async notifyError(e){let s={type:"error",title:"❌ 分析エラー",message:"分析中にエラーが発生しました: ".concat(e),timestamp:new Date().toISOString(),priority:"high"};await this.sendLocalNotification(s)}async notifyRecommendation(e,s,t){let a={type:"recommendation",title:"\uD83D\uDCA1 ".concat(e," ").concat(s,"推奨"),message:t,data:{symbol:e,action:s,reason:t},timestamp:new Date().toISOString(),priority:"medium"};await this.sendLocalNotification(a)}async notifyRiskAlert(e,s){let t={type:"risk_alert",title:"⚠️ ".concat(e," リスク警告"),message:s,data:{symbol:e,message:s},timestamp:new Date().toISOString(),priority:"high"};await this.sendLocalNotification(t)}async startAutoUpdate(){try{if(!(await fetch("/api/start-auto-update",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw Error("自動更新の開始に失敗しました");console.log("自動更新を開始しました")}catch(e){throw console.error("自動更新開始エラー:",e),e}}async stopAutoUpdate(){try{localStorage.removeItem("auto-update-enabled"),console.log("自動更新設定を削除しました（静的サイトでは実際の自動更新は実行されません）")}catch(e){throw console.error("自動更新停止エラー:",e),e}}async getNotificationHistory(){try{let e=localStorage.getItem("notification-history");if(e)return JSON.parse(e);return[]}catch(e){return console.error("通知履歴取得エラー:",e),[]}}constructor(){this.config=null,this.registration=null}}}},e=>{var s=s=>e(e.s=s);e.O(0,[7396,1724,8441,1517,7358],()=>s(838)),_N_E=e.O()}]);