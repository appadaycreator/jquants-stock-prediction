"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{6261:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(7401).A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},1864:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(7401).A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},6527:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(7401).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},8236:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(7401).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2640:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(7401).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},7607:(e,s,t)=>{t.d(s,{A:()=>l});let l=(0,t(7401).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},898:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var l=t(5155),a=t(2115);t(1864),t(6261),t(6527);var d=t(1773),i=t(9191),r=t(8236),c=t(3239),n=t(9136),x=t(6878),m=t(9676),o=t(1476),h=t(2640),j=t(3950),g=t(7607),p=t(2810);function b(e){var s;let{stockData:t,modelComparison:b,featureAnalysis:y,predictions:N,summary:u,onRefresh:v,onAnalysis:w,onSettings:f}=e,[A,k]=(0,a.useState)("overview"),[M,_]=(0,a.useState)(!1),[S,C]=(0,a.useState)(null),[F,z]=(0,a.useState)(""),I=async()=>{_(!0),z("データを更新しています..."),await v(),C(new Date().toLocaleString("ja-JP")),z("更新完了"),setTimeout(()=>{_(!1),z("")},2e3)},V=e=>{try{if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(/^\d{8}$/.test(e))return e.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3");let s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date format:",e),"2024-01-01";return s.toISOString().split("T")[0]}catch(s){return console.error("Date normalization error:",s,"Input:",e),"2024-01-01"}},T=e=>{try{let s;let t=("number"==typeof e?s=e>1e12?p.c9.fromMillis(e).toUTC():p.c9.fromSeconds(e).toUTC():((s=p.c9.fromISO(e,{setZone:!0})).isValid||(s=p.c9.fromFormat(e,"yyyy-MM-dd",{zone:"utc"})),s.isValid||(s=p.c9.fromFormat(e,"yyyy-MM-dd HH:mm:ss",{zone:"utc"})),s.isValid||(s=p.c9.fromFormat(e,"yyyyMMdd",{zone:"utc"})),s.isValid||(s=p.c9.fromFormat(e,"yyyy/MM/dd",{zone:"utc"}))),s.isValid)?s.setZone("Asia/Tokyo"):(console.error("Invalid date format:",e),p.c9.fromISO("2024-01-01",{zone:"Asia/Tokyo"}));if(!t.isValid)return console.error("Invalid date format:",e),"2024-01-01";return t.toLocaleString({month:"short",day:"numeric"})}catch(s){return console.error("Date formatting error:",s,"Input:",e),"2024-01-01"}};return t.map(e=>({date:T(V(e.date)),実際価格:e.close,SMA_5:e.sma_5,SMA_10:e.sma_10,SMA_25:e.sma_25,SMA_50:e.sma_50,出来高:e.volume/1e6})),N.slice(0,30).map(e=>({index:e.index,実際値:e.actual,予測値:e.predicted})),(0,l.jsxs)("div",{className:"lg:hidden",children:[(0,l.jsx)("div",{className:"bg-white shadow-sm border-b sticky top-0 z-30",children:(0,l.jsxs)("div",{className:"px-4 py-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"J-Quants株価予測"}),(0,l.jsx)("p",{className:"text-xs text-gray-600",children:"機械学習による株価予測システム"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:I,disabled:M,className:"p-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 transition-colors",title:M?"更新中...":"データを更新",children:(0,l.jsx)(d.A,{className:"h-4 w-4 ".concat(M?"animate-spin":"")})}),(0,l.jsx)("button",{onClick:w,className:"p-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",title:"分析を実行",children:(0,l.jsx)(i.A,{className:"h-4 w-4"})}),(0,l.jsx)("button",{onClick:f,className:"p-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 transition-colors",title:"設定を開く",children:(0,l.jsx)(r.A,{className:"h-4 w-4"})})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(c.A,{className:"h-4 w-4 text-green-500"}),(0,l.jsx)("span",{className:"text-gray-600",children:"システム: 正常稼働中"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("span",{className:"text-gray-500",children:["最終更新: ",S||(null==u?void 0:u.last_updated)||"-"]}),F&&(0,l.jsx)("div",{className:"text-green-600 font-medium",children:F})]})]})]})}),(0,l.jsx)("div",{className:"bg-white border-b",children:(0,l.jsx)("div",{className:"flex overflow-x-auto",children:[{id:"overview",label:"概要",icon:n.A},{id:"predictions",label:"予測",icon:x.A},{id:"models",label:"モデル",icon:m.A},{id:"analysis",label:"分析",icon:o.A},{id:"risk",label:"リスク",icon:h.A}].map(e=>{let s=e.icon;return(0,l.jsxs)("button",{onClick:()=>k(e.id),className:"flex items-center space-x-1 px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ".concat(A===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,l.jsx)(s,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:e.label})]},e.id)})})}),(0,l.jsxs)("div",{className:"p-4 space-y-4",children:["overview"===A&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)(x.A,{className:"h-5 w-5 text-blue-600"}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:"最優秀モデル"})]}),(0,l.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==u?void 0:null===(s=u.best_model)||void 0===s?void 0:s.toUpperCase())||"-"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)(m.A,{className:"h-5 w-5 text-green-600"}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:"予測精度"})]}),(0,l.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==u?void 0:u.r2)||"-"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)(n.A,{className:"h-5 w-5 text-yellow-600"}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:"MAE"})]}),(0,l.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==u?void 0:u.mae)||"-"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)(o.A,{className:"h-5 w-5 text-purple-600"}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:"データ数"})]}),(0,l.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==u?void 0:u.total_data_points)||"-"})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"株価推移と移動平均"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャート機能は一時的に無効化されています。"})]})]}),"predictions"===A&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"予測 vs 実際値"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャート機能は一時的に無効化されています。"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"予測誤差分布"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャート機能は一時的に無効化されています。"})]})]}),"models"===A&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,l.jsx)("div",{className:"px-4 py-3 border-b",children:(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"モデル性能比較"})}),(0,l.jsx)("div",{className:"divide-y divide-gray-200",children:b.slice(0,5).map((e,s)=>(0,l.jsx)("div",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:s+1}),0===s&&(0,l.jsx)("span",{className:"text-green-600",children:"\uD83C\uDFC6"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.type})]})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["R\xb2: ",e.r2.toFixed(4)]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:["MAE: ",e.mae.toFixed(4)]})]})]})},e.name))})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"MAE比較"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャート機能は一時的に無効化されています。"})]})]}),"analysis"===A&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"特徴量重要度"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャート機能は一時的に無効化されています。"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"特徴量重要度分布"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャート機能は一時的に無効化されています。"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"実際値 vs 予測値散布図"}),(0,l.jsx)("p",{className:"text-gray-600",children:"チャート機能は一時的に無効化されています。"})]})]}),"risk"===A&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"リスク管理"}),(0,l.jsx)(h.A,{className:"h-5 w-5 text-blue-600"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-red-800",children:"リスクレベル"}),(0,l.jsx)("p",{className:"text-lg font-bold text-red-600",children:"HIGH"})]}),(0,l.jsx)(j.A,{className:"h-6 w-6 text-red-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"ポートフォリオ価値"}),(0,l.jsx)("p",{className:"text-lg font-bold text-blue-600",children:"\xa51,250,000"})]}),(0,l.jsx)(x.A,{className:"h-6 w-6 text-blue-500"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"最大ドローダウン"}),(0,l.jsx)("p",{className:"text-lg font-bold text-yellow-600",children:"8.5%"})]}),(0,l.jsx)(g.A,{className:"h-6 w-6 text-yellow-500"})]})]})]}),(0,l.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)(j.A,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"リスク管理推奨事項"}),(0,l.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,l.jsx)("li",{children:"• ポートフォリオリスクが高すぎます"}),(0,l.jsx)("li",{children:"• ポジションサイズを縮小してください"}),(0,l.jsx)("li",{children:"• 損切りラインを設定することを推奨"})]})]})]})})]})]})]})}}}]);