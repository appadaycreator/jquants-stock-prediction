"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[728,865,1594],{1594:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7401).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4857:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7401).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},3473:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7401).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},853:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7401).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},865:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7401).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},5686:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7401).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},8684:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(7401).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},728:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(9233),l=s(5843),r=s(5155),i=s(2115),n=s(4857),d=s(8684),c=s(3473),o=s(7401);let m=(0,o.A)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var x=s(5686);let h=(0,o.A)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var u=s(865);let g=(0,o.A)("star-off",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var y=s(853),p=s(1594),b=s(767);function j(e){let{onWatchlistChange:t,onStockSelect:s}=e,[o,j]=(0,i.useState)([]),[v,f]=(0,i.useState)(null),[N,w]=(0,i.useState)(!1),[k,A]=(0,i.useState)(!1),[S,C]=(0,i.useState)(null),[_,D]=(0,i.useState)(""),[M,O]=(0,i.useState)(null),[F,I]=(0,i.useState)(""),[T,L]=(0,i.useState)(!1),[E,z]=(0,i.useState)([]),[q,H]=(0,i.useState)(!1),[V,B]=(0,i.useState)(null),[J,K]=(0,i.useState)({}),[P,R]=(0,i.useState)(null),[U,G]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=[{id:"1",name:"主要銘柄",items:[{id:"1-1",symbol:"7203.T",name:"トヨタ自動車",sector:"自動車",addedAt:"2024-01-01",isFavorite:!0,tags:["大型株","自動車"]},{id:"1-2",symbol:"6758.T",name:"ソニーグループ",sector:"エンターテインメント",addedAt:"2024-01-02",isFavorite:!1,tags:["エレクトロニクス"]},{id:"1-3",symbol:"6861.T",name:"キーエンス",sector:"電子部品",addedAt:"2024-01-03",isFavorite:!0,tags:["計測機器"]}],createdAt:"2024-01-01",updatedAt:"2024-01-15"},{id:"2",name:"成長株",items:[{id:"2-1",symbol:"9984.T",name:"ソフトバンクグループ",sector:"通信",addedAt:"2024-01-05",isFavorite:!1,tags:["投資持株"]},{id:"2-2",symbol:"4063.T",name:"信越化学工業",sector:"化学",addedAt:"2024-01-06",isFavorite:!0,tags:["半導体材料"]}],createdAt:"2024-01-05",updatedAt:"2024-01-10"}];j(e),e.length>0&&f(e[0].id)},[]),(0,i.useEffect)(()=>{null==t||t(o)},[o,t]);let Q=async e=>{if(e.length<2){z([]);return}H(!0);try{let t=[{symbol:"7203.T",name:"トヨタ自動車",sector:"自動車"},{symbol:"6758.T",name:"ソニーグループ",sector:"エンターテインメント"},{symbol:"6861.T",name:"キーエンス",sector:"電子部品"},{symbol:"9984.T",name:"ソフトバンクグループ",sector:"通信"},{symbol:"4063.T",name:"信越化学工業",sector:"化学"}].filter(t=>t.symbol.toLowerCase().includes(e.toLowerCase())||t.name.toLowerCase().includes(e.toLowerCase()));z(t)}catch(e){console.error("銘柄検索エラー:",e)}finally{H(!1)}},W=e=>{C(e),D(e.name),O(e.id)},X=()=>{if(!M)return;let e=o.find(e=>e.id===M);if(e){if(!_.trim()||_===e.name){O(null);return}j(e=>e.map(e=>e.id===M?(0,l._)((0,a._)({},e),{name:_.trim(),updatedAt:new Date().toISOString()}):e)),O(null),D("")}},Y=e=>{if(confirm("このウォッチリストを削除しますか？")&&(j(t=>t.filter(t=>t.id!==e)),v===e)){let t=o.filter(t=>t.id!==e);f(t.length>0?t[0].id:null)}},Z=e=>{if(!v)return;let t={id:"".concat(v,"-").concat(Date.now()),symbol:e.symbol,name:e.name,sector:e.sector,addedAt:new Date().toISOString(),isFavorite:!1,tags:[]};j(e=>e.map(e=>e.id===v?(0,l._)((0,a._)({},e),{items:[...e.items,t],updatedAt:new Date().toISOString()}):e)),L(!1),I(""),z([])},$=(e,t)=>{j(s=>s.map(s=>s.id===e?(0,l._)((0,a._)({},s),{items:s.items.filter(e=>e.id!==t),updatedAt:new Date().toISOString()}):s))},ee=(e,t)=>{j(s=>s.map(s=>s.id===e?(0,l._)((0,a._)({},s),{items:s.items.map(e=>e.id===t?(0,l._)((0,a._)({},e),{isFavorite:!e.isFavorite}):e),updatedAt:new Date().toISOString()}):s))},et=(e,t,s)=>{let r=s.trim();r&&(j(s=>s.map(s=>s.id===e?(0,l._)((0,a._)({},s),{items:s.items.map(e=>e.id===t?(0,l._)((0,a._)({},e),{tags:Array.from(new Set([...e.tags||[],r]))}):e),updatedAt:new Date().toISOString()}):s)),K(e=>(0,l._)((0,a._)({},e),{[t]:""})))},es=(e,t,s)=>{j(r=>r.map(r=>r.id===e?(0,l._)((0,a._)({},r),{items:r.items.map(e=>e.id===t?(0,l._)((0,a._)({},e),{tags:(e.tags||[]).filter(e=>e!==s)}):e),updatedAt:new Date().toISOString()}):r))},ea=e=>{B(e)},el=e=>{e.preventDefault()},er=(e,t)=>{if(e.preventDefault(),null===V||!v)return;let s=o.find(e=>e.id===v);if(!s)return;let r=[...s.items],i=r[V];r.splice(V,1),r.splice(t,0,i),j(e=>e.map(e=>e.id===v?(0,l._)((0,a._)({},e),{items:r,updatedAt:new Date().toISOString()}):e)),B(null)},ei=o.find(e=>e.id===v);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"ウォッチリスト管理"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("button",{onClick:()=>{let e="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o,null,2)),t="watchlists_".concat(new Date().toISOString().split("T")[0],".json"),s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download",t),s.click()},className:"flex items-center px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,r.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"エクスポート"]}),(0,r.jsxs)("label",{className:"flex items-center px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors cursor-pointer",children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"インポート",(0,r.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;let a=new FileReader;a.onload=e=>{try{var t;let s=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);Array.isArray(s)&&(j(s),s.length>0&&f(s[0].id))}catch(e){alert("ファイルの形式が正しくありません。")}},a.readAsText(s)},className:"hidden"})]}),(0,r.jsxs)("button",{onClick:()=>w(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"新規作成"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow border",children:[(0,r.jsx)("div",{className:"p-4 border-b",children:(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"ウォッチリスト"})}),(0,r.jsx)("div",{className:"p-4 space-y-2",children:o.map(e=>(0,r.jsx)("div",{className:"p-3 rounded-lg border cursor-pointer transition-colors ".concat(v===e.id?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200 hover:bg-gray-100"),onClick:()=>f(e.id),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[M===e.id?(0,r.jsx)("input",{autoFocus:!0,type:"text",value:_,onChange:e=>D(e.target.value),onBlur:X,onKeyDown:e=>{"Enter"===e.key&&X(),"Escape"===e.key&&(O(null),D(""))},className:"px-2 py-1 border border-blue-300 rounded w-full"}):(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.items.length,"銘柄"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),W(e)},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,r.jsx)(m,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),Y(e.id)},className:"p-1 text-gray-400 hover:text-red-600",children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})]})]})},e.id))})]})}),(0,r.jsx)("div",{className:"lg:col-span-2",children:ei?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow border",children:[(0,r.jsx)("div",{className:"p-4 border-b",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:ei.name}),(0,r.jsxs)("button",{onClick:()=>L(!0),className:"flex items-center px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"銘柄追加"]})]})}),(0,r.jsx)("div",{className:"px-4 pt-3",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("select",{className:"px-2 py-1 border border-gray-300 rounded",value:P||"",onChange:e=>R(e.target.value||null),children:[(0,r.jsx)("option",{value:"",children:"すべてのセクター"}),Array.from(new Set(ei.items.map(e=>e.sector).filter(Boolean))).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{className:"px-2 py-1 border border-gray-300 rounded",value:U||"",onChange:e=>G(e.target.value||null),children:[(0,r.jsx)("option",{value:"",children:"すべてのタグ"}),Array.from(new Set(ei.items.flatMap(e=>e.tags||[]))).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(P||U)&&(0,r.jsx)("button",{onClick:()=>{R(null),G(null)},className:"text-xs px-2 py-1 border border-gray-300 rounded text-gray-600 hover:bg-gray-50",children:"フィルタ解除"})]})}),ei.items.length>0?(0,r.jsx)("div",{className:"p-4 space-y-2",children:ei.items.filter(e=>!P||e.sector===P).filter(e=>!U||(e.tags||[]).includes(U)).map((e,t)=>(0,r.jsxs)("div",{draggable:!0,onDragStart:()=>ea(t),onDragOver:el,onDrop:e=>er(e,t),className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(h,{className:"h-4 w-4 text-gray-400 cursor-move"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.symbol}),e.isFavorite&&(0,r.jsx)(u.A,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.name}),e.sector&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.sector}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1 mt-1",children:[(e.tags||[]).map(t=>(0,r.jsxs)("span",{className:"inline-flex items-center text-xs px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded",children:[t,(0,r.jsx)("button",{onClick:()=>es(ei.id,e.id,t),className:"ml-1 text-blue-500 hover:text-blue-700","aria-label":"remove-tag",children:"\xd7"})]},t)),(0,r.jsx)("input",{type:"text",value:J[e.id]||"",onChange:t=>K(s=>(0,l._)((0,a._)({},s),{[e.id]:t.target.value})),onKeyDown:t=>{"Enter"===t.key&&et(ei.id,e.id,J[e.id]||"")},placeholder:"タグ追加",className:"text-xs px-2 py-1 border border-gray-300 rounded"}),(0,r.jsx)("button",{onClick:()=>et(ei.id,e.id,J[e.id]||""),className:"text-xs px-2 py-1 border border-gray-300 rounded text-gray-600 hover:bg-gray-50",children:"追加"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>ee(ei.id,e.id),className:"p-1 text-gray-400 hover:text-yellow-500",children:e.isFavorite?(0,r.jsx)(u.A,{className:"h-4 w-4 text-yellow-500 fill-current"}):(0,r.jsx)(g,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>null==s?void 0:s(e.symbol),className:"p-1 text-gray-400 hover:text-blue-600",children:(0,r.jsx)(y.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>$(ei.id,e.id),className:"p-1 text-gray-400 hover:text-red-600",children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})]})]},e.id))}):(0,r.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,r.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"銘柄がありません"}),(0,r.jsx)("p",{className:"text-sm",children:"「銘柄追加」ボタンから銘柄を追加してください"})]})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow border p-8 text-center text-gray-500",children:[(0,r.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"ウォッチリストがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"「新規作成」ボタンからウォッチリストを作成してください"})]})})]}),N&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"新しいウォッチリスト"}),(0,r.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(b.A,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ウォッチリスト名"}),(0,r.jsx)("input",{type:"text",value:_,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"例: 主要銘柄"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,r.jsx)("button",{onClick:()=>{if(!_.trim())return;let e={id:Date.now().toString(),name:_,items:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};j(t=>[...t,e]),f(e.id),D(""),w(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"作成"})]})]})]})}),T&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"銘柄検索・追加"}),(0,r.jsx)("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(b.A,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"銘柄検索（コード・社名）"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:F,onChange:e=>{I(e.target.value),Q(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"例: 7203, トヨタ"}),q&&(0,r.jsx)("div",{className:"absolute right-3 top-3",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]})]}),E.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"検索結果"}),E.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900",children:e.symbol}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.name}),e.sector&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.sector})]}),(0,r.jsxs)("button",{onClick:()=>Z(e),className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"追加"]})]},e.symbol))]}),F.length>=2&&0===E.length&&!q&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{children:"該当する銘柄が見つかりませんでした"})]})]})]})})]})}}}]);