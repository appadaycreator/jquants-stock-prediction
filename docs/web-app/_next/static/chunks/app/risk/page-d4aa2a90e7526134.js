(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{36549:(e,s,r)=>{Promise.resolve().then(r.bind(r,26993))},26993:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>B});var a=r(95155),l=r(12115),t=r(22130),i=r(25121),c=r(38002),d=r(36222),n=r(58581),o=r(36),x=r(15255),m=r(12800),h=r(66963),j=r(71214),u=r(85093),p=r(95051),y=r(30563),f=r(909),N=r(67732),g=r(94973),b=r(394),v=r(79449),_=r(73239),w=r(61594),k=r(23950),Z=r(75340),W=r(23888),A=r(14807),R=r(42640),D=r(77607),K=r(86878);function B(){let[e,s]=(0,l.useState)(null),[r,B]=(0,l.useState)([]),[E,I]=(0,l.useState)(null),[F,S]=(0,l.useState)(null),[C,O]=(0,l.useState)([]),[L,X]=(0,l.useState)([]),[G,H]=(0,l.useState)(!0),[M,P]=(0,l.useState)(null);(0,l.useEffect)(()=>{z()},[]);let z=async()=>{try{H(!0);let[e,r,a,l,t,i]=await Promise.all([fetch("../../../../../data/risk_portfolio_overview.json"),fetch("../../../../../data/risk_positions.json"),fetch("../../../../../data/risk_metrics_chart.json"),fetch("../../../../../data/risk_position_performance.json"),fetch("../../../../../data/risk_alerts.json"),fetch("../../../../../data/risk_recommendations.json")]),c=await e.json(),d=await r.json(),n=await a.json(),o=await l.json(),x=await t.json(),m=await i.json();s(c),B(d),I(n),S(o),O(x),X(m)}catch(e){console.error("リスクデータの読み込みエラー:",e)}finally{H(!1)}},U=e=>new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),J=e=>"".concat(e.toFixed(2),"%"),Q=e=>{switch(e){case"HIGH":return"bg-red-100 text-red-800 border-red-200";case"MEDIUM":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"LOW":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return G?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDEE1️ リスク管理ダッシュボード"}),(0,a.jsx)("p",{className:"text-gray-600",children:"現在のポジション状況、損切りライン、リスクレベルを可視化"})]}),e&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"ポートフォリオ価値"}),(0,a.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(t.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:U(e.portfolio_value)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["未実現損益: ",U(e.total_unrealized_pnl)]})]})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"リスクレベル"}),(0,a.jsx)(R.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(t.Wu,{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"LOW":return(0,a.jsx)(_.A,{className:"h-4 w-4 text-green-500"});case"MEDIUM":return(0,a.jsx)(w.A,{className:"h-4 w-4 text-yellow-500"});case"HIGH":return(0,a.jsx)(k.A,{className:"h-4 w-4 text-orange-500"});case"CRITICAL":return(0,a.jsx)(Z.A,{className:"h-4 w-4 text-red-500"});default:return(0,a.jsx)(W.A,{className:"h-4 w-4 text-gray-500"})}})(e.risk_level),(0,a.jsx)("span",{className:"text-2xl font-bold",style:{color:e.risk_color},children:e.risk_level})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["リスクスコア: ",e.risk_score.toFixed(2)]})]})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"最大ドローダウン"}),(0,a.jsx)(D.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(t.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:J(100*e.max_drawdown)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["VaR (95%): ",U(e.var_95)]})]})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsxs)(t.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(t.ZB,{className:"text-sm font-medium",children:"シャープレシオ"}),(0,a.jsx)(K.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(t.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.sharpe_ratio.toFixed(2)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"リスク調整後リターン"})]})]})]}),C.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"⚠️ リスクアラート"}),(0,a.jsx)("div",{className:"space-y-3",children:C.map(e=>(0,a.jsxs)(c.Fc,{style:{borderColor:e.color},children:[(0,a.jsx)(k.A,{className:"h-4 w-4",style:{color:e.color}}),(0,a.jsx)(c.XL,{children:e.title}),(0,a.jsx)(c.TN,{children:e.message})]},e.id))})]}),(0,a.jsxs)(d.tU,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(d.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(d.Xi,{value:"overview",children:"概要"}),(0,a.jsx)(d.Xi,{value:"positions",children:"ポジション"}),(0,a.jsx)(d.Xi,{value:"risk-metrics",children:"リスク指標"}),(0,a.jsx)(d.Xi,{value:"recommendations",children:"推奨事項"})]}),(0,a.jsx)(d.av,{value:"overview",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E&&(0,a.jsxs)(t.Zp,{children:[(0,a.jsx)(t.aR,{children:(0,a.jsx)(t.ZB,{children:"リスク指標推移"})}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)(n.u,{width:"100%",height:300,children:(0,a.jsxs)(o.Q,{data:E.dates.map((e,s)=>({date:e,risk_score:E.risk_scores[s],portfolio_value:E.portfolio_values[s]})),children:[(0,a.jsx)(x.d,{strokeDasharray:"3 3"}),(0,a.jsx)(m.W,{dataKey:"date"}),(0,a.jsx)(h.h,{yAxisId:"left"}),(0,a.jsx)(h.h,{yAxisId:"right",orientation:"right"}),(0,a.jsx)(j.m,{}),(0,a.jsx)(u.Gk,{yAxisId:"left",type:"monotone",dataKey:"risk_score",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.3,name:"リスクスコア"}),(0,a.jsx)(p.N,{yAxisId:"right",type:"monotone",dataKey:"portfolio_value",stroke:"#10b981",name:"ポートフォリオ価値"})]})})})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsx)(t.aR,{children:(0,a.jsx)(t.ZB,{children:"ポジション分布"})}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)(n.u,{width:"100%",height:300,children:(0,a.jsxs)(y.r,{children:[(0,a.jsx)(f.F,{data:r.map(e=>({name:e.symbol,value:e.weight,color:e.pnl_color})),cx:"50%",cy:"50%",labelLine:!1,label:e=>"".concat(e.name," ").concat((100*e.percent).toFixed(1),"%"),outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((e,s)=>(0,a.jsx)(N.f,{fill:e.pnl_color},"cell-".concat(s)))}),(0,a.jsx)(j.m,{})]})})})]})]})}),(0,a.jsx)(d.av,{value:"positions",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)(t.Zp,{children:[(0,a.jsx)(t.aR,{children:(0,a.jsx)(t.ZB,{children:"現在のポジション"})}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>P(M===e.symbol?null:e.symbol),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.symbol}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.company_name})]}),(0,a.jsx)(i.E,{variant:"outline",style:{borderColor:e.risk_color,color:e.risk_color},children:e.risk_level})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold",style:{color:e.pnl_color},children:U(e.unrealized_pnl)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:J(e.unrealized_pnl_percent)})]})]}),M===e.symbol&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"エントリー価格"}),(0,a.jsx)("p",{className:"font-semibold",children:U(e.entry_price)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"現在価格"}),(0,a.jsx)("p",{className:"font-semibold",children:U(e.current_price)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"損切り価格"}),(0,a.jsx)("p",{className:"font-semibold text-red-600",children:U(e.stop_loss_price)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"利確価格"}),(0,a.jsx)("p",{className:"font-semibold text-green-600",children:U(e.take_profit_price)})]})]})]},e.symbol))})})]}),F&&M&&(0,a.jsxs)(t.Zp,{children:[(0,a.jsx)(t.aR,{children:(0,a.jsxs)(t.ZB,{children:[M," パフォーマンス"]})}),(0,a.jsx)(t.Wu,{children:(()=>{let e=F.positions.find(e=>e.symbol===M);return e?(0,a.jsx)(n.u,{width:"100%",height:400,children:(0,a.jsxs)(g.b,{data:e.dates.map((s,r)=>({date:s,price:e.prices[r],stop_loss:e.stop_loss_line[r],take_profit:e.take_profit_line[r]})),children:[(0,a.jsx)(x.d,{strokeDasharray:"3 3"}),(0,a.jsx)(m.W,{dataKey:"date"}),(0,a.jsx)(h.h,{}),(0,a.jsx)(j.m,{}),(0,a.jsx)(p.N,{type:"monotone",dataKey:"price",stroke:"#3b82f6",strokeWidth:2,name:"価格"}),(0,a.jsx)(p.N,{type:"monotone",dataKey:"stop_loss",stroke:"#ef4444",strokeDasharray:"5 5",name:"損切りライン"}),(0,a.jsx)(p.N,{type:"monotone",dataKey:"take_profit",stroke:"#10b981",strokeDasharray:"5 5",name:"利確ライン"})]})}):null})()})]})]})}),(0,a.jsx)(d.av,{value:"risk-metrics",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[E&&(0,a.jsxs)(t.Zp,{children:[(0,a.jsx)(t.aR,{children:(0,a.jsx)(t.ZB,{children:"ドローダウン分析"})}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)(n.u,{width:"100%",height:300,children:(0,a.jsxs)(o.Q,{data:E.dates.map((e,s)=>({date:e,drawdown:100*E.drawdowns[s]})),children:[(0,a.jsx)(x.d,{strokeDasharray:"3 3"}),(0,a.jsx)(m.W,{dataKey:"date"}),(0,a.jsx)(h.h,{}),(0,a.jsx)(j.m,{formatter:e=>["".concat(e,"%"),"ドローダウン"]}),(0,a.jsx)(u.Gk,{type:"monotone",dataKey:"drawdown",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.3})]})})})]}),(0,a.jsxs)(t.Zp,{children:[(0,a.jsx)(t.aR,{children:(0,a.jsx)(t.ZB,{children:"ポジション別リスクスコア"})}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)(n.u,{width:"100%",height:300,children:(0,a.jsxs)(b.E,{data:r.map(e=>({symbol:e.symbol,risk_score:e.risk_score,color:e.risk_color})),children:[(0,a.jsx)(x.d,{strokeDasharray:"3 3"}),(0,a.jsx)(m.W,{dataKey:"symbol"}),(0,a.jsx)(h.h,{}),(0,a.jsx)(j.m,{}),(0,a.jsx)(v.y,{dataKey:"risk_score",fill:"#8884d8"})]})})})]})]})}),(0,a.jsx)(d.av,{value:"recommendations",className:"space-y-6",children:(0,a.jsxs)(t.Zp,{children:[(0,a.jsx)(t.aR,{children:(0,a.jsx)(t.ZB,{children:"リスク管理推奨事項"})}),(0,a.jsx)(t.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:L.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:e.description}),(0,a.jsx)("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:e.action})]}),(0,a.jsx)(i.E,{className:Q(e.priority),children:e.priority})]})},e.id))})})]})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[76,96,358],()=>s(36549)),_N_E=e.O()}]);