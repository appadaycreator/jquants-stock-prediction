(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{66307:(e,s,t)=>{Promise.resolve().then(t.bind(t,80257))},80257:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>si});var a=t(39233),l=t(65843),r=t(95155),i=t(12115),n=t(67396),c=t(1937),d=t(76046),o=t(66507),x=t(14081),m=t(68236),h=t(93467),u=t(86878),g=t(92598),p=t(59136),j=t(40767),b=t(86710),f=t(51719);function y(e){let{activeTab:s,onTabChange:t,onAnalysisClick:a,onSettingsClick:l,onMonitoringClick:c}=e,[y,N]=(0,i.useState)(!1),[v,w]=(0,i.useState)(!1),S=(0,d.usePathname)(),[k,A]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=()=>{A(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>(y?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[y]);let C=[{href:"/",label:"ダッシュボード",icon:o.A,description:"メインダッシュボード"},{href:"/reports",label:"レポート",icon:x.A,description:"詳細レポート"},{href:"/settings",label:"設定",icon:m.A,description:"システム設定"},{href:"/usage",label:"使い方",icon:h.A,description:"使用方法ガイド"}],E=[{label:"銘柄分析",icon:u.A,onClick:a,color:"bg-blue-600 hover:bg-blue-700"},{label:"銘柄監視",icon:g.A,onClick:c,color:"bg-green-600 hover:bg-green-700"},{label:"設定",icon:m.A,onClick:l,color:"bg-gray-600 hover:bg-gray-700"}];return k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"lg:hidden bg-white shadow-sm border-b sticky top-0 z-40",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"J-Quants"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"株価予測システム"})]})]}),(0,r.jsx)("button",{onClick:()=>N(!y),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"メニューを開く",children:y?(0,r.jsx)(j.A,{className:"h-6 w-6 text-gray-600"}):(0,r.jsx)(b.A,{className:"h-6 w-6 text-gray-600"})})]}),(0,r.jsxs)("div",{className:"px-4 pb-3",children:[(0,r.jsxs)("button",{onClick:()=>w(!v),className:"flex items-center justify-between w-full px-3 py-2 bg-gray-50 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)("span",{children:"クイックアクション"}),(0,r.jsx)(f.A,{className:"h-4 w-4 transition-transform ".concat(v?"rotate-180":"")})]}),v&&(0,r.jsx)("div",{className:"mt-2 grid grid-cols-3 gap-2",children:E.map((e,s)=>{let t=e.icon;return(0,r.jsxs)("button",{onClick:()=>{var s;null===(s=e.onClick)||void 0===s||s.call(e),w(!1)},className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg text-white text-xs font-medium transition-colors ".concat(e.color),children:[(0,r.jsx)(t,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.label})]},s)})})]})]}),y&&(0,r.jsxs)("div",{className:"lg:hidden fixed inset-0 z-50",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>N(!1)}),(0,r.jsx)("div",{className:"fixed right-0 top-0 h-full w-80 bg-white shadow-xl transform transition-transform duration-300 ease-in-out",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"メニュー"})]}),(0,r.jsx)("button",{onClick:()=>N(!1),className:"p-2 rounded-lg hover:bg-gray-100",children:(0,r.jsx)(j.A,{className:"h-5 w-5 text-gray-600"})})]}),(0,r.jsxs)("nav",{className:"flex-1 overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-4 space-y-2",children:C.map(e=>{let s=e.icon,t=S===e.href;return(0,r.jsxs)(n.default,{href:e.href,onClick:()=>N(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ".concat(t?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(s,{className:"h-5 w-5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.href)})}),(0,r.jsxs)("div",{className:"p-4 border-t",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"クイックアクション"}),(0,r.jsx)("div",{className:"space-y-2",children:E.map((e,s)=>{let t=e.icon;return(0,r.jsxs)("button",{onClick:()=>{var s;null===(s=e.onClick)||void 0===s||s.call(e),N(!1)},className:"flex items-center space-x-3 w-full px-4 py-3 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(t,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:e.label})]},s)})})]})]}),(0,r.jsx)("div",{className:"p-4 border-t bg-gray-50",children:(0,r.jsx)("div",{className:"text-xs text-gray-500 text-center",children:"J-Quants 株価予測システム v1.0"})})]})})]})]}):null}t(11864),t(66261);var N=t(36527),v=t(21773),w=t(29191),S=t(73239),k=t(59676),A=t(81476),C=t(42640),E=t(23950),T=t(77607),_=t(94973),I=t(15255),D=t(12800),R=t(66963),L=t(71214),P=t(85608),M=t(95051),F=t(394),O=t(79449),z=t(30563),K=t(909),U=t(67732),G=t(46699),J=t(7032),B=t(58581),W=t(38619),H=t(78058),V=t(81556),Y=t(44857),X=t(16075),q=t(50314),$=t(44504);function Q(e){let{data:s,type:t,title:n,dataKey:c,xAxisKey:d="date",lines:o=[],height:x=300,onFullscreen:m,isFullscreen:h=!1}=e,[g,j]=(0,i.useState)(!1),[b,f]=(0,i.useState)(1),[y,N]=(0,i.useState)(0),[v,w]=(0,i.useState)(!1),[S,A]=(0,i.useState)(0),C=(0,i.useRef)(null),E=()=>(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(()=>{switch(t){case"bar":default:return(0,r.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"});case"pie":return(0,r.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"});case"scatter":return(0,r.jsx)(u.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"})}})(),(0,r.jsx)("p",{className:"text-lg font-medium",children:"データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})});return(0,r.jsxs)("div",{ref:C,className:"bg-white rounded-lg shadow-sm border ".concat(g?"fixed inset-0 z-50 p-4":""),style:{transform:"scale(".concat(b,") translateX(").concat(y,"px)"),transition:v?"none":"transform 0.1s ease-out"},onTouchStart:e=>{1===e.touches.length&&(w(!0),A(e.touches[0].clientX))},onTouchMove:e=>{if(v&&1===e.touches.length){let s=e.touches[0].clientX-S;N(e=>e+.1*s),A(e.touches[0].clientX)}},onTouchEnd:()=>{w(!1)},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:n}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("button",{onClick:()=>{f(e=>Math.max(.5,e/1.2))},className:"p-1 rounded hover:bg-gray-100 transition-colors",disabled:b<=.5,children:(0,r.jsx)(W.A,{className:"h-4 w-4 text-gray-600"})}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 min-w-[3rem] text-center",children:[Math.round(100*b),"%"]}),(0,r.jsx)("button",{onClick:()=>{f(e=>Math.min(3,1.2*e))},className:"p-1 rounded hover:bg-gray-100 transition-colors",disabled:b>=3,children:(0,r.jsx)(H.A,{className:"h-4 w-4 text-gray-600"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("button",{onClick:()=>{f(1),N(0)},className:"p-1 rounded hover:bg-gray-100 transition-colors",title:"リセット",children:(0,r.jsx)(V.A,{className:"h-4 w-4 text-gray-600"})}),(0,r.jsx)("button",{onClick:()=>{var e;let s=null===(e=C.current)||void 0===e?void 0:e.querySelector("canvas");if(s){let e=document.createElement("a");e.download="".concat(n,".png"),e.href=s.toDataURL(),e.click()}},className:"p-1 rounded hover:bg-gray-100 transition-colors",title:"ダウンロード",children:(0,r.jsx)(Y.A,{className:"h-4 w-4 text-gray-600"})}),(0,r.jsx)("button",{onClick:()=>{navigator.share?navigator.share({title:n,text:"J-Quants株価予測: ".concat(n),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("URLをクリップボードにコピーしました"))},className:"p-1 rounded hover:bg-gray-100 transition-colors",title:"共有",children:(0,r.jsx)(X.A,{className:"h-4 w-4 text-gray-600"})}),(0,r.jsx)("button",{onClick:()=>{var e,s,t,a;g?(null===(e=(s=document).exitFullscreen)||void 0===e||e.call(s),j(!1)):(null===(a=C.current)||void 0===a||null===(t=a.requestFullscreen)||void 0===t||t.call(a),j(!0)),null==m||m()},className:"p-1 rounded hover:bg-gray-100 transition-colors",title:g?"フルスクリーン終了":"フルスクリーン",children:g?(0,r.jsx)(q.A,{className:"h-4 w-4 text-gray-600"}):(0,r.jsx)($.A,{className:"h-4 w-4 text-gray-600"})})]})]})]}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(B.u,{width:"100%",height:x,children:(()=>{if(!s||0===s.length)return E();let e={data:s,margin:{top:20,right:30,left:20,bottom:5}};switch(t){case"line":return(0,r.jsxs)(_.b,(0,l._)((0,a._)({},e),{children:[(0,r.jsx)(I.d,{strokeDasharray:"3 3"}),(0,r.jsx)(D.W,{dataKey:d}),(0,r.jsx)(R.h,{}),(0,r.jsx)(L.m,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}}),(0,r.jsx)(P.s,{}),o.map((e,s)=>(0,r.jsx)(M.N,{type:"monotone",dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth||2,dot:{r:3},activeDot:{r:5}},s))]}));case"bar":return(0,r.jsxs)(F.E,(0,l._)((0,a._)({},e),{children:[(0,r.jsx)(I.d,{strokeDasharray:"3 3"}),(0,r.jsx)(D.W,{dataKey:d}),(0,r.jsx)(R.h,{}),(0,r.jsx)(L.m,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}}),(0,r.jsx)(P.s,{}),(0,r.jsx)(O.y,{dataKey:c,fill:"#8884d8"})]}));case"pie":let i=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];return(0,r.jsxs)(z.r,{children:[(0,r.jsx)(K.F,{data:s,cx:"50%",cy:"50%",labelLine:!1,label:e=>"".concat(e.name," ").concat((100*e.percent).toFixed(0),"%"),outerRadius:80,fill:"#8884d8",dataKey:c,children:s.map((e,s)=>(0,r.jsx)(U.f,{fill:i[s%i.length]},"cell-".concat(s)))}),(0,r.jsx)(L.m,{})]});case"scatter":return(0,r.jsxs)(G.t,(0,l._)((0,a._)({},e),{children:[(0,r.jsx)(I.d,{}),(0,r.jsx)(D.W,{dataKey:"actual",name:"実際値"}),(0,r.jsx)(R.h,{dataKey:"predicted",name:"予測値"}),(0,r.jsx)(L.m,{cursor:{strokeDasharray:"3 3"}}),(0,r.jsx)(J.X,{name:"予測ポイント",data:s,fill:"#8884d8"})]}));default:return(0,r.jsx)("div",{children:"サポートされていないチャートタイプです"})}})()})}),!g&&(0,r.jsx)("div",{className:"px-4 pb-4",children:(0,r.jsx)("div",{className:"text-xs text-gray-500 bg-gray-50 rounded-lg p-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"\uD83D\uDCF1 モバイル操作:"}),(0,r.jsx)("span",{children:"スワイプで移動 • ピンチでズーム"})]})})})]})}function Z(e){var s;let{stockData:t,modelComparison:n,featureAnalysis:c,predictions:d,summary:o,onRefresh:x,onAnalysis:h,onSettings:g}=e,[j,b]=(0,i.useState)("overview"),[f,y]=(0,i.useState)(!1),[N,_]=(0,i.useState)(null),[I,D]=(0,i.useState)(""),R=async()=>{y(!0),D("データを更新しています..."),await x(),_(new Date().toLocaleString("ja-JP")),D("更新完了"),setTimeout(()=>{y(!1),D("")},2e3)},L=e=>{try{if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(/^\d{8}$/.test(e))return e.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3");let s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date format:",e),"2024-01-01";return s.toISOString().split("T")[0]}catch(s){return console.error("Date normalization error:",s,"Input:",e),"2024-01-01"}},P=e=>{try{let s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date format:",e),"Invalid Date";return s.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})}catch(s){return console.error("Date formatting error:",s,"Input:",e),"Invalid Date"}},M=t.map(e=>({date:P(L(e.date)),実際価格:e.close,SMA_5:e.sma_5,SMA_10:e.sma_10,SMA_25:e.sma_25,SMA_50:e.sma_50,出来高:e.volume/1e6})),F=d.slice(0,30).map(e=>({index:e.index,実際値:e.actual,予測値:e.predicted}));return(0,r.jsxs)("div",{className:"lg:hidden",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b sticky top-0 z-30",children:(0,r.jsxs)("div",{className:"px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"J-Quants株価予測"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"機械学習による株価予測システム"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:R,disabled:f,className:"p-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 transition-colors",title:f?"更新中...":"データを更新",children:(0,r.jsx)(v.A,{className:"h-4 w-4 ".concat(f?"animate-spin":"")})}),(0,r.jsx)("button",{onClick:h,className:"p-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",title:"分析を実行",children:(0,r.jsx)(w.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:g,className:"p-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 transition-colors",title:"設定を開く",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S.A,{className:"h-4 w-4 text-green-500"}),(0,r.jsx)("span",{className:"text-gray-600",children:"システム: 正常稼働中"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:["最終更新: ",N||(null==o?void 0:o.last_updated)||"-"]}),I&&(0,r.jsx)("div",{className:"text-green-600 font-medium",children:I})]})]})]})}),(0,r.jsx)("div",{className:"bg-white border-b",children:(0,r.jsx)("div",{className:"flex overflow-x-auto",children:[{id:"overview",label:"概要",icon:p.A},{id:"predictions",label:"予測",icon:u.A},{id:"models",label:"モデル",icon:k.A},{id:"analysis",label:"分析",icon:A.A},{id:"risk",label:"リスク",icon:C.A}].map(e=>{let s=e.icon;return(0,r.jsxs)("button",{onClick:()=>b(e.id),className:"flex items-center space-x-1 px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ".concat(j===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,r.jsx)(s,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.label})]},e.id)})})}),(0,r.jsxs)("div",{className:"p-4 space-y-4",children:["overview"===j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 text-blue-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"最優秀モデル"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==o?void 0:null===(s=o.best_model)||void 0===s?void 0:s.toUpperCase())||"-"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)(k.A,{className:"h-5 w-5 text-green-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"予測精度"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==o?void 0:o.r2)||"-"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)(p.A,{className:"h-5 w-5 text-yellow-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"MAE"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==o?void 0:o.mae)||"-"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)(A.A,{className:"h-5 w-5 text-purple-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"データ数"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==o?void 0:o.total_data_points)||"-"})]})]}),(0,r.jsx)(Q,{data:M,type:"line",title:"株価推移と移動平均",dataKey:"実際価格",lines:[{dataKey:"実際価格",stroke:"#2563eb",strokeWidth:2},{dataKey:"SMA_5",stroke:"#dc2626",strokeWidth:1},{dataKey:"SMA_10",stroke:"#059669",strokeWidth:1},{dataKey:"SMA_25",stroke:"#d97706",strokeWidth:1},{dataKey:"SMA_50",stroke:"#7c3aed",strokeWidth:1}],height:250})]}),"predictions"===j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q,{data:F,type:"line",title:"予測 vs 実際値",dataKey:"実際値",lines:[{dataKey:"実際値",stroke:"#2563eb",strokeWidth:2},{dataKey:"予測値",stroke:"#dc2626",strokeWidth:2}],height:250}),(0,r.jsx)(Q,{data:d.slice(0,20).map(e=>({index:e.index,誤差:e.error.toFixed(2)})),type:"bar",title:"予測誤差分布",dataKey:"誤差",height:200})]}),"models"===j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,r.jsx)("div",{className:"px-4 py-3 border-b",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"モデル性能比較"})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:n.slice(0,5).map((e,s)=>(0,r.jsx)("div",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:s+1}),0===s&&(0,r.jsx)("span",{className:"text-green-600",children:"\uD83C\uDFC6"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.type})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["R\xb2: ",e.r2.toFixed(4)]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["MAE: ",e.mae.toFixed(4)]})]})]})},e.name))})]}),(0,r.jsx)(Q,{data:n,type:"bar",title:"MAE比較",dataKey:"mae",height:200})]}),"analysis"===j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q,{data:c,type:"bar",title:"特徴量重要度",dataKey:"percentage",height:250}),(0,r.jsx)(Q,{data:c.map(e=>(0,l._)((0,a._)({},e),{name:e.feature})),type:"pie",title:"特徴量重要度分布",dataKey:"percentage",height:200}),(0,r.jsx)(Q,{data:d.slice(0,30),type:"scatter",title:"実際値 vs 予測値散布図",dataKey:"predicted",height:250})]}),"risk"===j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"リスク管理"}),(0,r.jsx)(C.A,{className:"h-5 w-5 text-blue-600"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-800",children:"リスクレベル"}),(0,r.jsx)("p",{className:"text-lg font-bold text-red-600",children:"HIGH"})]}),(0,r.jsx)(E.A,{className:"h-6 w-6 text-red-500"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"ポートフォリオ価値"}),(0,r.jsx)("p",{className:"text-lg font-bold text-blue-600",children:"\xa51,250,000"})]}),(0,r.jsx)(u.A,{className:"h-6 w-6 text-blue-500"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"最大ドローダウン"}),(0,r.jsx)("p",{className:"text-lg font-bold text-yellow-600",children:"8.5%"})]}),(0,r.jsx)(T.A,{className:"h-6 w-6 text-yellow-500"})]})]})]}),(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(E.A,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"リスク管理推奨事項"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,r.jsx)("li",{children:"• ポートフォリオリスクが高すぎます"}),(0,r.jsx)("li",{children:"• ポジションサイズを縮小してください"}),(0,r.jsx)("li",{children:"• 損切りラインを設定することを推奨"})]})]})]})})]})]})]})}var ee=t(67072),es=t(36954),et=t(54947),ea=t(61594),el=t(66889),er=t(54561);function ei(e){var s;let{onAnalysisComplete:t,onAnalysisStart:a}=e,[l,n]=(0,i.useState)(!1),[c,d]=(0,i.useState)(0),[o,x]=(0,i.useState)(""),[h,u]=(0,i.useState)(null),[g,j]=(0,i.useState)(null),[b,f]=(0,i.useState)("00:00"),[y,N]=(0,i.useState)([]),[A,C]=(0,i.useState)(!1),[E,T]=(0,i.useState)(!1),[_,I]=(0,i.useState)([{id:"ultra_fast",name:"超高速分析",icon:ee.A,time:"1-2分",color:"bg-blue-500"},{id:"comprehensive",name:"包括的分析",icon:p.A,time:"3-5分",color:"bg-green-500"},{id:"trading",name:"トレーディング",icon:k.A,time:"4-6分",color:"bg-purple-500"}]),[D,R]=(0,i.useState)("ultra_fast"),{runAnalysisWithSettings:L,isAnalyzing:P,analysisProgress:M,analysisStatus:F,getAnalysisDescription:O}=(0,er.P)();(0,i.useEffect)(()=>{let e=localStorage.getItem("mobileAnalysisHistory");if(e)try{let s=JSON.parse(e);N(s)}catch(e){console.error("履歴読み込みエラー:",e)}},[]);let z=e=>{let s=[e,...y.slice(0,4)];N(s),localStorage.setItem("mobileAnalysisHistory",JSON.stringify(s))},K=async()=>{try{n(!0),d(0),x("設定に基づく分析を開始しています..."),j(null),u(null),f("00:00"),null==a||a();let e=await L({analysisType:D,useSettings:!0});if(e.success){d(100),x("分析完了！"),u(e.result),null==t||t(e.result);let s={id:"mobile_".concat(Date.now()),type:D,timestamp:new Date().toISOString(),duration:b,status:"success",result:e.result};z(s)}else j(e.error||"分析に失敗しました"),x("分析に失敗しました")}catch(e){j(e instanceof Error?e.message:"不明なエラーが発生しました"),x("分析に失敗しました")}finally{n(!1)}},U=()=>{n(!1),d(0),x(""),j(null),u(null)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(es.A,{className:"w-6 h-6 text-blue-600"}),(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-800",children:"5分完結分析"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>C(!A),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",children:(0,r.jsx)(et.A,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:()=>T(!E),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]})]})})}),(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"クイックアクション"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3",children:_.map(e=>{let s=e.icon;return(0,r.jsx)("button",{onClick:()=>R(e.id),className:"p-4 rounded-lg border-2 transition-all ".concat(D===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color," text-white"),children:(0,r.jsx)(s,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[(0,r.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["予想時間: ",e.time]})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:D===e.id?"選択中":""})]})},e.id)})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800",children:"分析実行"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[null===(s=_.find(e=>e.id===D))||void 0===s?void 0:s.name,"を実行"]})]}),(0,r.jsx)("button",{onClick:K,disabled:l,className:"px-6 py-3 rounded-lg font-medium transition-all ".concat(l?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:l?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin"}),"実行中..."]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.A,{className:"w-4 h-4"}),"分析実行"]})})]}),l&&(0,r.jsxs)("div",{className:"space-y-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"分析実行中"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-blue-600",children:["経過時間: ",b]}),(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:[Math.round(c),"%"]})]})]}),(0,r.jsx)("div",{className:"w-full bg-blue-100 rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(c,"%")}})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin text-blue-600"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:o})]})]}),g&&(0,r.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,r.jsx)(ea.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"エラーが発生しました"})]}),(0,r.jsx)("p",{className:"text-red-700 text-sm mt-1",children:g}),(0,r.jsx)("button",{onClick:U,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"再試行"})]}),h&&(0,r.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-800",children:[(0,r.jsx)(S.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"分析完了"})]}),(0,r.jsx)("p",{className:"text-green-700 text-sm mt-1",children:"分析が正常に完了しました"}),(0,r.jsx)("button",{onClick:U,className:"mt-2 text-green-600 hover:text-green-800 text-sm underline",children:"新しい分析を実行"})]})]}),A&&y.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)(et.A,{className:"w-5 h-5"}),"分析履歴"]}),(0,r.jsx)("div",{className:"space-y-2",children:y.map((e,s)=>{var t;return(0,r.jsxs)("div",{className:"p-3 rounded-lg border ".concat("success"===e.status?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["success"===e.status?(0,r.jsx)(S.A,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(ea.A,{className:"w-4 h-4 text-red-600"}),(0,r.jsx)("span",{className:"font-medium text-sm",children:(null===(t=_.find(s=>s.id===e.type))||void 0===t?void 0:t.name)||e.type})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,r.jsx)(el.A,{className:"w-3 h-3"}),new Date(e.timestamp).toLocaleString("ja-JP")]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-600",children:["実行時間: ",e.duration]}),0===s&&"success"===e.status&&(0,r.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"最新結果"})]})]},e.id)})})]}),E&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"w-5 h-5"}),"設定"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"通知を有効にする"}),(0,r.jsx)("input",{type:"checkbox",className:"rounded"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"自動分析を有効にする"}),(0,r.jsx)("input",{type:"checkbox",className:"rounded"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"ダークモード"}),(0,r.jsx)("input",{type:"checkbox",className:"rounded"})]})]})]})]}),(0,r.jsx)("div",{className:"bg-white border-t mt-8",children:(0,r.jsx)("div",{className:"px-4 py-3 text-center",children:(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"1日5分で完結する超高速分析システム"})})})]})}function en(e){let{onRefresh:s,children:t,threshold:a=80,resistance:l=.5}=e,[n,c]=(0,i.useState)(!1),[d,o]=(0,i.useState)(!1),[x,m]=(0,i.useState)(0),[h,u]=(0,i.useState)(0),[g,p]=(0,i.useState)(0),[j,b]=(0,i.useState)(!1),f=(0,i.useRef)(null),y=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=f.current;if(!e)return;let t=s=>{0===e.scrollTop&&(b(!0),u(s.touches[0].clientY),p(s.touches[0].clientY))},r=e=>{if(!j)return;let s=e.touches[0].clientY,t=s-h;if(t>0){e.preventDefault();let r=Math.min(t*l,1.5*a);m(r),p(s),r>0&&c(!0)}},i=async()=>{if(!j||!n){d();return}if(x>=a){o(!0);try{await s()}catch(e){console.error("Refresh failed:",e)}finally{o(!1)}}d()},d=()=>{c(!1),m(0),u(0),p(0),b(!1)};return e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("touchmove",r,{passive:!1}),e.addEventListener("touchend",i,{passive:!1}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",r),e.removeEventListener("touchend",i)}},[j,n,x,h,a,l,s]);let N=Math.min(x/a,1),w=x>=a;return(0,r.jsxs)("div",{ref:f,className:"relative overflow-auto",children:[(0,r.jsx)("div",{ref:y,className:"fixed top-0 left-0 right-0 z-50 transition-all duration-200 ".concat(n||d?"translate-y-0":"-translate-y-full"),style:{transform:"translateY(".concat(Math.max(0,x-60),"px)")},children:(0,r.jsxs)("div",{className:"bg-white shadow-lg border-b",children:[(0,r.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"transition-all duration-200 ".concat(d?"animate-spin":""),style:{transform:"rotate(".concat(180*N,"deg)")},children:(0,r.jsx)(v.A,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-700",children:d?"更新中...":w?"離すと更新されます":"引っ張って更新"})]})}),(0,r.jsx)("div",{className:"h-1 bg-gray-200",children:(0,r.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-200",style:{width:"".concat(100*N,"%")}})})]})}),(0,r.jsx)("div",{className:"transition-transform duration-200",style:{transform:"translateY(".concat(n?Math.min(.3*x,20):0,"px)")},children:t}),n&&(0,r.jsx)("div",{className:"fixed inset-0 pointer-events-none z-40",style:{background:"linear-gradient(to bottom, \n              rgba(59, 130, 246, ".concat(.1*N,") 0%, \n              rgba(59, 130, 246, 0) 100%)")}})]})}var ec=t(20853),ed=t(98867);let eo=[{code:"7203.T",name:"トヨタ自動車",sector:"自動車"},{code:"6758.T",name:"ソニーグループ",sector:"エンターテインメント"},{code:"9984.T",name:"ソフトバンクグループ",sector:"通信"},{code:"9432.T",name:"日本電信電話",sector:"通信"},{code:"6861.T",name:"キーエンス",sector:"電子部品"},{code:"4063.T",name:"信越化学工業",sector:"化学"},{code:"8035.T",name:"東京エレクトロン",sector:"半導体"},{code:"8306.T",name:"三菱UFJフィナンシャル・グループ",sector:"金融"},{code:"4503.T",name:"アステラス製薬",sector:"製薬"},{code:"4519.T",name:"中外製薬",sector:"製薬"},{code:"4061.T",name:"デンカ",sector:"化学"},{code:"4568.T",name:"第一三共",sector:"製薬"},{code:"6501.T",name:"日立製作所",sector:"電機"},{code:"6752.T",name:"パナソニック",sector:"電機"},{code:"6981.T",name:"村田製作所",sector:"電子部品"},{code:"7741.T",name:"HOYA",sector:"光学機器"},{code:"7974.T",name:"任天堂",sector:"エンターテインメント"},{code:"8001.T",name:"伊藤忠商事",sector:"商社"},{code:"8002.T",name:"丸紅",sector:"商社"},{code:"8031.T",name:"三井物産",sector:"商社"}];function ex(e){let{selectedSymbols:s,onSymbolsChange:t,onAnalysis:a,isAnalyzing:l=!1}=e,[n,c]=(0,i.useState)(""),[d,o]=(0,i.useState)(!1),[x,m]=(0,i.useState)(eo);(0,i.useEffect)(()=>{n?m(eo.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.code.toLowerCase().includes(n.toLowerCase())||e.sector.toLowerCase().includes(n.toLowerCase()))):m(eo)},[n]);let h=e=>{s.includes(e)?t(s.filter(s=>s!==e)):t([...s,e])},g=e=>{t(s.filter(s=>s!==e))},p=e=>eo.find(s=>s.code===e);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(ec.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"銘柄名、コード、セクターで検索...",value:n,onChange:e=>c(e.target.value),onFocus:()=>o(!0),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("button",{onClick:()=>a(s),disabled:0===s.length||l,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),l?"分析中...":"分析実行"]})]}),d&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(e=>(0,r.jsxs)("div",{onClick:()=>{h(e.code),c(""),o(!1)},className:"flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.code," • ",e.sector]})]}),s.includes(e.code)&&(0,r.jsx)(ed.A,{className:"h-4 w-4 text-blue-600"})]},e.code))})]}),s.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["選択された銘柄 (",s.length,"件)"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>{let s=p(e);return(0,r.jsxs)("div",{className:"flex items-center space-x-2 bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:(null==s?void 0:s.name)||e}),(0,r.jsxs)("span",{className:"text-blue-500",children:["(",e,")"]}),(0,r.jsx)("button",{onClick:()=>g(e),className:"text-blue-500 hover:text-blue-700",children:(0,r.jsx)(j.A,{className:"h-3 w-3"})})]},e)})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"クイック選択"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{onClick:()=>t(["7203.T","6758.T","9984.T"]),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",children:"主要3銘柄"}),(0,r.jsx)("button",{onClick:()=>t(["7203.T","6758.T","9984.T","9432.T","6861.T"]),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",children:"主要5銘柄"}),(0,r.jsx)("button",{onClick:()=>t(eo.slice(0,10).map(e=>e.code)),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",children:"主要10銘柄"}),(0,r.jsx)("button",{onClick:()=>t([]),className:"px-3 py-1 text-xs bg-red-100 text-red-700 rounded-full hover:bg-red-200",children:"全クリア"})]})]})]})}function em(e){let{selectedSymbols:s}=e,[t,a]=(0,i.useState)([]),[l,n]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null);(0,i.useEffect)(()=>{s.length>0&&o()},[s]);let o=async()=>{try{n(!0),d(null);let e=await fetch("./data/symbol_analysis_results.json");if(!e.ok)throw Error("分析結果が見つかりません");let s=await e.json(),t=Object.values(s.analysis_results||{});a(t)}catch(e){console.error("分析結果読み込みエラー:",e),d("分析結果の読み込みに失敗しました")}finally{n(!1)}},x=e=>{switch(e){case"BUY":return(0,r.jsx)(u.A,{className:"h-4 w-4 text-green-600"});case"SELL":return(0,r.jsx)(T.A,{className:"h-4 w-4 text-red-600"});default:return(0,r.jsx)(N.A,{className:"h-4 w-4 text-gray-600"})}},m=e=>{switch(e){case"BUY":return"text-green-600 bg-green-50";case"SELL":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},h=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":"text-red-600";return l?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:"分析結果を読み込み中..."})]}):c?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8 text-red-600",children:[(0,r.jsx)(ea.A,{className:"h-5 w-5 mr-2"}),(0,r.jsx)("span",{children:c})]}):0===t.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"分析結果がありません。銘柄を選択して分析を実行してください。"}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"選択された銘柄の分析結果"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.symbol}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 rounded-full text-xs ".concat(m(e.signals.overall_signal)),children:[x(e.signals.overall_signal),(0,r.jsx)("span",{children:e.signals.overall_signal})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"現在価格:"}),(0,r.jsxs)("span",{className:"font-medium",children:["\xa5",e.stats.current_price.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"変化率:"}),(0,r.jsxs)("span",{className:"font-medium ".concat(e.stats.change_percent>=0?"text-green-600":"text-red-600"),children:[e.stats.change_percent>=0?"+":"",e.stats.change_percent.toFixed(2),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"信頼度:"}),(0,r.jsxs)("span",{className:"font-medium ".concat(h(e.signals.confidence)),children:[(100*e.signals.confidence).toFixed(0),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"ボラティリティ:"}),(0,r.jsxs)("span",{className:"font-medium",children:[(100*e.stats.volatility).toFixed(1),"%"]})]})]}),(0,r.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,r.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"RSI:"}),(0,r.jsx)("span",{className:m(e.signals.rsi_signal),children:e.signals.rsi_signal})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"MACD:"}),(0,r.jsx)("span",{className:m(e.signals.macd_signal),children:e.signals.macd_signal})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"BB:"}),(0,r.jsx)("span",{className:m(e.signals.bb_signal),children:e.signals.bb_signal})]})]})})]},e.symbol))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"技術指標詳細"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"銘柄"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RSI"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MACD"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BB%"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SMA5"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SMA25"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.symbol}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.rsi?e.technical.rsi.toFixed(2):"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.macd?e.technical.macd.toFixed(4):"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.bb_percent?(100*e.technical.bb_percent).toFixed(1)+"%":"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.sma_5?"\xa5"+e.technical.sma_5.toLocaleString():"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.sma_25?"\xa5"+e.technical.sma_25.toLocaleString():"N/A"})]},e.symbol))})]})})]})]})}var eh=t(38207);let eu=[{type:"ultra_fast",name:"超高速分析",description:"1日5分で完結する最適化された分析",icon:(0,r.jsx)(ee.A,{className:"w-5 h-5"}),estimatedTime:"1-2分"},{type:"comprehensive",name:"包括的分析",description:"データ取得から予測まで全工程を自動実行",icon:(0,r.jsx)(p.A,{className:"w-5 h-5"}),estimatedTime:"3-5分"},{type:"symbols",name:"銘柄分析",description:"指定銘柄の詳細分析を実行",icon:(0,r.jsx)(u.A,{className:"w-5 h-5"}),estimatedTime:"2-3分"},{type:"trading",name:"トレーディング分析",description:"統合トレーディングシステムによる分析",icon:(0,r.jsx)(ee.A,{className:"w-5 h-5"}),estimatedTime:"4-6分"},{type:"sentiment",name:"感情分析",description:"ニュース感情分析による予測",icon:(0,r.jsx)(eh.A,{className:"w-5 h-5"}),estimatedTime:"3-4分"}];function eg(e){var s,t,a;let{onAnalysisComplete:l,onAnalysisStart:n}=e,[c,d]=(0,i.useState)(!1),[o,x]=(0,i.useState)("ultra_fast"),[h,g]=(0,i.useState)(0),[p,j]=(0,i.useState)(""),[b,f]=(0,i.useState)(!1),[y,N]=(0,i.useState)(null),[k,A]=(0,i.useState)(null),[C,E]=(0,i.useState)(null),[T,_]=(0,i.useState)("00:00"),[I,D]=(0,i.useState)([]),[R,L]=(0,i.useState)(!1),[P,M]=(0,i.useState)(null),{runAnalysisWithSettings:F,isAnalyzing:O,analysisProgress:z,analysisStatus:K,getAnalysisDescription:U}=(0,er.P)(),G=eu.find(e=>e.type===o),J=e=>{let s=[e,...I.slice(0,9)];D(s),localStorage.setItem("analysisHistory",JSON.stringify(s))},B=()=>{let e=localStorage.getItem("analysisHistory");if(e)try{let s=JSON.parse(e);D(s),s.length>0&&M(s[0].result)}catch(e){console.error("履歴読み込みエラー:",e)}};i.useEffect(()=>{B()},[]);let W=async()=>{try{let e="analysis_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));E(e),d(!0),g(0),j("設定に基づく分析を開始しています..."),A(null),N(null),_("00:00"),null==n||n();let s=await F({analysisType:o,useSettings:!0});if(s.success){j("分析が完了しました！"),g(100),N(s.result),null==l||l(s.result);let t={id:e,type:o,timestamp:new Date().toISOString(),duration:T,status:"success",result:s.result};J(t)}else{A(s.error||"分析に失敗しました"),j("分析に失敗しました");let t={id:e,type:o,timestamp:new Date().toISOString(),duration:T,status:"error",error:s.error};J(t)}}catch(e){A(e instanceof Error?e.message:"不明なエラーが発生しました"),j("分析に失敗しました")}finally{d(!1)}},H=()=>{d(!1),g(0),j(""),A(null),N(null)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[(0,r.jsx)(w.A,{className:"w-6 h-6 text-blue-600"}),"ワンクリック分析実行"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>L(!R),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"分析履歴",children:(0,r.jsx)(et.A,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:()=>f(!b),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"設定",children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]})]}),b&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"分析タイプを選択"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:eu.map(e=>(0,r.jsxs)("button",{onClick:()=>x(e.type),className:"p-3 rounded-lg border-2 transition-all ".concat(o===e.type?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[e.icon,(0,r.jsx)("span",{className:"font-medium",children:e.name})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["予想時間: ",e.estimatedTime]})]},e.type))})]}),R&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)(et.A,{className:"w-5 h-5"}),"分析履歴"]}),0===I.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"分析履歴がありません"}):(0,r.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:I.map((e,s)=>{var t;return(0,r.jsxs)("div",{className:"p-3 rounded-lg border ".concat("success"===e.status?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["success"===e.status?(0,r.jsx)(S.A,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(ea.A,{className:"w-4 h-4 text-red-600"}),(0,r.jsx)("span",{className:"font-medium text-sm",children:(null===(t=eu.find(s=>s.type===e.type))||void 0===t?void 0:t.name)||e.type})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,r.jsx)(el.A,{className:"w-3 h-3"}),new Date(e.timestamp).toLocaleString("ja-JP")]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-600",children:["実行時間: ",e.duration]}),0===s&&"success"===e.status&&(0,r.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"最新結果"})]})]},e.id)})})]}),P&&y&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"w-5 h-5"}),"前回結果との比較"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-blue-700 mb-2",children:"前回の結果"}),(0,r.jsxs)("div",{className:"text-sm text-blue-600",children:[(0,r.jsxs)("p",{children:["実行日時: ",new Date(null===(s=I[0])||void 0===s?void 0:s.timestamp).toLocaleString("ja-JP")]}),(0,r.jsxs)("p",{children:["実行時間: ",null===(t=I[0])||void 0===t?void 0:t.duration]}),(0,r.jsxs)("p",{children:["分析タイプ: ",null===(a=eu.find(e=>{var s;return e.type===(null===(s=I[0])||void 0===s?void 0:s.type)}))||void 0===a?void 0:a.name]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-green-700 mb-2",children:"今回の結果"}),(0,r.jsxs)("div",{className:"text-sm text-green-600",children:[(0,r.jsxs)("p",{children:["実行日時: ",new Date().toLocaleString("ja-JP")]}),(0,r.jsxs)("p",{children:["実行時間: ",T]}),(0,r.jsxs)("p",{children:["分析タイプ: ",null==G?void 0:G.name]})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 text-gray-600 mr-2"}),(0,r.jsx)("h4",{className:"font-medium text-gray-800",children:"実行設定"})]}),(()=>{let e=U();return(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("div",{children:["• ",e.prediction]}),(0,r.jsxs)("div",{children:["• ",e.model]}),(0,r.jsxs)("div",{children:["• ",e.retrain]}),(0,r.jsxs)("div",{children:["• ",e.features]}),(0,r.jsxs)("div",{children:["• ",e.data]})]})})()]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-800",children:[null==G?void 0:G.name,"を実行"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:null==G?void 0:G.description}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["予想時間: ",null==G?void 0:G.estimatedTime]})]}),(0,r.jsx)("button",{onClick:W,disabled:c,className:"px-6 py-3 rounded-lg font-medium transition-all ".concat(c?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:c?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin"}),"実行中..."]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.A,{className:"w-4 h-4"}),"分析実行"]})})]}),c&&(0,r.jsxs)("div",{className:"space-y-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"分析実行中"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-blue-600",children:["経過時間: ",T]}),(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:[h,"%"]})]})]}),(0,r.jsx)("div",{className:"w-full bg-blue-100 rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(h,"%")}})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin text-blue-600"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:p})]}),C&&(0,r.jsxs)("p",{className:"text-xs text-blue-500",children:["分析ID: ",C]})]}),k&&(0,r.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,r.jsx)(ea.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"エラーが発生しました"})]}),(0,r.jsx)("p",{className:"text-red-700 text-sm mt-1",children:k}),(0,r.jsx)("button",{onClick:H,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"再試行"})]}),y&&(0,r.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-800",children:[(0,r.jsx)(S.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"分析完了"})]}),(0,r.jsx)("p",{className:"text-green-700 text-sm mt-1",children:y.message}),y.webDataGenerated&&(0,r.jsx)("p",{className:"text-green-600 text-xs mt-1",children:"✅ Webデータも更新されました"}),(0,r.jsx)("button",{onClick:H,className:"mt-2 text-green-600 hover:text-green-800 text-sm underline",children:"新しい分析を実行"})]})]})]})}var ep=t(33473),ej=t(80738),eb=t(45686);let ef=[{code:"7203.T",name:"トヨタ自動車",sector:"自動車"},{code:"6758.T",name:"ソニーグループ",sector:"エンターテインメント"},{code:"9984.T",name:"ソフトバンクグループ",sector:"通信"},{code:"9432.T",name:"日本電信電話",sector:"通信"},{code:"6861.T",name:"キーエンス",sector:"電子部品"},{code:"4063.T",name:"信越化学工業",sector:"化学"},{code:"8035.T",name:"東京エレクトロン",sector:"半導体"},{code:"8306.T",name:"三菱UFJフィナンシャル・グループ",sector:"金融"},{code:"4503.T",name:"アステラス製薬",sector:"製薬"},{code:"4519.T",name:"中外製薬",sector:"製薬"},{code:"4061.T",name:"デンカ",sector:"化学"},{code:"4568.T",name:"第一三共",sector:"製薬"},{code:"6501.T",name:"日立製作所",sector:"電機"},{code:"6752.T",name:"パナソニック",sector:"電機"},{code:"6981.T",name:"村田製作所",sector:"電子部品"},{code:"7741.T",name:"HOYA",sector:"光学機器"},{code:"7974.T",name:"任天堂",sector:"エンターテインメント"},{code:"8001.T",name:"伊藤忠商事",sector:"商社"},{code:"8002.T",name:"丸紅",sector:"商社"},{code:"8031.T",name:"三井物産",sector:"商社"},{code:"2914.T",name:"日本たばこ産業",sector:"たばこ"},{code:"3407.T",name:"旭化成",sector:"化学"},{code:"3401.T",name:"帝人",sector:"化学"},{code:"3402.T",name:"東レ",sector:"化学"},{code:"3405.T",name:"クラレ",sector:"化学"},{code:"3407.T",name:"旭化成",sector:"化学"},{code:"3408.T",name:"サカタのタネ",sector:"農業"},{code:"3409.T",name:"日本水産",sector:"水産"},{code:"3410.T",name:"マルハニチロ",sector:"水産"},{code:"3411.T",name:"日本製紙",sector:"製紙"},{code:"3412.T",name:"王子ホールディングス",sector:"製紙"},{code:"3413.T",name:"日本製紙",sector:"製紙"},{code:"3414.T",name:"日本製紙",sector:"製紙"},{code:"3415.T",name:"日本製紙",sector:"製紙"},{code:"3416.T",name:"日本製紙",sector:"製紙"},{code:"3417.T",name:"日本製紙",sector:"製紙"},{code:"3418.T",name:"日本製紙",sector:"製紙"},{code:"3419.T",name:"日本製紙",sector:"製紙"},{code:"3420.T",name:"日本製紙",sector:"製紙"}];function ey(e){let{onMonitoringChange:s,onConfigChange:t}=e,[n,c]=(0,i.useState)(""),[d,o]=(0,i.useState)(!1),[x,h]=(0,i.useState)(ef),[u,p]=(0,i.useState)([]),[j,b]=(0,i.useState)(!1),[f,y]=(0,i.useState)({interval:30,priceChangeThreshold:3,volumeSpikeThreshold:200,enableAlerts:!0,alertEmail:""});(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/monitoring"),s=await e.json();s.stocks&&p(s.stocks),s.config&&y(s.config)}catch(t){console.error("監視データ読み込みエラー:",t);let e=localStorage.getItem("monitoredStocks"),s=localStorage.getItem("monitoringConfig");e&&p(JSON.parse(e)),s&&y(JSON.parse(s))}})()},[]),(0,i.useEffect)(()=>{null==s||s(u),null==t||t(f)},[u,f,s,t]),(0,i.useEffect)(()=>{(async()=>{try{await fetch("/api/monitoring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stocks:u,config:f})})}catch(e){console.error("監視データ保存エラー:",e),localStorage.setItem("monitoredStocks",JSON.stringify(u)),localStorage.setItem("monitoringConfig",JSON.stringify(f))}})()},[u,f]),(0,i.useEffect)(()=>{n?h(ef.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.code.toLowerCase().includes(n.toLowerCase())||e.sector.toLowerCase().includes(n.toLowerCase()))):h(ef)},[n]);let N=e=>{u.some(s=>s.code===e.code)||p([...u,{code:e.code,name:e.name,sector:e.sector,isMonitoring:!0,lastUpdate:new Date().toISOString(),alerts:[]}]),c(""),o(!1)},v=e=>{p(u.filter(s=>s.code!==e))},w=e=>{p(u.map(s=>s.code===e?(0,l._)((0,a._)({},s),{isMonitoring:!s.isMonitoring}):s))},S=(e,s)=>{y((0,l._)((0,a._)({},f),{[e]:s}))},A=e=>{if(!e.isMonitoring)return"停止中";let s=new Date(e.lastUpdate),t=Math.floor((new Date().getTime()-s.getTime())/6e4);return t<1?"監視中":t<5?"最近更新":"".concat(t,"分前")},C=e=>{if(!e.isMonitoring)return"text-gray-500";let s=new Date(e.lastUpdate),t=Math.floor((new Date().getTime()-s.getTime())/6e4);return t<1?"text-green-600":t<5?"text-yellow-600":"text-red-600"};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"銘柄監視管理"}),(0,r.jsx)("p",{className:"text-gray-600",children:"監視したい銘柄を選択・管理できます"})]}),(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsxs)("button",{onClick:()=>b(!j),className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"設定"]})})]}),j&&(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"監視設定"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"監視間隔（秒）"}),(0,r.jsx)("input",{type:"number",value:f.interval,onChange:e=>S("interval",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"10",max:"300"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"価格変動閾値（%）"}),(0,r.jsx)("input",{type:"number",value:f.priceChangeThreshold,onChange:e=>S("priceChangeThreshold",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0.1",max:"50",step:"0.1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"出来高急増閾値（%）"}),(0,r.jsx)("input",{type:"number",value:f.volumeSpikeThreshold,onChange:e=>S("volumeSpikeThreshold",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"50",max:"1000",step:"10"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"アラートメール"}),(0,r.jsx)("input",{type:"email",value:f.alertEmail,onChange:e=>S("alertEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"alert@example.com"})]})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:f.enableAlerts,onChange:e=>S("enableAlerts",e.target.checked),className:"mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"アラートを有効にする"})]})})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"銘柄を追加"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(ec.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"銘柄名、コード、セクターで検索...",value:n,onChange:e=>c(e.target.value),onFocus:()=>o(!0),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),d&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(e=>{let s=u.some(s=>s.code===e.code);return(0,r.jsxs)("div",{onClick:()=>N(e),className:"flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer ".concat(s?"opacity-50 cursor-not-allowed":""),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.code," • ",e.sector]})]}),s?(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"追加済み"}):(0,r.jsx)(ep.A,{className:"h-4 w-4 text-blue-600"})]},e.code)})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["監視中の銘柄 (",u.length,"件)"]})}),0===u.length?(0,r.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,r.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("p",{children:"監視中の銘柄がありません"}),(0,r.jsx)("p",{className:"text-sm",children:"上記の検索ボックスから銘柄を追加してください"})]}):(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:u.map(e=>(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.code," • ",e.sector]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium ".concat(C(e)),children:A(e)}),e.alerts.length>0&&(0,r.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,r.jsx)(E.A,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{className:"text-sm",children:e.alerts.length})]})]})]}),e.currentPrice&&(0,r.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["価格: \xa5",e.currentPrice.toLocaleString()]}),e.changePercent&&(0,r.jsxs)("span",{className:"font-medium ".concat(e.changePercent>=0?"text-green-600":"text-red-600"),children:[e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]}),e.volume&&(0,r.jsxs)("span",{className:"text-gray-600",children:["出来高: ",e.volume.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>w(e.code),className:"flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(e.isMonitoring?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.isMonitoring?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"h-3 w-3 mr-1"}),"監視中"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ej.A,{className:"h-3 w-3 mr-1"}),"停止中"]})}),(0,r.jsxs)("button",{onClick:()=>v(e.code),className:"flex items-center px-3 py-1 text-red-600 hover:bg-red-50 rounded-full",children:[(0,r.jsx)(eb.A,{className:"h-3 w-3 mr-1"}),"削除"]})]})]}),e.alerts.length>0&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-red-50 rounded-lg",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"アラート"}),(0,r.jsx)("div",{className:"space-y-1",children:e.alerts.map((e,s)=>(0,r.jsx)("div",{className:"text-sm text-red-700",children:e},s))})]})]},e.code))})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"クイックアクション"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{["7203.T","6758.T","9984.T","9432.T","6861.T"].forEach(e=>{let s=ef.find(s=>s.code===e);s&&!u.some(s=>s.code===e)&&N(s)})},className:"flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",children:[(0,r.jsx)(ep.A,{className:"h-4 w-4 mr-2"}),"主要5銘柄を追加"]}),(0,r.jsxs)("button",{onClick:()=>{p(u.map(e=>(0,l._)((0,a._)({},e),{isMonitoring:!0})))},className:"flex items-center px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"全銘柄監視開始"]}),(0,r.jsxs)("button",{onClick:()=>{p(u.map(e=>(0,l._)((0,a._)({},e),{isMonitoring:!1})))},className:"flex items-center px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200",children:[(0,r.jsx)(ej.A,{className:"h-4 w-4 mr-2"}),"全銘柄監視停止"]}),(0,r.jsxs)("button",{onClick:()=>{confirm("全ての監視銘柄を削除しますか？")&&p([])},className:"flex items-center px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200",children:[(0,r.jsx)(eb.A,{className:"h-4 w-4 mr-2"}),"全削除"]})]})]})]})}function eN(e){let{symbols:s=[],autoRefresh:t=!0,refreshInterval:a=3e4}=e,[l,n]=(0,i.useState)([]),[c,d]=(0,i.useState)(!1),[o,x]=(0,i.useState)(null),[m,h]=(0,i.useState)(null),[g,p]=(0,i.useState)({buy:0,sell:0,hold:0,strong_buy:0,strong_sell:0});(0,i.useEffect)(()=>{if(t){let e=setInterval(j,a);return()=>clearInterval(e)}},[t,a]),(0,i.useEffect)(()=>{j()},[]);let j=async()=>{try{d(!0),x(null);let e=await fetch("/api/trading-signals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:s})});if(!e.ok)throw Error("シグナルデータの取得に失敗しました");let t=await e.json();n(t.top_signals||[]),p(t.summary||{}),h(new Date)}catch(e){console.error("シグナル取得エラー:",e),x("シグナルデータの取得に失敗しました")}finally{d(!1)}},b=e=>{switch(e){case"STRONG_BUY":return(0,r.jsx)(u.A,{className:"h-5 w-5 text-green-600"});case"BUY":return(0,r.jsx)(u.A,{className:"h-4 w-4 text-green-500"});case"STRONG_SELL":return(0,r.jsx)(T.A,{className:"h-5 w-5 text-red-600"});case"SELL":return(0,r.jsx)(T.A,{className:"h-4 w-4 text-red-500"});default:return(0,r.jsx)(N.A,{className:"h-4 w-4 text-gray-500"})}},f=e=>{switch(e){case"STRONG_BUY":return"text-green-700 bg-green-100 border-green-200";case"BUY":return"text-green-600 bg-green-50 border-green-100";case"STRONG_SELL":return"text-red-700 bg-red-100 border-red-200";case"SELL":return"text-red-600 bg-red-50 border-red-100";default:return"text-gray-600 bg-gray-50 border-gray-100"}},y=e=>{switch(e){case"VERY_STRONG":return"text-green-600";case"STRONG":return"text-blue-600";case"MEDIUM":return"text-yellow-600";case"WEAK":return"text-gray-600";default:return"text-gray-500"}},w=e=>{switch(e){case"LOW":return"text-green-600 bg-green-50";case"MEDIUM":return"text-yellow-600 bg-yellow-50";case"HIGH":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},S=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":"text-red-600",A=e=>new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return o?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(ea.A,{className:"h-5 w-5 text-red-600 mr-2"}),(0,r.jsx)("span",{className:"text-red-600",children:o})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(ee.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"リアルタイム売買シグナル"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[m&&(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["最終更新: ",m.toLocaleTimeString()]}),(0,r.jsxs)("button",{onClick:j,disabled:c,className:"flex items-center space-x-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[(0,r.jsx)(v.A,{className:"h-4 w-4 ".concat(c?"animate-spin":"")}),(0,r.jsx)("span",{children:"更新"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-600",children:"強気買い"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-700",children:g.strong_buy})]}),(0,r.jsx)(u.A,{className:"h-6 w-6 text-green-600"})]})}),(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-600",children:"買い"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-700",children:g.buy})]}),(0,r.jsx)(u.A,{className:"h-5 w-5 text-green-600"})]})}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"ホールド"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-700",children:g.hold})]}),(0,r.jsx)(N.A,{className:"h-5 w-5 text-gray-600"})]})}),(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-600",children:"売り"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-700",children:g.sell})]}),(0,r.jsx)(T.A,{className:"h-5 w-5 text-red-600"})]})}),(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-600",children:"強気売り"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-700",children:g.strong_sell})]}),(0,r.jsx)(T.A,{className:"h-6 w-6 text-red-600"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"上位シグナル"})}),c?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)(v.A,{className:"h-6 w-6 animate-spin text-blue-600 mr-2"}),(0,r.jsx)("span",{className:"text-gray-600",children:"シグナルを取得中..."})]}):0===l.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"シグナルがありません"}):(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:l.map((e,s)=>(0,r.jsxs)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[b(e.signal_type),(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:e.symbol})]}),(0,r.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium border ".concat(f(e.signal_type)),children:e.signal_type}),(0,r.jsx)("div",{className:"px-2 py-1 rounded text-xs ".concat(y(e.strength)),children:e.strength})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"現在価格"}),(0,r.jsx)("p",{className:"text-lg font-semibold",children:A(e.price)})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"信頼度"}),(0,r.jsxs)("p",{className:"text-lg font-semibold ".concat(S(e.confidence)),children:[(100*e.confidence).toFixed(0),"%"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"推奨ポジション"}),(0,r.jsx)("p",{className:"text-lg font-semibold",children:A(e.position_size)})]}),(0,r.jsxs)("div",{className:"px-2 py-1 rounded text-xs ".concat(w(e.risk_level)),children:[(0,r.jsx)(C.A,{className:"h-3 w-3 inline mr-1"}),e.risk_level]})]})]}),(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,r.jsx)(k.A,{className:"h-4 w-4 inline mr-1"}),e.reason]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["更新時刻: ",new Date(e.timestamp).toLocaleString()]})]})]},"".concat(e.symbol,"-").concat(s)))})]})]})}var ev=t(17581),ew=t(90426),eS=t(1466),ek=t(14807),eA=t(35996),eC=t(20994);let eE={network:{type:"network",message:"通信に失敗しました",description:"インターネット接続を確認してください。数分後に再試行してください。",action:"再試行",icon:(0,r.jsx)(eA.A,{className:"w-8 h-8"}),retryable:!0},server:{type:"server",message:"サーバーエラーが発生しました",description:"サーバーが一時的に利用できません。しばらく待ってから再試行してください。",action:"再試行",icon:(0,r.jsx)(eC.A,{className:"w-8 h-8"}),retryable:!0},data:{type:"data",message:"データの読み込みに失敗しました",description:"データファイルが見つからないか、破損している可能性があります。",action:"データを再生成",icon:(0,r.jsx)(E.A,{className:"w-8 h-8"}),retryable:!0},timeout:{type:"timeout",message:"処理がタイムアウトしました",description:"処理に時間がかかりすぎています。しばらく待ってから再試行してください。",action:"再試行",icon:(0,r.jsx)(el.A,{className:"w-8 h-8"}),retryable:!0},unknown:{type:"unknown",message:"予期しないエラーが発生しました",description:"システムに問題が発生しました。しばらく待ってから再試行してください。",action:"再試行",icon:(0,r.jsx)(E.A,{className:"w-8 h-8"}),retryable:!0}};function eT(e){let{error:s,onRetry:t,onGoHome:a,onGetHelp:l,showDetails:n=!1}=e,[c,d]=(0,i.useState)(!1),[x,m]=(0,i.useState)(0),h=eE[(e=>{let s=e.message.toLowerCase();return s.includes("network")||s.includes("fetch")||s.includes("connection")?"network":s.includes("server")||s.includes("500")||s.includes("502")||s.includes("503")?"server":s.includes("data")||s.includes("json")||s.includes("parse")?"data":s.includes("timeout")||s.includes("time")?"timeout":"unknown"})(s)],u=async()=>{d(!0),m(e=>e+1);try{await t()}finally{d(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"text-red-500 mb-4 flex justify-center",children:h.icon}),(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:h.message}),(0,r.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:h.description})]}),c&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin text-blue-600 mr-2"}),(0,r.jsx)("span",{className:"text-blue-700 text-sm",children:0===x?"":1===x?"1回目の再試行中...":2===x?"2回目の再試行中...":"".concat(x,"回目の再試行中...")})]})}),n&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:(0,r.jsxs)("details",{className:"text-xs",children:[(0,r.jsx)("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-800",children:"技術的詳細を表示"}),(0,r.jsxs)("div",{className:"mt-2 text-gray-500 font-mono",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"エラータイプ:"})," ",h.type]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"メッセージ:"})," ",s.message]}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"スタック:"})}),(0,r.jsx)("pre",{className:"text-xs overflow-x-auto",children:s.stack})]})]})}),(0,r.jsxs)("div",{className:"space-y-3",children:[h.retryable&&(0,r.jsx)("button",{onClick:u,disabled:c,className:"w-full flex items-center justify-center px-4 py-3 rounded-lg font-medium transition-colors ".concat(c?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white"),children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin mr-2"}),"再試行中..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"w-4 h-4 mr-2"}),h.action]})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("button",{onClick:a,className:"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"ホームに戻る"]}),l&&(0,r.jsxs)("button",{onClick:l,className:"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(ew.A,{className:"w-4 h-4 mr-2"}),"ヘルプ"]})]})]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"問題が続く場合は、しばらく時間をおいてから再度お試しください。"})})]})})}function e_(e){let{content:s,children:t,position:a="top",delay:l=300,className:n="",maxWidth:c="300px"}=e,[d,o]=(0,i.useState)(!1),[x,m]=(0,i.useState)({top:0,left:0}),h=(0,i.useRef)(null),u=(0,i.useRef)(null),g=(0,i.useRef)(),p=()=>{g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{o(!0),b()},l)},j=()=>{g.current&&clearTimeout(g.current),o(!1)},b=()=>{if(!h.current||!u.current)return;let e=h.current.getBoundingClientRect(),s=u.current.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop,l=window.pageXOffset||document.documentElement.scrollLeft,r=0,i=0;switch(a){case"top":r=e.top+t-s.height-8,i=e.left+l+(e.width-s.width)/2;break;case"bottom":r=e.bottom+t+8,i=e.left+l+(e.width-s.width)/2;break;case"left":r=e.top+t+(e.height-s.height)/2,i=e.left+l-s.width-8;break;case"right":r=e.top+t+(e.height-s.height)/2,i=e.right+l+8}let n=window.innerWidth,c=window.innerHeight;i<8&&(i=8),i+s.width>n-8&&(i=n-s.width-8),r<8&&(r=8),r+s.height>c+t-8&&(r=c+t-s.height-8),m({top:r,left:i})};return(0,i.useEffect)(()=>{if(d){b();let e=()=>b(),s=()=>b();return window.addEventListener("resize",e),window.addEventListener("scroll",s),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",s)}}},[d,a]),(0,i.useEffect)(()=>()=>{g.current&&clearTimeout(g.current)},[]),(0,r.jsxs)("div",{ref:h,onMouseEnter:p,onMouseLeave:j,onFocus:p,onBlur:j,className:"inline-block ".concat(n),children:[t,d&&(0,r.jsx)("div",{ref:u,className:"fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none transition-opacity duration-200 ".concat("top"===a?"mb-2":""),style:{top:"".concat(x.top,"px"),left:"".concat(x.left,"px"),maxWidth:c},children:(0,r.jsxs)("div",{className:"relative",children:[s,(0,r.jsx)("div",{className:"absolute w-2 h-2 bg-gray-900 transform rotate-45 ".concat("top"===a?"top-full left-1/2 -translate-x-1/2 -mt-1":"bottom"===a?"bottom-full left-1/2 -translate-x-1/2 -mb-1":"left"===a?"left-full top-1/2 -translate-y-1/2 -ml-1":"right-full top-1/2 -translate-y-1/2 -mr-1")})]})})]})}function eI(e){let{content:s,children:t,disabled:a=!1,className:l=""}=e;return a?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)(e_,{content:s,position:"top",delay:300,children:(0,r.jsx)("div",{className:l,children:t})})}var eD=t(99053);let eR=[{id:"overview",title:"ダッシュボードの概要",description:"株価予測システムの主要機能と指標を確認できます。システムの稼働状況、最新の更新日時、主要な指標（最優秀モデル、予測精度、MAE、データ数）を確認できます。",icon:(0,r.jsx)(p.A,{className:"w-6 h-6"}),action:"概要タブをクリックして、システムの現在の状況を確認してください",target:"overview"},{id:"analysis",title:"分析の実行",description:"ワンクリックで株価分析を実行し、予測結果を取得できます。ボタンを押すとローディング状態が表示され、処理の進捗が確認できます。",icon:(0,r.jsx)(w.A,{className:"w-6 h-6"}),action:"「分析実行」ボタンをクリックして、ローディング状態と進捗表示を確認してください",target:"analysis"},{id:"refresh",title:"データの更新",description:"最新のデータを取得してダッシュボードを更新します。更新ボタンを押すとローディング状態が表示され、完了後に更新日時が表示されます。",icon:(0,r.jsx)(v.A,{className:"w-6 h-6"}),action:"「更新」ボタンをクリックして、ローディング状態と完了通知を確認してください",target:"refresh"},{id:"predictions",title:"予測結果の確認",description:"実際の株価と予測値の比較、精度の評価を行います。予測vs実際値のチャートと誤差分布を確認できます。",icon:(0,r.jsx)(u.A,{className:"w-6 h-6"}),action:"予測結果タブをクリックして、予測精度を確認してください",target:"predictions"},{id:"models",title:"モデル比較",description:"複数の機械学習モデルの性能を比較し、最適なモデルを選択できます。MAE、RMSE、R\xb2の比較表とチャートを確認できます。",icon:(0,r.jsx)(k.A,{className:"w-6 h-6"}),action:"モデル比較タブをクリックして、各モデルの性能を比較してください",target:"models"},{id:"settings",title:"設定の調整",description:"分析期間、モデル選択、表示オプションなどをカスタマイズできます。設定ボタンをクリックして詳細なオプションを調整できます。",icon:(0,r.jsx)(m.A,{className:"w-6 h-6"}),action:"設定ボタンをクリックして、分析設定をカスタマイズしてください",target:"settings"}];function eL(e){let{isVisible:s,onClose:t,onStepComplete:a,currentTab:l="overview"}=e,[n,c]=(0,i.useState)(0),[d,o]=(0,i.useState)([]),[x,m]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=localStorage.getItem("userGuideCompleted");if(e)try{o(JSON.parse(e))}catch(e){console.error("ガイド進捗の読み込みエラー:",e)}},[]);let u=e=>{o(e),localStorage.setItem("userGuideCompleted",JSON.stringify(e))},g=e=>{d.includes(e)||(u([...d,e]),null==a||a(e))},p=()=>{n<eR.length-1?c(n+1):(g("all"),t())};return s?x?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-6 h-6 text-blue-600"}),"クイックスタートガイド"]}),(0,r.jsx)("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(j.A,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDE80 5分で始める株価予測"}),(0,r.jsx)("p",{className:"text-blue-700 text-sm",children:"以下の手順に従って、システムの基本操作を学習できます。"})]}),(0,r.jsx)("div",{className:"space-y-4",children:eR.map((e,s)=>(0,r.jsx)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat(d.includes(e.id)?"border-green-200 bg-green-50":"border-gray-200 bg-white"),children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(d.includes(e.id)?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"),children:d.includes(e.id)?(0,r.jsx)(S.A,{className:"w-5 h-5"}):e.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 mb-1",children:[s+1,". ",e.title]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),e.action&&(0,r.jsxs)("p",{className:"text-blue-600 text-sm font-medium",children:["\uD83D\uDCA1 ",e.action]})]}),!d.includes(e.id)&&(0,r.jsx)("button",{onClick:()=>g(e.id),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"完了"})]})},e.id))}),(0,r.jsxs)("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"閉じる"}),(0,r.jsx)("button",{onClick:()=>{u(eR.map(e=>e.id)),m(!1)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"すべて完了としてマーク"})]})]})]})})}):(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-6 h-6 text-blue-600"}),"ユーザーガイド"]}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(j.A,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat((n+1)/eR.length*100,"%")}})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["ステップ ",n+1," / ",eR.length]}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:eR[n].title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:eR[n].description})]}),eR[n].action&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,r.jsx)(eD.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-medium",children:eR[n].action})]})}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{n>0&&c(n-1)},disabled:0===n,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"前へ"}),(0,r.jsx)("button",{onClick:()=>{g(eR[n].id),p()},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"スキップ"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{m(!0),c(0)},className:"px-4 py-2 text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"クイックスタート"}),(0,r.jsx)("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:n===eR.length-1?"完了":"次へ"})]})]})]})]})})}):null}var eP=t(47650);let eM={focusRing:!0,screenReader:!0,highContrast:!0,keyboardNavigation:!0,ariaLabels:{tour:"ガイドツアー",tooltip:"ツールチップ",checklist:"チェックリスト",help:"ヘルプ",glossary:"用語集"}};class eF{static getInstance(){return eF.instance||(eF.instance=new eF),eF.instance}saveFocus(){this.currentFocus=document.activeElement,this.currentFocus&&this.focusStack.push(this.currentFocus)}restoreFocus(){if(this.focusStack.length>0){let e=this.focusStack.pop();e&&e.focus&&e.focus()}}focusElement(e){e&&e.focus&&e.focus()}trapFocus(e){let s=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=s[0],a=s[s.length-1],l=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===t&&(a.focus(),e.preventDefault()):document.activeElement===a&&(t.focus(),e.preventDefault()))};return e.addEventListener("keydown",l),()=>{e.removeEventListener("keydown",l)}}clearFocusStack(){this.focusStack=[],this.currentFocus=null}constructor(){this.focusStack=[],this.currentFocus=null}}class eO{static getInstance(){return eO.instance||(eO.instance=new eO),eO.instance}createAnnouncementElement(){this.announcementElement=document.createElement("div"),this.announcementElement.setAttribute("aria-live","polite"),this.announcementElement.setAttribute("aria-atomic","true"),this.announcementElement.className="sr-only",this.announcementElement.style.cssText="\n      position: absolute;\n      left: -10000px;\n      width: 1px;\n      height: 1px;\n      overflow: hidden;\n    ",document.body.appendChild(this.announcementElement)}announce(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite";this.announcementElement&&(this.announcementElement.setAttribute("aria-live",s),this.announcementElement.textContent=e,setTimeout(()=>{this.announcementElement&&(this.announcementElement.textContent="")},1e3))}announceStep(e,s){let t="ガイドステップ: ".concat(e,". ").concat(s);this.announce(t,"assertive")}announceChecklistItem(e,s){let t="チェックリスト項目: ".concat(e," - ").concat(s?"完了":"未完了");this.announce(t)}announceTooltip(e){this.announce("ツールチップ: ".concat(e))}constructor(){this.announcementElement=null,this.createAnnouncementElement()}}class ez{static getInstance(){return ez.instance||(ez.instance=new ez),ez.instance}registerShortcut(e,s){return this.shortcuts.set(e,s),()=>{this.shortcuts.delete(e)}}start(){document.addEventListener("keydown",this.handleKeyDown)}stop(){document.removeEventListener("keydown",this.handleKeyDown)}clear(){this.shortcuts.clear()}constructor(){this.shortcuts=new Map,this.handleKeyDown=e=>{let s=e.key,t=this.shortcuts.get(s);t&&(e.preventDefault(),e.stopPropagation(),t())}}}let eK={focusManager:eF.getInstance(),screenReader:eO.getInstance(),keyboard:ez.getInstance(),isHighContrast:function(){if(window.matchMedia("(-ms-high-contrast: active)").matches)return!0;let e=window.getComputedStyle(document.body);return e.backgroundColor===e.color}(),colorBlindness:function(){let e=document.createElement("canvas").getContext("2d");if(!e)return"normal";e.fillStyle="#ff0000",e.fillRect(0,0,1,1);let s=e.getImageData(0,0,1,1).data;return 255===s[0]&&0===s[1]&&s[2],"normal"}(),generateAriaAttributes:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let s={role:"button",tabIndex:0,"aria-label":eM.ariaLabels[e]||e};switch(e){case"tour":return(0,l._)((0,a._)({},s),{role:"dialog","aria-modal":!0,"aria-labelledby":"tour-title","aria-describedby":"tour-description"});case"tooltip":return(0,l._)((0,a._)({},s),{role:"tooltip","aria-live":"polite"});case"checklist":return(0,l._)((0,a._)({},s),{role:"list","aria-label":"チェックリスト"});case"help":return(0,l._)((0,a._)({},s),{role:"dialog","aria-modal":!0,"aria-labelledby":"help-title"});case"glossary":return(0,l._)((0,a._)({},s),{role:"dialog","aria-modal":!0,"aria-labelledby":"glossary-title"});default:return s}},config:eM};eK.focusManager,eK.screenReader,eK.keyboard;let eU=(0,i.createContext)(null),eG={FIRST_VISIT:"guide_first_visit",COMPLETED_STEPS:"guide_completed_steps",TOUR_COMPLETED:"guide_tour_completed",GUIDE_DISABLED:"guide_disabled",CURRENT_STEP:"guide_current_step"},eJ=[{id:"welcome",target:'[data-guide-target="welcome"]',title:"ようこそ！",body:"J-Quants株価予測システムへようこそ。3分で主要機能を案内します。",placement:"auto",page:"/",next:"navigation"},{id:"navigation",target:'[data-guide-target="navigation"]',title:"ナビゲーション",body:"各ページへの移動はここから。予測・モデル・分析・設定を切り替えできます。",placement:"bottom",page:"/",next:"dashboard-overview"},{id:"dashboard-overview",target:'[data-guide-target="dashboard-overview"]',title:"ダッシュボード概要",body:"今日の投資指示と主要KPIが表示されます。まずはここを確認しましょう。",placement:"auto",page:"/",next:"kpi-metrics"},{id:"kpi-metrics",target:'[data-guide-target="kpi-metrics"]',title:"主要指標の見方",body:"MAE（平均絶対誤差）・R\xb2（決定係数）・予測精度を確認。低いMAEと高いR\xb2が理想的。",placement:"auto",page:"/",next:"candidate-cards"},{id:"candidate-cards",target:'[data-guide-target="candidate-cards"]',title:"候補銘柄カード",body:"推奨銘柄とリスク情報を表示。カードをクリックして詳細分析に進めます。",placement:"auto",page:"/",next:"model-comparison"},{id:"model-comparison",target:'[data-guide-target="model-comparison"]',title:"モデル比較",body:"複数モデルの性能を比較。総合評価→詳細指標の順で確認しましょう。",placement:"auto",page:"/",next:"analysis-features"},{id:"analysis-features",target:'[data-guide-target="analysis-features"]',title:"分析機能",body:"特徴量重要度・残差分析・相関分析でモデルの信頼性を確認できます。",placement:"auto",page:"/",next:"settings-config"},{id:"settings-config",target:'[data-guide-target="settings-config"]',title:"設定",body:"実行時刻・通知先・しきい値を設定。定期的な分析実行に必要です。",placement:"auto",page:"/",next:"help-support"},{id:"help-support",target:'[data-guide-target="help-support"]',title:"ヘルプ・サポート",body:"困った時はF1キーまたは「？」ボタンでクイックヘルプを表示できます。",placement:"auto",page:"/",next:"completion"},{id:"completion",target:'[data-guide-target="completion"]',title:"完了！",body:"お疲れ様でした！これで主要機能を理解できました。明日からは自動案内しません。",placement:"auto",page:"/"}];function eB(e){let{children:s,steps:t=eJ}=e,[n,c]=(0,i.useState)({isActive:!1,currentStep:null,completedSteps:[],isFirstVisit:!0,isTourCompleted:!1,isGuideDisabled:!1});(0,i.useEffect)(()=>{let e="false"!==localStorage.getItem(eG.FIRST_VISIT),s=JSON.parse(localStorage.getItem(eG.COMPLETED_STEPS)||"[]"),t="true"===localStorage.getItem(eG.TOUR_COMPLETED),r="true"===localStorage.getItem(eG.GUIDE_DISABLED),i=localStorage.getItem(eG.CURRENT_STEP);c(n=>(0,l._)((0,a._)({},n),{isFirstVisit:e,completedSteps:s,isTourCompleted:t,isGuideDisabled:r,currentStep:i||null})),!e||r||t||setTimeout(()=>{o()},1e3)},[]);let d=(0,i.useCallback)(e=>{c(s=>{let t=(0,a._)({},s,e);return void 0!==e.isFirstVisit&&localStorage.setItem(eG.FIRST_VISIT,e.isFirstVisit.toString()),void 0!==e.completedSteps&&localStorage.setItem(eG.COMPLETED_STEPS,JSON.stringify(e.completedSteps)),void 0!==e.isTourCompleted&&localStorage.setItem(eG.TOUR_COMPLETED,e.isTourCompleted.toString()),void 0!==e.isGuideDisabled&&localStorage.setItem(eG.GUIDE_DISABLED,e.isGuideDisabled.toString()),void 0!==e.currentStep&&(e.currentStep?localStorage.setItem(eG.CURRENT_STEP,e.currentStep):localStorage.removeItem(eG.CURRENT_STEP)),t})},[]),o=(0,i.useCallback)(()=>{let e=t[0];e&&(eK.focusManager.saveFocus(),eK.screenReader.announce("ガイドツアーを開始しました"),d({isActive:!0,currentStep:e.id,isFirstVisit:!1}))},[t,d]),x=(0,i.useCallback)(()=>{c(e=>{if(!e.currentStep)return e;let s=t.find(s=>s.id===e.currentStep);if(!(null==s?void 0:s.next))return(0,l._)((0,a._)({},e),{isActive:!1,currentStep:null,isTourCompleted:!0,completedSteps:[...e.completedSteps,e.currentStep]});let r=t.find(e=>e.id===s.next);if(!r)return e;if(r.action){if("nav"===r.action.type)window.location.href=r.action.to;else if("click"===r.action.type){let e=document.querySelector(r.action.target);e&&e.click()}}return(0,l._)((0,a._)({},e),{currentStep:r.id,completedSteps:[...e.completedSteps,e.currentStep]})})},[t]),m=(0,i.useCallback)(()=>{c(e=>{if(!e.currentStep)return e;let s=t.find(s=>s.id===e.currentStep);if(!(null==s?void 0:s.prev))return e;let r=t.find(e=>e.id===s.prev);return r?(0,l._)((0,a._)({},e),{currentStep:r.id}):e})},[t]),h=(0,i.useCallback)(()=>{d({isActive:!1,currentStep:null,isTourCompleted:!0})},[d]),u=(0,i.useCallback)(()=>{eK.screenReader.announce("ガイドツアーが完了しました"),eK.focusManager.restoreFocus(),d({isActive:!1,currentStep:null,isTourCompleted:!0,completedSteps:[...n.completedSteps,n.currentStep||""]})},[d,n.completedSteps,n.currentStep]),g=(0,i.useCallback)(()=>{d({isGuideDisabled:!n.isGuideDisabled})},[d,n.isGuideDisabled]),p=(0,i.useCallback)(()=>{localStorage.removeItem(eG.FIRST_VISIT),localStorage.removeItem(eG.COMPLETED_STEPS),localStorage.removeItem(eG.TOUR_COMPLETED),localStorage.removeItem(eG.GUIDE_DISABLED),localStorage.removeItem(eG.CURRENT_STEP),c({isActive:!1,currentStep:null,completedSteps:[],isFirstVisit:!0,isTourCompleted:!1,isGuideDisabled:!1})},[]),j=(0,i.useCallback)(()=>n.currentStep&&t.find(e=>e.id===n.currentStep)||null,[n.currentStep,t]),b=(0,i.useCallback)(e=>n.completedSteps.includes(e),[n.completedSteps]);return(0,r.jsxs)(eU.Provider,{value:{state:n,startTour:o,nextStep:x,prevStep:m,skipTour:h,completeTour:u,toggleGuide:g,resetGuide:p,getCurrentStepData:j,isStepCompleted:b},children:[s,n.isActive&&(0,r.jsx)(eW,{})]})}function eW(){let{state:e,getCurrentStepData:s,nextStep:t,prevStep:a,skipTour:l,completeTour:n}=eH(),[c,d]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{d(!0)},[]),!c)return null;let o=s();return o?(0,eP.createPortal)((0,r.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50"}),(0,r.jsx)(eV,{step:o,onNext:t,onPrev:a,onSkip:l,onComplete:n,isFirst:!o.prev,isLast:!o.next})]}),document.body):null}function eH(){let e=(0,i.useContext)(eU);if(!e)throw Error("useGuide must be used within a TourProvider");return e}function eV(e){let{step:s,onNext:t,onPrev:a,onSkip:l,onComplete:n,isFirst:c,isLast:d}=e,[o,x]=(0,i.useState)(null),[m,h]=(0,i.useState)({top:0,left:0,width:0,height:0});if((0,i.useEffect)(()=>{let e=document.querySelector(s.target);if(e){x(e);let s=e.getBoundingClientRect();h({top:s.top+window.scrollY,left:s.left+window.scrollX,width:s.width,height:s.height})}},[s.target]),!o)return t(),null;let u=(()=>{let{top:e,left:t,width:a,height:l}=m;switch(s.placement){case"top":return{top:e-200-16,left:t+a/2-160};case"bottom":return{top:e+l+16,left:t+a/2-160};case"left":return{top:e+l/2-100,left:t-320-16};case"right":return{top:e+l/2-100,left:t+a+16};default:let r=window.innerHeight-(e+l),i=window.innerWidth-(t+a);if(r>=216)return{top:e+l+16,left:t+a/2-160};if(e>=216)return{top:e-200-16,left:t+a/2-160};if(i>=336)return{top:e+l/2-100,left:t+a+16};return{top:e+l/2-100,left:t-320-16}}})();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute border-2 border-blue-500 rounded-lg pointer-events-none",style:{top:m.top-4,left:m.left-4,width:m.width+8,height:m.height+8,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)"}}),(0,r.jsxs)("div",{className:"absolute bg-white rounded-lg shadow-xl p-6 max-w-sm",style:{top:u.top,left:u.left,zIndex:1e3},children:[s.title&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.title}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:s.body}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[!c&&(0,r.jsx)("button",{onClick:a,className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"戻る"}),(0,r.jsx)("button",{onClick:l,className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"スキップ"})]}),(0,r.jsx)("div",{className:"flex gap-2",children:d?(0,r.jsx)("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"完了"}):(0,r.jsx)("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"次へ"})})]})]})]})}var eY=t(48617);function eX(e){let{content:s,detail:t,children:a,placement:l="auto",trigger:n="hover",maxWidth:c=300,className:d=""}=e,[o,x]=(0,i.useState)(!1),[m,h]=(0,i.useState)({top:0,left:0}),u=(0,i.useRef)(null),g=(0,i.useRef)(null),p=()=>{if(!g.current||!u.current)return;let e=g.current.getBoundingClientRect(),s=u.current.getBoundingClientRect(),t=e.top,a=e.left;switch(l){case"top":t=e.top-s.height-8,a=e.left+e.width/2-s.width/2;break;case"bottom":t=e.bottom+8,a=e.left+e.width/2-s.width/2;break;case"left":t=e.top+e.height/2-s.height/2,a=e.left-s.width-8;break;case"right":t=e.top+e.height/2-s.height/2,a=e.right+8;break;default:let r=e.top,i=window.innerHeight-e.bottom;e.left;let n=window.innerWidth-e.right;i>=s.height+8?(t=e.bottom+8,a=e.left+e.width/2-s.width/2):r>=s.height+8?(t=e.top-s.height-8,a=e.left+e.width/2-s.width/2):n>=s.width+8?(t=e.top+e.height/2-s.height/2,a=e.right+8):(t=e.top+e.height/2-s.height/2,a=e.left-s.width-8)}let c=Math.max(8,Math.min(t,window.innerHeight-s.height-8)),d=Math.max(8,Math.min(a,window.innerWidth-s.width-8));h({top:c+window.scrollY,left:d+window.scrollX})};return(0,i.useEffect)(()=>(o&&(p(),window.addEventListener("resize",p),window.addEventListener("scroll",p)),()=>{window.removeEventListener("resize",p),window.removeEventListener("scroll",p)}),[o,l]),(0,r.jsxs)("div",{ref:g,className:"relative inline-block ".concat(d),onMouseEnter:()=>{"hover"===n&&x(!0)},onMouseLeave:()=>{"hover"===n&&x(!1)},onClick:()=>{"click"===n&&x(!o)},onFocus:()=>{"focus"===n&&x(!0)},onBlur:()=>{"focus"===n&&x(!1)},children:[a,o&&(0,r.jsxs)("div",{ref:u,className:"absolute z-50 bg-gray-900 text-white text-sm rounded-lg shadow-lg p-3 pointer-events-none",style:{top:m.top,left:m.left,maxWidth:c},role:"tooltip",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(eY.A,{size:14,className:"text-blue-300 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:s}),t&&(0,r.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:t})]})]}),(0,r.jsx)("div",{className:"absolute w-2 h-2 bg-gray-900 transform rotate-45",style:{["top"===l?"bottom":"bottom"===l?"top":"left"===l?"right":"left"]:"-4px",["top"===l||"bottom"===l?"left":"top"]:"50%",transform:"top"===l||"bottom"===l?"translateX(-50%) rotate(45deg)":"translateY(-50%) rotate(45deg)"}})]})]})}function eq(e){let{metric:s,value:t,description:a,children:l,className:i=""}=e;return(0,r.jsx)(eX,{content:"".concat(s,": ").concat(t),detail:a,trigger:"hover",className:i,children:l})}var e$=t(33565);function eQ(e){let{items:s,onItemComplete:t,onItemReset:n,onComplete:c,className:d=""}=e,[o,x]=(0,i.useState)(!0),[m,h]=(0,i.useState)(0);(0,i.useEffect)(()=>{let e=s.filter(e=>e.completed).length;h(e),e===s.length&&setTimeout(()=>{x(!1),c()},2e3)},[s,c]);let u=e=>{e.completed?(n(e.id),eK.screenReader.announceChecklistItem(e.title,!1)):(t(e.id),eK.screenReader.announceChecklistItem(e.title,!0))};return o?(0,r.jsxs)("div",(0,l._)((0,a._)({className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 ".concat(d)},eK.generateAriaAttributes("checklist")),{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"初回チェックリスト"}),(0,r.jsxs)("div",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:[m," / ",s.length]})]}),(0,r.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":"チェックリストを閉じる",children:(0,r.jsx)(j.A,{size:16})})]}),(0,r.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,r.jsxs)("div",{className:"flex items-start gap-3 p-2 rounded-md cursor-pointer transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(e.completed?"bg-green-50 hover:bg-green-100":"bg-gray-50 hover:bg-gray-100"),onClick:()=>u(e),role:"listitem",tabIndex:0,"aria-checked":e.completed,"aria-label":"".concat(e.title,": ").concat(e.description),onKeyDown:s=>{("Enter"===s.key||" "===s.key)&&(s.preventDefault(),u(e))},children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:e.completed?(0,r.jsx)(S.A,{size:16,className:"text-green-600"}):(0,r.jsx)(e$.A,{size:16,className:"text-gray-400"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium ".concat(e.completed?"text-green-800 line-through":"text-gray-900"),children:e.title}),(0,r.jsx)("p",{className:"text-xs ".concat(e.completed?"text-green-600":"text-gray-600"),children:e.description})]})]},e.id))}),m===s.length&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,r.jsx)(S.A,{size:16}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"お疲れ様でした！"})]}),(0,r.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"主要機能を理解できました。明日からは自動案内しません。"})]})]})):null}function eZ(e){let{completedCount:s,totalCount:t,onClick:a}=e,l=t>0?s/t*100:0;return s===t?null:(0,r.jsxs)("button",{onClick:a,className:"relative flex items-center gap-2 px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-full text-xs font-medium transition-colors","aria-label":"チェックリスト: ".concat(s,"/").concat(t," 完了"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(S.A,{size:14}),(0,r.jsxs)("span",{children:[s,"/",t]})]}),(0,r.jsx)("div",{className:"w-12 h-1 bg-blue-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:"".concat(l,"%")}})})]})}let e0=[{id:"dashboard-overview",title:"ダッシュボードを1分で把握する",description:"今日の投資指示と主要KPIを確認",completed:!1},{id:"kpi-understanding",title:"KPIの意味を理解する",description:"MAE、R\xb2、予測精度の解釈を習得",completed:!1},{id:"candidate-exploration",title:"銘柄カードから詳細に入る",description:"推奨銘柄の詳細分析を実行",completed:!1},{id:"settings-configuration",title:"通知先を設定する",description:"分析結果の通知設定を完了",completed:!1}];var e2=t(35765);let e1=[{term:"MAE",short:"平均絶対誤差",detail:"Mean Absolute Error。予測値と実際値の差の絶対値の平均。値が小さいほど予測精度が高い。",category:"指標",links:["/models","/analysis"]},{term:"RMSE",short:"二乗平均平方根誤差",detail:"Root Mean Square Error。予測値と実際値の差の二乗平均の平方根。MAEより大きな誤差に敏感。",category:"指標",links:["/models","/analysis"]},{term:"R\xb2",short:"決定係数",detail:"Coefficient of Determination。モデルがデータの変動を説明できる割合。1に近いほど良い。",category:"指標",links:["/models","/analysis"]},{term:"予測精度",short:"予測の正確性",detail:"直近テスト期間での予測と実際の一致度。過去データへの過適合に注意が必要。",category:"指標",links:["/predictions","/analysis"]},{term:"シャープレシオ",short:"リスク調整後リターン",detail:"Sharpe Ratio。リスク1単位あたりのリターン。高いほど効率的な投資。",category:"指標",links:["/risk","/reports"]},{term:"損切り",short:"損失を限定する売却",detail:"Stop Loss。損失が一定水準に達した時の自動売却。リスク管理の基本。",category:"取引",links:["/risk","/settings"]},{term:"利確",short:"利益を確定する売却",detail:"Take Profit。利益が一定水準に達した時の自動売却。利益の確保。",category:"取引",links:["/risk","/settings"]},{term:"ボラティリティ",short:"価格変動の激しさ",detail:"Volatility。価格の変動幅。高いほどリスクが大きい。",category:"リスク",links:["/risk","/analysis"]},{term:"過学習",short:"過去データに過度に適合",detail:"Overfitting。過去データに特化しすぎて将来予測ができない状態。",category:"モデル",links:["/models","/analysis"]},{term:"特徴量重要度",short:"予測に影響する要因の重み",detail:"Feature Importance。どの要因が予測に最も影響するかの指標。",category:"分析",links:["/analysis"]},{term:"残差分析",short:"予測誤差の分析",detail:"Residual Analysis。予測値と実際値の差のパターンを分析。",category:"分析",links:["/analysis"]},{term:"相関分析",short:"要因間の関係性分析",detail:"Correlation Analysis。複数の要因がどの程度関連するかの分析。",category:"分析",links:["/analysis"]}];function e6(e){let{isOpen:s,onClose:t,items:a=e1}=e,[l,n]=(0,i.useState)(""),[c,d]=(0,i.useState)("すべて"),[o,x]=(0,i.useState)(null),m=(0,i.useRef)(null),u=["すべて",...Array.from(new Set(a.map(e=>e.category)))],g=a.filter(e=>{let s=e.term.toLowerCase().includes(l.toLowerCase())||e.short.toLowerCase().includes(l.toLowerCase())||e.detail.toLowerCase().includes(l.toLowerCase()),t="すべて"===c||e.category===c;return s&&t});return((0,i.useEffect)(()=>{s&&m.current&&m.current.focus()},[s]),(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return s&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[s,t]),s)?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:t}),(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(h.A,{size:24,className:"text-blue-600"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"用語集"})]}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"用語集を閉じる",children:(0,r.jsx)(j.A,{size:24})})]}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"w-1/3 border-r border-gray-200 flex flex-col",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(ec.A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{ref:m,type:"text",placeholder:"用語を検索...",value:l,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"カテゴリ"}),(0,r.jsx)("div",{className:"space-y-1",children:u.map(e=>(0,r.jsx)("button",{onClick:()=>d(e),className:"w-full text-left px-3 py-1.5 text-sm rounded-md transition-colors ".concat(c===e?"bg-blue-100 text-blue-800":"text-gray-600 hover:bg-gray-100"),children:e},e))})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:["用語一覧 (",g.length,")"]}),(0,r.jsx)("div",{className:"space-y-1",children:g.map(e=>(0,r.jsxs)("button",{onClick:()=>x(e),className:"w-full text-left p-3 rounded-md transition-colors ".concat((null==o?void 0:o.term)===e.term?"bg-blue-100 text-blue-800":"text-gray-700 hover:bg-gray-100"),children:[(0,r.jsx)("div",{className:"font-medium",children:e.term}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.short})]},e.term))})]})})]}),(0,r.jsx)("div",{className:"flex-1 flex flex-col",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:o.term}),(0,r.jsx)("p",{className:"text-lg text-gray-600 mt-1",children:o.short})]}),(0,r.jsx)("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:o.category})]})}),(0,r.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:[(0,r.jsx)("div",{className:"prose max-w-none",children:(0,r.jsx)("p",{className:"text-gray-700 leading-relaxed",children:o.detail})}),o.links&&o.links.length>0&&(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"関連ページ"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:o.links.map(e=>(0,r.jsxs)("a",{href:e,className:"inline-flex items-center gap-1 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md text-sm transition-colors",children:["/"===e?"ダッシュボード":"/predictions"===e?"予測結果":"/models"===e?"モデル比較":"/analysis"===e?"分析":"/reports"===e?"レポート":"/settings"===e?"設定":"/risk"===e?"リスク":e,(0,r.jsx)(e2.A,{size:12})]},e))})]})]})]}):(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(h.A,{size:48,className:"mx-auto mb-4 text-gray-300"}),(0,r.jsx)("p",{children:"用語を選択してください"})]})})})]})]})]}):null}let e4=[{id:"getting-started",title:"はじめに",icon:(0,r.jsx)(h.A,{size:20}),content:"J-Quants株価予測システムの基本的な使い方を説明します。初回利用時は自動ガイドが表示されます。",links:[{label:"ダッシュボード",href:"/"},{label:"使い方ガイド",href:"/usage"}]},{id:"dashboard",title:"ダッシュボード",icon:(0,r.jsx)(p.A,{size:20}),content:"今日の投資指示と主要KPIを確認できます。MAE、R\xb2、予測精度などの指標を理解しましょう。",links:[{label:"ダッシュボード",href:"/"},{label:"予測結果",href:"/predictions"}]},{id:"models",title:"モデル比較",icon:(0,r.jsx)(u.A,{size:20}),content:"複数の機械学習モデルの性能を比較できます。総合評価から詳細指標まで確認しましょう。",links:[{label:"モデル比較",href:"/models"},{label:"分析",href:"/analysis"}]},{id:"risk",title:"リスク管理",icon:(0,r.jsx)(C.A,{size:20}),content:"投資リスクの評価と管理機能。損切り・利確の設定、ボラティリティ分析が可能です。",links:[{label:"リスク",href:"/risk"},{label:"設定",href:"/settings"}]}],e5=[{question:"MAEとR\xb2の違いは何ですか？",answer:"MAE（平均絶対誤差）は予測の精度を、R\xb2（決定係数）はモデルの説明力を示します。低いMAEと高いR\xb2が理想的です。",category:"指標"},{question:"予測精度が低い場合はどうすれば？",answer:"モデル比較で他のモデルを試すか、分析タブで特徴量重要度を確認し、データの質を見直してください。",category:"トラブル"},{question:"通知設定はどこで変更できますか？",answer:"設定ページの通知設定から、メールアドレスや通知条件を変更できます。",category:"設定"},{question:"データが更新されない場合は？",answer:"最新結果を再取得ボタンをクリックするか、設定で更新間隔を確認してください。",category:"トラブル"}];function e3(e){let{isOpen:s,onClose:t,currentPage:a="/"}=e,[l,n]=(0,i.useState)(""),[c,d]=(0,i.useState)("getting-started"),[o,x]=(0,i.useState)(null),m=(0,i.useRef)(null),{startTour:u}=eH(),g=e4.filter(e=>e.title.toLowerCase().includes(l.toLowerCase())||e.content.toLowerCase().includes(l.toLowerCase())),p=e5.filter(e=>e.question.toLowerCase().includes(l.toLowerCase())||e.answer.toLowerCase().includes(l.toLowerCase()));return((0,i.useEffect)(()=>{s&&m.current&&m.current.focus()},[s]),(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return s&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[s,t]),s)?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:t}),(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(ew.A,{size:24,className:"text-blue-600"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"クイックヘルプ"})]}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"ヘルプを閉じる",children:(0,r.jsx)(j.A,{size:24})})]}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"w-1/3 border-r border-gray-200 flex flex-col",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(ec.A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{ref:m,type:"text",placeholder:"ヘルプを検索...",value:l,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"主要機能"}),(0,r.jsx)("div",{className:"space-y-1",children:g.map(e=>(0,r.jsx)("button",{onClick:()=>d(e.id),className:"w-full text-left p-3 rounded-md transition-colors ".concat(c===e.id?"bg-blue-100 text-blue-800":"text-gray-700 hover:bg-gray-100"),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.icon,(0,r.jsx)("span",{className:"font-medium",children:e.title})]})},e.id))}),(0,r.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"よくある質問"}),(0,r.jsx)("div",{className:"space-y-1",children:p.map((e,s)=>(0,r.jsxs)("button",{onClick:()=>x(o===s?null:s),className:"w-full text-left p-2 rounded-md transition-colors ".concat(o===s?"bg-blue-100 text-blue-800":"text-gray-700 hover:bg-gray-100"),children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:e.question}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.category})]},s))})]})]})})]}),(0,r.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:null!==o?(0,r.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium inline-block mb-3",children:e5[o].category}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:e5[o].question}),(0,r.jsx)("p",{className:"text-gray-700 leading-relaxed",children:e5[o].answer})]})}):(0,r.jsx)(r.Fragment,{children:(()=>{let e=e4.find(e=>e.id===c);return e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[e.icon,(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:e.title})]}),(0,r.jsx)("p",{className:"text-gray-600",children:e.content})]}),(0,r.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"関連ページ"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3",children:e.links.map(e=>(0,r.jsxs)("a",{href:e.href,className:"flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,r.jsx)("span",{className:"font-medium",children:e.label}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"→"})]},e.href))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"クイックアクション"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3",children:(0,r.jsxs)("button",{onClick:()=>{t(),u()},className:"flex items-center gap-3 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-left",children:[(0,r.jsx)(h.A,{size:20,className:"text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-blue-900",children:"ガイドツアーを開始"}),(0,r.jsx)("div",{className:"text-sm text-blue-700",children:"主要機能を順番に案内します"})]})]})})]})]})})]}):null})()})})]}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{children:"\uD83D\uDCA1 ヒント: F1キーでヘルプを開く"}),(0,r.jsx)("span",{children:"⌨️ キーボードショートカット対応"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"サポートが必要な場合は"}),(0,r.jsx)("a",{href:"/usage",className:"text-blue-600 hover:text-blue-800 font-medium",children:"使い方ガイド"}),(0,r.jsx)("span",{children:"をご確認ください"})]})]})})]})]}):null}let e8={HELP:"F1",GLOSSARY:"KeyG",TOUR:"KeyT",ESCAPE:"Escape",NEXT:"ArrowRight",PREV:"ArrowLeft",ENTER:"Enter",SPACE:"Space"};class e9{static getInstance(){return e9.instance||(e9.instance=new e9),e9.instance}register(e,s){this.handlers.has(e)||this.handlers.set(e,[]);let t=this.handlers.get(e);return t.push(s),()=>{let e=t.indexOf(s);e>-1&&t.splice(e,1)}}unregister(e,s){let t=this.handlers.get(e);if(t){let e=t.indexOf(s);e>-1&&t.splice(e,1)}}setEnabled(e){this.isEnabled=e}start(){document.addEventListener("keydown",this.handleKeyDown)}stop(){document.removeEventListener("keydown",this.handleKeyDown)}clear(){this.handlers.clear()}constructor(){this.handlers=new Map,this.isEnabled=!0,this.handleKeyDown=e=>{if(!this.isEnabled)return;let s=e.target;if("INPUT"===s.tagName||"TEXTAREA"===s.tagName||"true"===s.contentEditable)return;let t=e.code,a=this.handlers.get(t);a&&a.length>0&&(e.preventDefault(),e.stopPropagation(),a.forEach(s=>{try{s(e)}catch(e){console.error("Shortcut handler error:",e)}}))}}}let e7=e9.getInstance();function se(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(0,i.useCallback)(s,t);(0,i.useEffect)(()=>e7.register(e,a),[e,a])}let ss={FIRST_VISIT:"guide_first_visit",COMPLETED_STEPS:"guide_completed_steps",TOUR_COMPLETED:"guide_tour_completed",GUIDE_DISABLED:"guide_disabled",CURRENT_STEP:"guide_current_step",CHECKLIST_PROGRESS:"guide_checklist_progress",USER_PREFERENCES:"guide_user_preferences"};class st{static getInstance(){return st.instance||(st.instance=new st),st.instance}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){this.listeners.forEach(e=>e())}get isFirstVisit(){return"false"!==localStorage.getItem(ss.FIRST_VISIT)}set isFirstVisit(e){localStorage.setItem(ss.FIRST_VISIT,e.toString()),this.notify()}get completedSteps(){let e=localStorage.getItem(ss.COMPLETED_STEPS);return e?JSON.parse(e):[]}set completedSteps(e){localStorage.setItem(ss.COMPLETED_STEPS,JSON.stringify(e)),this.notify()}addCompletedStep(e){let s=this.completedSteps;s.includes(e)||(this.completedSteps=[...s,e])}get isTourCompleted(){return"true"===localStorage.getItem(ss.TOUR_COMPLETED)}set isTourCompleted(e){localStorage.setItem(ss.TOUR_COMPLETED,e.toString()),this.notify()}get isGuideDisabled(){return"true"===localStorage.getItem(ss.GUIDE_DISABLED)}set isGuideDisabled(e){localStorage.setItem(ss.GUIDE_DISABLED,e.toString()),this.notify()}get currentStep(){return localStorage.getItem(ss.CURRENT_STEP)}set currentStep(e){e?localStorage.setItem(ss.CURRENT_STEP,e):localStorage.removeItem(ss.CURRENT_STEP),this.notify()}get checklistProgress(){let e=localStorage.getItem(ss.CHECKLIST_PROGRESS);return e?JSON.parse(e):{completedItems:[],totalItems:4,isCompleted:!1}}set checklistProgress(e){localStorage.setItem(ss.CHECKLIST_PROGRESS,JSON.stringify(e)),this.notify()}addChecklistItem(e){let s=this.checklistProgress;if(!s.completedItems.includes(e)){let t=(0,l._)((0,a._)({},s),{completedItems:[...s.completedItems,e],isCompleted:s.completedItems.length+1>=s.totalItems});t.isCompleted&&(t.completedAt=new Date().toISOString()),this.checklistProgress=t}}removeChecklistItem(e){let s=this.checklistProgress,t=(0,l._)((0,a._)({},s),{completedItems:s.completedItems.filter(s=>s!==e),isCompleted:!1,completedAt:void 0});this.checklistProgress=t}get userPreferences(){let e=localStorage.getItem(ss.USER_PREFERENCES);return e?JSON.parse(e):{autoStart:!0,showTooltips:!0,showProgress:!0,keyboardNavigation:!0,highContrast:!1,language:"ja"}}set userPreferences(e){localStorage.setItem(ss.USER_PREFERENCES,JSON.stringify(e)),this.notify()}updateUserPreferences(e){let s=this.userPreferences;this.userPreferences=(0,a._)({},s,e)}getGuideState(){return{isActive:!1,currentStep:this.currentStep,completedSteps:this.completedSteps,isFirstVisit:this.isFirstVisit,isTourCompleted:this.isTourCompleted,isGuideDisabled:this.isGuideDisabled}}updateGuideState(e){void 0!==e.isFirstVisit&&(this.isFirstVisit=e.isFirstVisit),void 0!==e.completedSteps&&(this.completedSteps=e.completedSteps),void 0!==e.isTourCompleted&&(this.isTourCompleted=e.isTourCompleted),void 0!==e.isGuideDisabled&&(this.isGuideDisabled=e.isGuideDisabled),void 0!==e.currentStep&&(this.currentStep=e.currentStep)}resetGuide(){localStorage.removeItem(ss.FIRST_VISIT),localStorage.removeItem(ss.COMPLETED_STEPS),localStorage.removeItem(ss.TOUR_COMPLETED),localStorage.removeItem(ss.GUIDE_DISABLED),localStorage.removeItem(ss.CURRENT_STEP),localStorage.removeItem(ss.CHECKLIST_PROGRESS),this.notify()}isStepCompleted(e){return this.completedSteps.includes(e)}isChecklistItemCompleted(e){return this.checklistProgress.completedItems.includes(e)}getProgress(){let e=this.completedSteps.length;return{completed:e,total:10,percentage:Math.round(e/10*100)}}getChecklistProgress(){let e=this.checklistProgress;return{completed:e.completedItems.length,total:e.totalItems,percentage:Math.round(e.completedItems.length/e.totalItems*100)}}getStats(){let e=this.getProgress(),s=this.getChecklistProgress();return{totalSteps:e.total,completedSteps:e.completed,completionRate:e.percentage,checklistItems:s.total,completedChecklistItems:s.completed,checklistCompletionRate:s.percentage,isFirstTimeUser:this.isFirstVisit,lastActivity:this.checklistProgress.completedAt}}constructor(){this.listeners=new Set}}let sa=st.getInstance(),sl=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function sr(){var e,s,t,d,o,x,g;let[b,f]=(0,i.useState)("overview"),[N,W]=(0,i.useState)([]),[H,V]=(0,i.useState)([]),[Y,X]=(0,i.useState)([]),[q,$]=(0,i.useState)([]),[Q,ee]=(0,i.useState)(null),[es,et]=(0,i.useState)(null),[ea,el]=(0,i.useState)(null),[ec,ed]=(0,i.useState)(!0),[eo,eh]=(0,i.useState)(!1),[eu,ep]=(0,i.useState)(!1),[ej,eb]=(0,i.useState)(!1),[ef,ev]=(0,i.useState)(0),[eA,eC]=(0,i.useState)(""),[eE,e_]=(0,i.useState)([]),[eD,eR]=(0,i.useState)(!1),[eP,eM]=(0,i.useState)(!1),[eF,eO]=(0,i.useState)([]),[ez,eK]=(0,i.useState)(null),[eU,eG]=(0,i.useState)(!1),[eJ,eB]=(0,i.useState)(!1),[eW,eV]=(0,i.useState)(!1),[eY,eX]=(0,i.useState)(!1),[e$,e2]=(0,i.useState)(null),[e1,e4]=(0,i.useState)(!1),[e5,e9]=(0,i.useState)(!1),[e7,ss]=(0,i.useState)(!1),[st,sr]=(0,i.useState)(null),[si,sn]=(0,i.useState)(!1),[sc,sd]=(0,i.useState)(!1),[so,sx]=(0,i.useState)(e0),[sm,sh]=(0,i.useState)(!1),{runAnalysisWithSettings:su,isAnalyzing:sg,analysisProgress:sp,analysisStatus:sj,getAnalysisDescription:sb}=(0,er.P)(),[sf,sy]=(0,i.useState)("");s=()=>sd(!0),t=()=>sn(!0),d=()=>{let{startTour:e}=eH();e()},o=()=>{let{nextStep:e}=eH();e()},x=()=>{let{prevStep:e}=eH();e()},g=()=>{let{skipTour:e}=eH();e()},se(e8.HELP,s),se(e8.GLOSSARY,t),se(e8.TOUR,d),se("KeyT",e=>{(e.ctrlKey||e.metaKey)&&d()}),se(e8.NEXT,o),se(e8.PREV,x),se(e8.ENTER,o),se(e8.SPACE,o),se(e8.ESCAPE,g),(0,i.useEffect)(()=>{sN(),localStorage.getItem("hasVisited")||(e9(!0),e4(!0),localStorage.setItem("hasVisited","true"))},[]),(0,i.useEffect)(()=>{let e=()=>{let e=window.innerWidth<768;eB(e),eX(e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let sN=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e?(ss(!0),sy("データを更新しています...")):ed(!0);let s=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;for(let t=0;t<s;t++)try{let s=await fetch(e,{cache:"no-cache",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(s.ok)return s;throw Error("HTTP ".concat(s.status))}catch(a){if(console.warn("Fetch attempt ".concat(t+1," failed for ").concat(e,":"),a),t===s-1)throw a;await new Promise(e=>setTimeout(e,1e3*(t+1)))}throw Error("All retry attempts failed")},[t,r,i,n,c,d,o]=await Promise.all([s("./data/dashboard_summary.json"),s("./data/stock_data.json"),s("./data/unified_model_comparison.json"),s("./data/feature_analysis.json"),s("./data/prediction_results.json"),s("./data/market_insights.json"),s("./data/risk_assessment.json")]),x=await t.json(),m=await r.json(),h=await i.json(),u=await n.json(),g=await c.json(),p=await d.json(),j=await o.json();ee(x),et(p),el(j);let b=new Date;sr(b.toLocaleString("ja-JP"));let f=m.slice(0,100).map(e=>(0,l._)((0,a._)({},e),{date:sS(e.date)}));W(f);let y=h.map(e=>({name:e.model_name,type:e.model_type,mae:e.mae,mse:e.rmse*e.rmse,rmse:e.rmse,r2:e.r2,rank:e.rank}));V(y);let N=u;N&&0!==N.length||(N=[{feature:"価格変動率",importance:.35,percentage:35},{feature:"ボリューム",importance:.25,percentage:25},{feature:"RSI",importance:.15,percentage:15},{feature:"移動平均",importance:.12,percentage:12},{feature:"ボリンジャーバンド",importance:.08,percentage:8},{feature:"MACD",importance:.05,percentage:5}]),X(N),$(g)}catch(s){console.error("データの読み込みに失敗:",s);let e="データの読み込みに失敗しました";s instanceof Error&&(e=s.message.includes("Failed to fetch")?"ネットワーク接続に問題があります。インターネット接続を確認してください。":s.message.includes("404")?"データファイルが見つかりません。管理者にお問い合わせください。":s.message.includes("RSC payload")?"サーバーとの通信に問題があります。しばらく待ってから再試行してください。":"エラー: ".concat(s.message)),e2(Error(e)),s instanceof Error&&(s.message.includes("RSC payload")||s.message.includes("Connection closed")||s.message.includes("Failed to fetch"))&&(console.log("RSC payload error detected, retrying in 3 seconds..."),setTimeout(()=>{sN()},3e3))}finally{ed(!1),e&&(ss(!1),sy("更新完了"),setTimeout(()=>{sy("")},3e3))}},sv=async e=>{try{let s=await su({symbols:e,analysisType:"comprehensive",useSettings:!0});s.success?(await sN(),eh(!1)):eC("分析エラー: ".concat(s.error))}catch(e){console.error("分析実行エラー:",e),eC("分析の実行に失敗しました")}},sw=async e=>{if(0===e.length){alert("銘柄を選択してください");return}e_(e),eR(!1);try{eb(!0),ev(0),eC("選択された銘柄の分析を開始しています...");let s=await fetch("/api/analyze-symbols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:e})}),t=await s.json();if(t.success)eC("分析が完了しました。データを更新しています..."),ev(100),await sN(),setTimeout(()=>{eb(!1),ev(0),eC("")},1e3);else throw Error(t.error||"分析に失敗しました")}catch(e){console.error("銘柄分析エラー:",e),eC("分析の実行に失敗しました"),eb(!1)}};if(e$)return(0,r.jsx)(eT,{error:e$,onRetry:()=>{e2(null),sN()},onGoHome:()=>{e2(null),window.location.href="/"},onGetHelp:()=>e4(!0),showDetails:!1});if(ec)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"データを読み込み中..."})]})});let sS=e=>{try{if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(/^\d{8}$/.test(e))return e.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3");let s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date format:",e),"2024-01-01";return s.toISOString().split("T")[0]}catch(s){return console.error("Date normalization error:",s,"Input:",e),"2024-01-01"}},sk=N.map(e=>({date:sS(e.date),実際価格:e.close,SMA_5:e.sma_5,SMA_10:e.sma_10,SMA_25:e.sma_25,SMA_50:e.sma_50,出来高:e.volume/1e6})),sA=q.slice(0,50).map(e=>({index:e.index,実際値:e.actual,予測値:e.predicted}));return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(y,{activeTab:b,onTabChange:f,onAnalysisClick:()=>eh(!0),onSettingsClick:()=>ep(!0),onMonitoringClick:()=>eM(!0)}),(0,r.jsx)("div",{className:"hidden lg:block","data-guide-target":"navigation",children:(0,r.jsx)(c.A,{activeTab:b,onTabChange:f,onAnalysisClick:()=>eh(!0),onSettingsClick:()=>ep(!0),onMonitoringClick:()=>eM(!0)})}),(0,r.jsx)("header",{className:"hidden lg:block bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{"data-guide-target":"welcome",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"J-Quants 株価予測ダッシュボード"}),(0,r.jsx)("p",{className:"text-gray-600",children:"機械学習による株価予測システム"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S.A,{className:"h-5 w-5 text-green-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"システム: 正常稼働中"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["最終更新: ",st||(null==Q?void 0:Q.last_updated)||"-"]}),sf&&(0,r.jsx)("span",{className:"text-sm text-green-600 ml-2",children:sf})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(eI,{content:"特定の銘柄を選択して詳細分析を実行します",children:(0,r.jsxs)("button",{onClick:()=>eR(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"銘柄選択・分析"]})}),(0,r.jsx)(eI,{content:"全銘柄の包括的な分析を実行します（3-5分程度かかります）",children:(0,r.jsxs)("button",{onClick:()=>eh(!0),disabled:ej,className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(ej?"bg-gray-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"," text-white"),children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2 ".concat(ej?"animate-pulse":"")}),ej?"分析中...":"全体分析"]})}),(0,r.jsx)(eI,{content:"分析設定、モデル選択、表示オプションを調整できます",children:(0,r.jsxs)("button",{onClick:()=>ep(!0),className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors","data-guide-target":"settings-config",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"設定"]})}),(0,r.jsx)(eI,{content:"最新のデータを取得してダッシュボードを更新します",children:(0,r.jsxs)("button",{onClick:()=>sN(!0),disabled:e7,className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(e7?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"," text-white"),children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2 ".concat(e7?"animate-spin":"")}),e7?"更新中...":"更新"]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(eI,{content:"クイックヘルプを表示（F1キー）",children:(0,r.jsxs)("button",{onClick:()=>sd(!0),className:"flex items-center px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors","data-guide-target":"help-support",children:[(0,r.jsx)(ew.A,{className:"h-4 w-4 mr-1"}),"ヘルプ"]})}),(0,r.jsx)(eI,{content:"用語集を表示（Gキー）",children:(0,r.jsxs)("button",{onClick:()=>sn(!0),className:"flex items-center px-3 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-1"}),"用語集"]})})]}),(0,r.jsx)(eI,{content:"初回利用者向けの操作ガイドを表示します",children:(0,r.jsxs)("button",{onClick:()=>e4(!0),className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[(0,r.jsx)(ew.A,{className:"h-4 w-4 mr-2"}),"ガイド"]})})]})]})]})})}),(0,r.jsx)("nav",{className:"hidden lg:block bg-white border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"flex space-x-8",children:[{id:"overview",label:"概要",icon:p.A},{id:"predictions",label:"予測結果",icon:u.A},{id:"models",label:"モデル比較",icon:k.A},{id:"analysis",label:"分析",icon:A.A},{id:"signals",label:"シグナル",icon:u.A},{id:"risk",label:"リスク管理",icon:C.A},{id:"personal",label:"個人投資",icon:eS.A}].map(e=>{let s=e.icon;return(0,r.jsxs)("button",{onClick:()=>f(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat(b===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)(s,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.label})]},e.id)})})})}),eY?(0,r.jsx)(ei,{onAnalysisComplete:e=>{console.log("分析完了:",e),sN()},onAnalysisStart:()=>{console.log("分析開始")}}):(0,r.jsx)(en,{onRefresh:sN,children:(0,r.jsx)(Z,{stockData:N,modelComparison:H,featureAnalysis:Y,predictions:q,summary:Q,onRefresh:sN,onAnalysis:()=>eh(!0),onSettings:()=>ep(!0)})}),(0,r.jsxs)("main",{className:"hidden lg:block max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8","data-guide-target":"dashboard-overview",children:["overview"===b&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(eg,{onAnalysisComplete:e=>{console.log("分析完了:",e),sN()},onAnalysisStart:()=>{console.log("分析開始")}}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(u.A,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"最優秀モデル"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==Q?void 0:null===(e=Q.best_model)||void 0===e?void 0:e.toUpperCase())||"-"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(k.A,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"予測精度 (R\xb2)"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==Q?void 0:Q.r2)||"-"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center","data-guide-target":"kpi-metrics",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(p.A,{className:"h-6 w-6 text-yellow-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)(eq,{metric:"MAE",value:(null==Q?void 0:Q.mae)||"-",description:"平均絶対誤差。予測値と実際値の差の絶対値の平均。値が小さいほど予測精度が高い。",children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"MAE"})}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==Q?void 0:Q.mae)||"-"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(A.A,{className:"h-6 w-6 text-purple-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"データ数"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==Q?void 0:Q.total_data_points)||"-"})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)(u.A,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"市場インサイト"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"トレンド分析"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:(null==es?void 0:es.trend_analysis)||"データを読み込み中..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"ボラティリティ分析"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:(null==es?void 0:es.volatility_analysis)||"データを読み込み中..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"推奨事項"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:(null==es?void 0:es.recommendation)||"データを読み込み中..."})]}),(null==es?void 0:es.key_indicators)&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"主要指標"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"トレンド強度:"}),(0,r.jsxs)("span",{className:"font-medium",children:[(100*es.key_indicators.trend_strength).toFixed(0),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"ボラティリティ:"}),(0,r.jsxs)("span",{className:"font-medium",children:[(100*es.key_indicators.volatility_level).toFixed(0),"%"]})]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)(C.A,{className:"h-6 w-6 text-red-600 mr-3"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"リスク評価"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"リスクレベル"}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((null==ea?void 0:ea.risk_level)==="Low"?"bg-green-100 text-green-800":(null==ea?void 0:ea.risk_level)==="Medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:(null==ea?void 0:ea.risk_level)||"読み込み中"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"リスクスコア"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(null==ea?void 0:ea.risk_score)?(100*ea.risk_score).toFixed(0)+"%":"-"})]}),(null==ea?void 0:ea.portfolio_metrics)&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"ポートフォリオ指標"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"未実現損益:"}),(0,r.jsxs)("span",{className:"font-medium ".concat(ea.portfolio_metrics.unrealized_pnl>=0?"text-green-600":"text-red-600"),children:[ea.portfolio_metrics.unrealized_pnl>=0?"+":"",ea.portfolio_metrics.unrealized_pnl.toLocaleString(),"円"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"シャープレシオ:"}),(0,r.jsx)("span",{className:"font-medium",children:ea.portfolio_metrics.sharpe_ratio.toFixed(2)})]})]})]}),(null==ea?void 0:ea.recommendations)&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"推奨事項"}),(0,r.jsx)("ul",{className:"space-y-1",children:ea.recommendations.slice(0,2).map((e,s)=>(0,r.jsx)("li",{className:"text-xs text-gray-600",children:e},s))})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"株価推移と移動平均"}),(0,r.jsx)(B.u,{width:"100%",height:400,children:(0,r.jsxs)(_.b,{data:sk,children:[(0,r.jsx)(I.d,{strokeDasharray:"3 3"}),(0,r.jsx)(D.W,{dataKey:"date"}),(0,r.jsx)(R.h,{}),(0,r.jsx)(L.m,{}),(0,r.jsx)(P.s,{}),(0,r.jsx)(M.N,{type:"monotone",dataKey:"実際価格",stroke:"#2563eb",strokeWidth:2}),(0,r.jsx)(M.N,{type:"monotone",dataKey:"SMA_5",stroke:"#dc2626",strokeWidth:1}),(0,r.jsx)(M.N,{type:"monotone",dataKey:"SMA_10",stroke:"#059669",strokeWidth:1}),(0,r.jsx)(M.N,{type:"monotone",dataKey:"SMA_25",stroke:"#d97706",strokeWidth:1}),(0,r.jsx)(M.N,{type:"monotone",dataKey:"SMA_50",stroke:"#7c3aed",strokeWidth:1})]})})]})]}),"predictions"===b&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"予測 vs 実際値"}),(0,r.jsx)(B.u,{width:"100%",height:400,children:(0,r.jsxs)(_.b,{data:sA,children:[(0,r.jsx)(I.d,{strokeDasharray:"3 3"}),(0,r.jsx)(D.W,{dataKey:"index"}),(0,r.jsx)(R.h,{}),(0,r.jsx)(L.m,{}),(0,r.jsx)(P.s,{}),(0,r.jsx)(M.N,{type:"monotone",dataKey:"実際値",stroke:"#2563eb",strokeWidth:2}),(0,r.jsx)(M.N,{type:"monotone",dataKey:"予測値",stroke:"#dc2626",strokeWidth:2})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"予測誤差分布"}),(0,r.jsx)(B.u,{width:"100%",height:300,children:(0,r.jsxs)(F.E,{data:q.slice(0,20).map(e=>({index:e.index,誤差:e.error.toFixed(2)})),children:[(0,r.jsx)(I.d,{strokeDasharray:"3 3"}),(0,r.jsx)(D.W,{dataKey:"index"}),(0,r.jsx)(R.h,{}),(0,r.jsx)(L.m,{}),(0,r.jsx)(O.y,{dataKey:"誤差",fill:"#8884d8"})]})})]})]}),"models"===b&&(0,r.jsxs)("div",{className:"space-y-6","data-guide-target":"model-comparison",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"モデル性能比較"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"順位"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"モデル名"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MAE"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RMSE"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xb2"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map((e,s)=>(0,r.jsxs)("tr",{className:0===s?"bg-green-50":"",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[s+1,0===s&&(0,r.jsx)("span",{className:"ml-2 text-green-600",children:"\uD83C\uDFC6"})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.mae.toFixed(4)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.rmse.toFixed(4)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.r2.toFixed(4)})]},e.name))})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"MAE比較"}),H.length>0?(0,r.jsx)(B.u,{width:"100%",height:300,children:(0,r.jsxs)(F.E,{data:H,children:[(0,r.jsx)(I.d,{strokeDasharray:"3 3"}),(0,r.jsx)(D.W,{dataKey:"name"}),(0,r.jsx)(R.h,{}),(0,r.jsx)(L.m,{}),(0,r.jsx)(O.y,{dataKey:"mae",fill:"#8884d8"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"モデル比較データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})})]})]}),"analysis"===b&&(0,r.jsxs)("div",{className:"space-y-6","data-guide-target":"analysis-features",children:[eE.length>0&&(0,r.jsx)(em,{selectedSymbols:eE}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"特徴量重要度"}),Y.length>0?(0,r.jsx)(B.u,{width:"100%",height:300,children:(0,r.jsxs)(F.E,{data:Y,layout:"horizontal",children:[(0,r.jsx)(I.d,{strokeDasharray:"3 3"}),(0,r.jsx)(D.W,{type:"number"}),(0,r.jsx)(R.h,{dataKey:"feature",type:"category",width:100}),(0,r.jsx)(L.m,{}),(0,r.jsx)(O.y,{dataKey:"percentage",fill:"#82ca9d"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"特徴量分析データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"特徴量重要度分布"}),Y.length>0?(0,r.jsx)(B.u,{width:"100%",height:300,children:(0,r.jsxs)(z.r,{children:[(0,r.jsx)(K.F,{data:Y.map(e=>(0,l._)((0,a._)({},e),{name:e.feature})),cx:"50%",cy:"50%",labelLine:!1,label:!1,outerRadius:80,fill:"#8884d8",dataKey:"percentage",children:Y.map((e,s)=>(0,r.jsx)(U.f,{fill:sl[s%sl.length]},"cell-".concat(s)))}),(0,r.jsx)(L.m,{})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"特徴量分析データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"実際値 vs 予測値散布図"}),q.length>0?(0,r.jsx)(B.u,{width:"100%",height:400,children:(0,r.jsxs)(G.t,{data:q.slice(0,50),children:[(0,r.jsx)(I.d,{}),(0,r.jsx)(D.W,{dataKey:"actual",name:"実際値"}),(0,r.jsx)(R.h,{dataKey:"predicted",name:"予測値"}),(0,r.jsx)(L.m,{cursor:{strokeDasharray:"3 3"}}),(0,r.jsx)(J.X,{name:"予測ポイント",data:q.slice(0,50),fill:"#8884d8"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(u.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"予測データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})})]})]}),"signals"===b&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(eN,{symbols:eE,autoRefresh:!0,refreshInterval:3e4})}),"personal"===b&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCB0 個人投資ダッシュボード"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"投資判断に直結する情報の優先表示、損益状況の一目瞭然な表示"})]}),(0,r.jsxs)(n.default,{href:"./personal-investment",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(eS.A,{className:"h-4 w-4 mr-2"}),"詳細ダッシュボード"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"総投資額"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"\xa51,000,000"})]}),(0,r.jsx)(ek.A,{className:"h-8 w-8 text-green-500"})]}),(0,r.jsx)("p",{className:"text-sm text-green-600 mt-2",children:"現在価値: \xa51,050,000"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"未実現損益"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"+\xa550,000"})]}),(0,r.jsx)(u.A,{className:"h-8 w-8 text-blue-500"})]}),(0,r.jsx)("p",{className:"text-sm text-blue-600 mt-2",children:"+5.0%"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-purple-800",children:"推奨アクション"}),(0,r.jsx)("p",{className:"text-lg font-bold text-purple-600",children:"BUY"})]}),(0,r.jsx)(k.A,{className:"h-8 w-8 text-purple-500"})]}),(0,r.jsx)("p",{className:"text-sm text-purple-600 mt-2",children:"信頼度: 85%"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 border border-orange-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-orange-800",children:"リスクレベル"}),(0,r.jsx)("p",{className:"text-lg font-bold text-orange-600",children:"MEDIUM"})]}),(0,r.jsx)(C.A,{className:"h-8 w-8 text-orange-500"})]}),(0,r.jsx)("p",{className:"text-sm text-orange-600 mt-2",children:"リスク調整後リターン: 0.75"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"主要ポジション"}),(0,r.jsx)("div",{className:"grid gap-4",children:[{symbol:"7203.T",name:"トヨタ自動車",price:2500,change:2.5,action:"BUY",confidence:85},{symbol:"6758.T",name:"ソニーグループ",price:12e3,change:-1.2,action:"HOLD",confidence:70},{symbol:"6861.T",name:"キーエンス",price:5e3,change:3.8,action:"STRONG_BUY",confidence:90}].map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:e.symbol}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.name})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-semibold",children:["\xa5",e.price.toLocaleString()]}),(0,r.jsxs)("p",{className:"text-sm ".concat(e.change>=0?"text-green-600":"text-red-600"),children:[e.change>=0?"+":"",e.change,"%"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("STRONG_BUY"===e.action?"bg-green-100 text-green-800":"BUY"===e.action?"bg-blue-100 text-blue-800":"HOLD"===e.action?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:e.action}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e.confidence,"%"]})]})]},e.symbol))})]})]})}),"risk"===b&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDEE1️ リスク管理ダッシュボード"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"現在のポジション状況、損切りライン、リスクレベルを可視化"})]}),(0,r.jsxs)(n.default,{href:"./risk",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"詳細ダッシュボード"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"リスクレベル"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:"HIGH"})]}),(0,r.jsx)(C.A,{className:"h-8 w-8 text-red-500"})]}),(0,r.jsx)("p",{className:"text-sm text-red-600 mt-2",children:"リスクスコア: 0.75"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"ポートフォリオ価値"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"\xa51,250,000"})]}),(0,r.jsx)(u.A,{className:"h-8 w-8 text-blue-500"})]}),(0,r.jsx)("p",{className:"text-sm text-blue-600 mt-2",children:"未実現損益: +\xa550,000"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 border border-yellow-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-yellow-800",children:"最大ドローダウン"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:"8.5%"})]}),(0,r.jsx)(T.A,{className:"h-8 w-8 text-yellow-500"})]}),(0,r.jsx)("p",{className:"text-sm text-yellow-600 mt-2",children:"VaR (95%): \xa5125,000"})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"現在のポジション"})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:[{symbol:"7203.T",name:"トヨタ自動車",pnl:-1e4,pnlPercent:-4,risk:"HIGH"},{symbol:"6758.T",name:"ソニーグループ",pnl:25e3,pnlPercent:4.2,risk:"MEDIUM"},{symbol:"9984.T",name:"ソフトバンクグループ",pnl:-37500,pnlPercent:-6.25,risk:"HIGH"}].map(e=>(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:e.symbol}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.name})]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("HIGH"===e.risk?"bg-red-100 text-red-800":"MEDIUM"===e.risk?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.risk})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"font-semibold ".concat(e.pnl>=0?"text-green-600":"text-red-600"),children:[e.pnl>=0?"+":"","\xa5",e.pnl.toLocaleString()]}),(0,r.jsxs)("div",{className:"text-sm ".concat(e.pnl>=0?"text-green-600":"text-red-600"),children:[e.pnl>=0?"+":"",e.pnlPercent,"%"]})]})]},e.symbol))})]}),(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(E.A,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-800",children:"リスク管理推奨事項"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"• ポートフォリオリスクが高すぎます。ポジションサイズを縮小してください。"}),(0,r.jsx)("li",{children:"• 9984.T（ソフトバンクグループ）の損切りを検討してください。"}),(0,r.jsx)("li",{children:"• 損切りラインを現在の80%に設定することを推奨します。"})]})]})]})})]})})]}),eD&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"銘柄選択・分析"}),(0,r.jsx)("button",{onClick:()=>eR(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsx)(ex,{selectedSymbols:eE,onSymbolsChange:e_,onAnalysis:sw,isAnalyzing:ej})]})}),eo&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"設定連携分析実行"}),(0,r.jsx)("button",{onClick:()=>eh(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),sg?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:sj})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(sp,"%")}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:[Math.round(sp),"% 完了"]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"設定に基づいて全銘柄の分析を実行します。この処理には数分かかる場合があります。"}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"実行設定"}),(()=>{let e=sb();return(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("div",{children:["• ",e.prediction]}),(0,r.jsxs)("div",{children:["• ",e.model]}),(0,r.jsxs)("div",{children:["• ",e.retrain]}),(0,r.jsxs)("div",{children:["• ",e.features]}),(0,r.jsxs)("div",{children:["• ",e.data]})]})})()]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>eh(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,r.jsx)("button",{onClick:()=>sv(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"設定で実行"})]})]})]})}),eu&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"設定"}),(0,r.jsx)("button",{onClick:()=>ep(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"予測期間（日数）"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"7",children:"7日"}),(0,r.jsx)("option",{value:"14",children:"14日"}),(0,r.jsx)("option",{value:"30",selected:!0,children:"30日"}),(0,r.jsx)("option",{value:"60",children:"60日"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"使用するモデル"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"すべてのモデル"}),(0,r.jsx)("option",{value:"linear",children:"線形回帰"}),(0,r.jsx)("option",{value:"random_forest",children:"ランダムフォレスト"}),(0,r.jsx)("option",{value:"xgboost",children:"XGBoost"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"特徴量選択"}),(0,r.jsx)("div",{className:"space-y-2",children:["SMA_5","SMA_10","SMA_25","SMA_50","RSI","MACD","ボリンジャーバンド"].map(e=>(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{onClick:()=>ep(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,r.jsx)("button",{onClick:()=>{ep(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"保存"})]})]})]})}),eP&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"銘柄監視管理"}),(0,r.jsx)("button",{onClick:()=>eM(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(j.A,{className:"h-6 w-6"})})]}),(0,r.jsx)(ey,{onMonitoringChange:e=>{eO(e)},onConfigChange:e=>{eK(e)}})]})})}),(0,r.jsx)(eL,{isVisible:e1,onClose:()=>e4(!1),onStepComplete:e=>{console.log("ガイドステップ完了:",e)},currentTab:b}),(0,r.jsx)(e6,{isOpen:si,onClose:()=>sn(!1)}),(0,r.jsx)(e3,{isOpen:sc,onClose:()=>sd(!1),currentPage:"/"}),sm&&(0,r.jsx)("div",{className:"fixed top-4 right-4 z-40",children:(0,r.jsx)(eQ,{items:so,onItemComplete:e=>{sx(s=>s.map(s=>s.id===e?(0,l._)((0,a._)({},s),{completed:!0}):s)),sa.addChecklistItem(e)},onItemReset:e=>{sx(s=>s.map(s=>s.id===e?(0,l._)((0,a._)({},s),{completed:!1}):s)),sa.removeChecklistItem(e)},onComplete:()=>{sh(!1),sa.isTourCompleted=!0}})}),!sm&&!sa.checklistProgress.isCompleted&&(0,r.jsx)("div",{className:"fixed top-4 right-4 z-40",children:(0,r.jsx)(eZ,{completedCount:sa.checklistProgress.completedItems.length,totalCount:sa.checklistProgress.totalItems,onClick:()=>sh(!0)})})]})}function si(){return(0,r.jsx)(ev.SettingsProvider,{children:(0,r.jsx)(eB,{children:(0,r.jsx)(sr,{})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[76,96,358],()=>s(66307)),_N_E=e.O()}]);