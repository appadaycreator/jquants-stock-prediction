(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{66307:(e,s,t)=>{Promise.resolve().then(t.bind(t,8161))},8161:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eL});var a=t(39233),l=t(65843),r=t(95155),n=t(12115),c=t(67396),i=t(59909),d=t(76046),o=t(66507),x=t(14081),m=t(68236),h=t(93467),g=t(86878),u=t(92598),j=t(59136),p=t(40767),b=t(86710),N=t(51719);function y(e){let{activeTab:s,onTabChange:t,onAnalysisClick:a,onSettingsClick:l,onMonitoringClick:i}=e,[y,f]=(0,n.useState)(!1),[v,w]=(0,n.useState)(!1),A=(0,d.usePathname)(),[k,S]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=()=>{S(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>(y?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[y]);let C=[{href:"../../../../",label:"ダッシュボード",icon:o.A,description:"メインダッシュボード"},{href:"../../../../reports",label:"レポート",icon:x.A,description:"詳細レポート"},{href:"../../../../settings",label:"設定",icon:m.A,description:"システム設定"},{href:"../../../../usage",label:"使い方",icon:h.A,description:"使用方法ガイド"}],T=[{label:"銘柄分析",icon:g.A,onClick:a,color:"bg-blue-600 hover:bg-blue-700"},{label:"銘柄監視",icon:u.A,onClick:i,color:"bg-green-600 hover:bg-green-700"},{label:"設定",icon:m.A,onClick:l,color:"bg-gray-600 hover:bg-gray-700"}];return k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"lg:hidden bg-white shadow-sm border-b sticky top-0 z-40",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(j.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"J-Quants"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"株価予測システム"})]})]}),(0,r.jsx)("button",{onClick:()=>f(!y),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"メニューを開く",children:y?(0,r.jsx)(p.A,{className:"h-6 w-6 text-gray-600"}):(0,r.jsx)(b.A,{className:"h-6 w-6 text-gray-600"})})]}),(0,r.jsxs)("div",{className:"px-4 pb-3",children:[(0,r.jsxs)("button",{onClick:()=>w(!v),className:"flex items-center justify-between w-full px-3 py-2 bg-gray-50 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)("span",{children:"クイックアクション"}),(0,r.jsx)(N.A,{className:"h-4 w-4 transition-transform ".concat(v?"rotate-180":"")})]}),v&&(0,r.jsx)("div",{className:"mt-2 grid grid-cols-3 gap-2",children:T.map((e,s)=>{let t=e.icon;return(0,r.jsxs)("button",{onClick:()=>{var s;null===(s=e.onClick)||void 0===s||s.call(e),w(!1)},className:"flex flex-col items-center space-y-1 px-3 py-2 rounded-lg text-white text-xs font-medium transition-colors ".concat(e.color),children:[(0,r.jsx)(t,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.label})]},s)})})]})]}),y&&(0,r.jsxs)("div",{className:"lg:hidden fixed inset-0 z-50",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>f(!1)}),(0,r.jsx)("div",{className:"fixed right-0 top-0 h-full w-80 bg-white shadow-xl transform transition-transform duration-300 ease-in-out",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(j.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"メニュー"})]}),(0,r.jsx)("button",{onClick:()=>f(!1),className:"p-2 rounded-lg hover:bg-gray-100",children:(0,r.jsx)(p.A,{className:"h-5 w-5 text-gray-600"})})]}),(0,r.jsxs)("nav",{className:"flex-1 overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-4 space-y-2",children:C.map(e=>{let s=e.icon,t=A===e.href;return(0,r.jsxs)(c.default,{href:e.href,onClick:()=>f(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ".concat(t?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,r.jsx)(s,{className:"h-5 w-5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.href)})}),(0,r.jsxs)("div",{className:"p-4 border-t",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"クイックアクション"}),(0,r.jsx)("div",{className:"space-y-2",children:T.map((e,s)=>{let t=e.icon;return(0,r.jsxs)("button",{onClick:()=>{var s;null===(s=e.onClick)||void 0===s||s.call(e),f(!1)},className:"flex items-center space-x-3 w-full px-4 py-3 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(t,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:e.label})]},s)})})]})]}),(0,r.jsx)("div",{className:"p-4 border-t bg-gray-50",children:(0,r.jsx)("div",{className:"text-xs text-gray-500 text-center",children:"J-Quants 株価予測システム v1.0"})})]})})]})]}):null}t(11864),t(66261);var f=t(36527),v=t(21773),w=t(29191),A=t(73239),k=t(59676),S=t(81476),C=t(42640),T=t(23950),_=t(77607),E=t(94973),D=t(15255),M=t(12800),I=t(66963),L=t(71214),F=t(85608),O=t(95051),K=t(394),R=t(79449),W=t(30563),z=t(909),J=t(67732),P=t(46699),U=t(7032),B=t(58581),H=t(38619),Y=t(78058),G=t(81556),$=t(44857),X=t(16075),Q=t(50314),V=t(44504);function q(e){let{data:s,type:t,title:c,dataKey:i,xAxisKey:d="date",lines:o=[],height:x=300,onFullscreen:m,isFullscreen:h=!1}=e,[u,p]=(0,n.useState)(!1),[b,N]=(0,n.useState)(1),[y,f]=(0,n.useState)(0),[v,w]=(0,n.useState)(!1),[A,S]=(0,n.useState)(0),C=(0,n.useRef)(null),T=()=>(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(()=>{switch(t){case"bar":default:return(0,r.jsx)(j.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"});case"pie":return(0,r.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"});case"scatter":return(0,r.jsx)(g.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"})}})(),(0,r.jsx)("p",{className:"text-lg font-medium",children:"データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})});return(0,r.jsxs)("div",{ref:C,className:"bg-white rounded-lg shadow-sm border ".concat(u?"fixed inset-0 z-50 p-4":""),style:{transform:"scale(".concat(b,") translateX(").concat(y,"px)"),transition:v?"none":"transform 0.1s ease-out"},onTouchStart:e=>{1===e.touches.length&&(w(!0),S(e.touches[0].clientX))},onTouchMove:e=>{if(v&&1===e.touches.length){let s=e.touches[0].clientX-A;f(e=>e+.1*s),S(e.touches[0].clientX)}},onTouchEnd:()=>{w(!1)},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:c}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("button",{onClick:()=>{N(e=>Math.max(.5,e/1.2))},className:"p-1 rounded hover:bg-gray-100 transition-colors",disabled:b<=.5,children:(0,r.jsx)(H.A,{className:"h-4 w-4 text-gray-600"})}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 min-w-[3rem] text-center",children:[Math.round(100*b),"%"]}),(0,r.jsx)("button",{onClick:()=>{N(e=>Math.min(3,1.2*e))},className:"p-1 rounded hover:bg-gray-100 transition-colors",disabled:b>=3,children:(0,r.jsx)(Y.A,{className:"h-4 w-4 text-gray-600"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("button",{onClick:()=>{N(1),f(0)},className:"p-1 rounded hover:bg-gray-100 transition-colors",title:"リセット",children:(0,r.jsx)(G.A,{className:"h-4 w-4 text-gray-600"})}),(0,r.jsx)("button",{onClick:()=>{var e;let s=null===(e=C.current)||void 0===e?void 0:e.querySelector("canvas");if(s){let e=document.createElement("a");e.download="".concat(c,".png"),e.href=s.toDataURL(),e.click()}},className:"p-1 rounded hover:bg-gray-100 transition-colors",title:"ダウンロード",children:(0,r.jsx)($.A,{className:"h-4 w-4 text-gray-600"})}),(0,r.jsx)("button",{onClick:()=>{navigator.share?navigator.share({title:c,text:"J-Quants株価予測: ".concat(c),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("URLをクリップボードにコピーしました"))},className:"p-1 rounded hover:bg-gray-100 transition-colors",title:"共有",children:(0,r.jsx)(X.A,{className:"h-4 w-4 text-gray-600"})}),(0,r.jsx)("button",{onClick:()=>{var e,s,t,a;u?(null===(e=(s=document).exitFullscreen)||void 0===e||e.call(s),p(!1)):(null===(a=C.current)||void 0===a||null===(t=a.requestFullscreen)||void 0===t||t.call(a),p(!0)),null==m||m()},className:"p-1 rounded hover:bg-gray-100 transition-colors",title:u?"フルスクリーン終了":"フルスクリーン",children:u?(0,r.jsx)(Q.A,{className:"h-4 w-4 text-gray-600"}):(0,r.jsx)(V.A,{className:"h-4 w-4 text-gray-600"})})]})]})]}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(B.u,{width:"100%",height:x,children:(()=>{if(!s||0===s.length)return T();let e={data:s,margin:{top:20,right:30,left:20,bottom:5}};switch(t){case"line":return(0,r.jsxs)(E.b,(0,l._)((0,a._)({},e),{children:[(0,r.jsx)(D.d,{strokeDasharray:"3 3"}),(0,r.jsx)(M.W,{dataKey:d}),(0,r.jsx)(I.h,{}),(0,r.jsx)(L.m,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}}),(0,r.jsx)(F.s,{}),o.map((e,s)=>(0,r.jsx)(O.N,{type:"monotone",dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth||2,dot:{r:3},activeDot:{r:5}},s))]}));case"bar":return(0,r.jsxs)(K.E,(0,l._)((0,a._)({},e),{children:[(0,r.jsx)(D.d,{strokeDasharray:"3 3"}),(0,r.jsx)(M.W,{dataKey:d}),(0,r.jsx)(I.h,{}),(0,r.jsx)(L.m,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"}}),(0,r.jsx)(F.s,{}),(0,r.jsx)(R.y,{dataKey:i,fill:"#8884d8"})]}));case"pie":let n=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];return(0,r.jsxs)(W.r,{children:[(0,r.jsx)(z.F,{data:s,cx:"50%",cy:"50%",labelLine:!1,label:e=>"".concat(e.name," ").concat((100*e.percent).toFixed(0),"%"),outerRadius:80,fill:"#8884d8",dataKey:i,children:s.map((e,s)=>(0,r.jsx)(J.f,{fill:n[s%n.length]},"cell-".concat(s)))}),(0,r.jsx)(L.m,{})]});case"scatter":return(0,r.jsxs)(P.t,(0,l._)((0,a._)({},e),{children:[(0,r.jsx)(D.d,{}),(0,r.jsx)(M.W,{dataKey:"actual",name:"実際値"}),(0,r.jsx)(I.h,{dataKey:"predicted",name:"予測値"}),(0,r.jsx)(L.m,{cursor:{strokeDasharray:"3 3"}}),(0,r.jsx)(U.X,{name:"予測ポイント",data:s,fill:"#8884d8"})]}));default:return(0,r.jsx)("div",{children:"サポートされていないチャートタイプです"})}})()})}),!u&&(0,r.jsx)("div",{className:"px-4 pb-4",children:(0,r.jsx)("div",{className:"text-xs text-gray-500 bg-gray-50 rounded-lg p-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"\uD83D\uDCF1 モバイル操作:"}),(0,r.jsx)("span",{children:"スワイプで移動 • ピンチでズーム"})]})})})]})}function Z(e){var s;let{stockData:t,modelComparison:c,featureAnalysis:i,predictions:d,summary:o,onRefresh:x,onAnalysis:h,onSettings:u}=e,[p,b]=(0,n.useState)("overview"),[N,y]=(0,n.useState)(!1),f=async()=>{y(!0),await x(),setTimeout(()=>y(!1),1e3)},E=e=>{try{if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(/^\d{8}$/.test(e))return e.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3");let s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date format:",e),"2024-01-01";return s.toISOString().split("T")[0]}catch(s){return console.error("Date normalization error:",s,"Input:",e),"2024-01-01"}},D=e=>{try{let s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date format:",e),"Invalid Date";return s.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})}catch(s){return console.error("Date formatting error:",s,"Input:",e),"Invalid Date"}},M=t.map(e=>({date:D(E(e.date)),実際価格:e.close,SMA_5:e.sma_5,SMA_10:e.sma_10,SMA_25:e.sma_25,SMA_50:e.sma_50,出来高:e.volume/1e6})),I=d.slice(0,30).map(e=>({index:e.index,実際値:e.actual,予測値:e.predicted}));return(0,r.jsxs)("div",{className:"lg:hidden",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b sticky top-0 z-30",children:(0,r.jsxs)("div",{className:"px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"J-Quants株価予測"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"機械学習による株価予測システム"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:f,disabled:N,className:"p-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 transition-colors",children:(0,r.jsx)(v.A,{className:"h-4 w-4 ".concat(N?"animate-spin":"")})}),(0,r.jsx)("button",{onClick:h,className:"p-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:(0,r.jsx)(w.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:u,className:"p-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 transition-colors",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(A.A,{className:"h-4 w-4 text-green-500"}),(0,r.jsx)("span",{className:"text-gray-600",children:"システム: 正常稼働中"})]}),(0,r.jsxs)("span",{className:"text-gray-500",children:["最終更新: ",o?o.last_updated:"-"]})]})]})}),(0,r.jsx)("div",{className:"bg-white border-b",children:(0,r.jsx)("div",{className:"flex overflow-x-auto",children:[{id:"overview",label:"概要",icon:j.A},{id:"predictions",label:"予測",icon:g.A},{id:"models",label:"モデル",icon:k.A},{id:"analysis",label:"分析",icon:S.A},{id:"risk",label:"リスク",icon:C.A}].map(e=>{let s=e.icon;return(0,r.jsxs)("button",{onClick:()=>b(e.id),className:"flex items-center space-x-1 px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ".concat(p===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,r.jsx)(s,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.label})]},e.id)})})}),(0,r.jsxs)("div",{className:"p-4 space-y-4",children:["overview"===p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)(g.A,{className:"h-5 w-5 text-blue-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"最優秀モデル"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==o?void 0:null===(s=o.best_model)||void 0===s?void 0:s.toUpperCase())||"-"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)(k.A,{className:"h-5 w-5 text-green-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"予測精度"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==o?void 0:o.r2)||"-"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)(j.A,{className:"h-5 w-5 text-yellow-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"MAE"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==o?void 0:o.mae)||"-"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)(S.A,{className:"h-5 w-5 text-purple-600"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"データ数"})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(null==o?void 0:o.total_data_points)||"-"})]})]}),(0,r.jsx)(q,{data:M,type:"line",title:"株価推移と移動平均",dataKey:"実際価格",lines:[{dataKey:"実際価格",stroke:"#2563eb",strokeWidth:2},{dataKey:"SMA_5",stroke:"#dc2626",strokeWidth:1},{dataKey:"SMA_10",stroke:"#059669",strokeWidth:1},{dataKey:"SMA_25",stroke:"#d97706",strokeWidth:1},{dataKey:"SMA_50",stroke:"#7c3aed",strokeWidth:1}],height:250})]}),"predictions"===p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q,{data:I,type:"line",title:"予測 vs 実際値",dataKey:"実際値",lines:[{dataKey:"実際値",stroke:"#2563eb",strokeWidth:2},{dataKey:"予測値",stroke:"#dc2626",strokeWidth:2}],height:250}),(0,r.jsx)(q,{data:d.slice(0,20).map(e=>({index:e.index,誤差:e.error.toFixed(2)})),type:"bar",title:"予測誤差分布",dataKey:"誤差",height:200})]}),"models"===p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,r.jsx)("div",{className:"px-4 py-3 border-b",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"モデル性能比較"})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:c.slice(0,5).map((e,s)=>(0,r.jsx)("div",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:s+1}),0===s&&(0,r.jsx)("span",{className:"text-green-600",children:"\uD83C\uDFC6"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.type})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["R\xb2: ",e.r2.toFixed(4)]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["MAE: ",e.mae.toFixed(4)]})]})]})},e.name))})]}),(0,r.jsx)(q,{data:c,type:"bar",title:"MAE比較",dataKey:"mae",height:200})]}),"analysis"===p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q,{data:i,type:"bar",title:"特徴量重要度",dataKey:"percentage",height:250}),(0,r.jsx)(q,{data:i.map(e=>(0,l._)((0,a._)({},e),{name:e.feature})),type:"pie",title:"特徴量重要度分布",dataKey:"percentage",height:200}),(0,r.jsx)(q,{data:d.slice(0,30),type:"scatter",title:"実際値 vs 予測値散布図",dataKey:"predicted",height:250})]}),"risk"===p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"リスク管理"}),(0,r.jsx)(C.A,{className:"h-5 w-5 text-blue-600"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-800",children:"リスクレベル"}),(0,r.jsx)("p",{className:"text-lg font-bold text-red-600",children:"HIGH"})]}),(0,r.jsx)(T.A,{className:"h-6 w-6 text-red-500"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"ポートフォリオ価値"}),(0,r.jsx)("p",{className:"text-lg font-bold text-blue-600",children:"\xa51,250,000"})]}),(0,r.jsx)(g.A,{className:"h-6 w-6 text-blue-500"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"最大ドローダウン"}),(0,r.jsx)("p",{className:"text-lg font-bold text-yellow-600",children:"8.5%"})]}),(0,r.jsx)(_.A,{className:"h-6 w-6 text-yellow-500"})]})]})]}),(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(T.A,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"リスク管理推奨事項"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,r.jsx)("li",{children:"• ポートフォリオリスクが高すぎます"}),(0,r.jsx)("li",{children:"• ポジションサイズを縮小してください"}),(0,r.jsx)("li",{children:"• 損切りラインを設定することを推奨"})]})]})]})})]})]})]})}var ee=t(67072),es=t(36954),et=t(54947),ea=t(61594),el=t(66889);function er(e){var s;let{onAnalysisComplete:t,onAnalysisStart:a}=e,[l,c]=(0,n.useState)(!1),[i,d]=(0,n.useState)(0),[o,x]=(0,n.useState)(""),[h,g]=(0,n.useState)(null),[u,p]=(0,n.useState)(null),[b,N]=(0,n.useState)("00:00"),[y,f]=(0,n.useState)([]),[S,C]=(0,n.useState)(!1),[T,_]=(0,n.useState)(!1),[E,D]=(0,n.useState)([{id:"ultra_fast",name:"超高速分析",icon:ee.A,time:"1-2分",color:"bg-blue-500"},{id:"comprehensive",name:"包括的分析",icon:j.A,time:"3-5分",color:"bg-green-500"},{id:"trading",name:"トレーディング",icon:k.A,time:"4-6分",color:"bg-purple-500"}]),[M,I]=(0,n.useState)("ultra_fast");(0,n.useEffect)(()=>{let e=localStorage.getItem("mobileAnalysisHistory");if(e)try{let s=JSON.parse(e);f(s)}catch(e){console.error("履歴読み込みエラー:",e)}},[]);let L=e=>{let s=[e,...y.slice(0,4)];f(s),localStorage.setItem("mobileAnalysisHistory",JSON.stringify(s))},F=async()=>{try{c(!0),d(0),x("超高速分析を開始しています..."),p(null),g(null),N("00:00"),null==a||a();let e=Date.now(),s=setInterval(async()=>{try{let e=await fetch("../../../../api/run-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysisType:"ultra_fast",symbols:[],analysisId:"mobile_".concat(Date.now())})}),a=await e.json();if(a.success){d(100),x("分析完了！"),g(a),null==t||t(a);let e={id:"mobile_".concat(Date.now()),type:"ultra_fast",timestamp:new Date().toISOString(),duration:b,status:"success",result:a};L(e),clearInterval(s)}else p(a.error||"分析に失敗しました"),x("分析に失敗しました"),clearInterval(s)}catch(e){console.error("進捗取得エラー:",e)}},1e3),l=setInterval(()=>{let s=Math.floor((Date.now()-e)/1e3),t=Math.floor(s/60);N("".concat(t.toString().padStart(2,"0"),":").concat((s%60).toString().padStart(2,"0")))},1e3),r=setInterval(()=>{d(e=>e>=90?e:e+10*Math.random())},2e3);setTimeout(()=>{clearInterval(s),clearInterval(l),clearInterval(r),c(!1)},12e4)}catch(e){p(e instanceof Error?e.message:"不明なエラーが発生しました"),x("分析に失敗しました"),c(!1)}},O=()=>{c(!1),d(0),x(""),p(null),g(null)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(es.A,{className:"w-6 h-6 text-blue-600"}),(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-800",children:"5分完結分析"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>C(!S),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",children:(0,r.jsx)(et.A,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:()=>_(!T),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]})]})})}),(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"クイックアクション"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3",children:E.map(e=>{let s=e.icon;return(0,r.jsx)("button",{onClick:()=>I(e.id),className:"p-4 rounded-lg border-2 transition-all ".concat(M===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color," text-white"),children:(0,r.jsx)(s,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[(0,r.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["予想時間: ",e.time]})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:M===e.id?"選択中":""})]})},e.id)})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800",children:"分析実行"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[null===(s=E.find(e=>e.id===M))||void 0===s?void 0:s.name,"を実行"]})]}),(0,r.jsx)("button",{onClick:F,disabled:l,className:"px-6 py-3 rounded-lg font-medium transition-all ".concat(l?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:l?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin"}),"実行中..."]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.A,{className:"w-4 h-4"}),"分析実行"]})})]}),l&&(0,r.jsxs)("div",{className:"space-y-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"分析実行中"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-blue-600",children:["経過時間: ",b]}),(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:[Math.round(i),"%"]})]})]}),(0,r.jsx)("div",{className:"w-full bg-blue-100 rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(i,"%")}})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin text-blue-600"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:o})]})]}),u&&(0,r.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,r.jsx)(ea.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"エラーが発生しました"})]}),(0,r.jsx)("p",{className:"text-red-700 text-sm mt-1",children:u}),(0,r.jsx)("button",{onClick:O,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"再試行"})]}),h&&(0,r.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-800",children:[(0,r.jsx)(A.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"分析完了"})]}),(0,r.jsx)("p",{className:"text-green-700 text-sm mt-1",children:"分析が正常に完了しました"}),(0,r.jsx)("button",{onClick:O,className:"mt-2 text-green-600 hover:text-green-800 text-sm underline",children:"新しい分析を実行"})]})]}),S&&y.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)(et.A,{className:"w-5 h-5"}),"分析履歴"]}),(0,r.jsx)("div",{className:"space-y-2",children:y.map((e,s)=>{var t;return(0,r.jsxs)("div",{className:"p-3 rounded-lg border ".concat("success"===e.status?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["success"===e.status?(0,r.jsx)(A.A,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(ea.A,{className:"w-4 h-4 text-red-600"}),(0,r.jsx)("span",{className:"font-medium text-sm",children:(null===(t=E.find(s=>s.id===e.type))||void 0===t?void 0:t.name)||e.type})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,r.jsx)(el.A,{className:"w-3 h-3"}),new Date(e.timestamp).toLocaleString("ja-JP")]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-600",children:["実行時間: ",e.duration]}),0===s&&"success"===e.status&&(0,r.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"最新結果"})]})]},e.id)})})]}),T&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"w-5 h-5"}),"設定"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"通知を有効にする"}),(0,r.jsx)("input",{type:"checkbox",className:"rounded"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"自動分析を有効にする"}),(0,r.jsx)("input",{type:"checkbox",className:"rounded"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"ダークモード"}),(0,r.jsx)("input",{type:"checkbox",className:"rounded"})]})]})]})]}),(0,r.jsx)("div",{className:"bg-white border-t mt-8",children:(0,r.jsx)("div",{className:"px-4 py-3 text-center",children:(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"1日5分で完結する超高速分析システム"})})})]})}function en(e){let{onRefresh:s,children:t,threshold:a=80,resistance:l=.5}=e,[c,i]=(0,n.useState)(!1),[d,o]=(0,n.useState)(!1),[x,m]=(0,n.useState)(0),[h,g]=(0,n.useState)(0),[u,j]=(0,n.useState)(0),[p,b]=(0,n.useState)(!1),N=(0,n.useRef)(null),y=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=N.current;if(!e)return;let t=s=>{0===e.scrollTop&&(b(!0),g(s.touches[0].clientY),j(s.touches[0].clientY))},r=e=>{if(!p)return;let s=e.touches[0].clientY,t=s-h;if(t>0){e.preventDefault();let r=Math.min(t*l,1.5*a);m(r),j(s),r>0&&i(!0)}},n=async()=>{if(!p||!c){d();return}if(x>=a){o(!0);try{await s()}catch(e){console.error("Refresh failed:",e)}finally{o(!1)}}d()},d=()=>{i(!1),m(0),g(0),j(0),b(!1)};return e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("touchmove",r,{passive:!1}),e.addEventListener("touchend",n,{passive:!1}),()=>{e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",r),e.removeEventListener("touchend",n)}},[p,c,x,h,a,l,s]);let f=Math.min(x/a,1),w=x>=a;return(0,r.jsxs)("div",{ref:N,className:"relative overflow-auto",children:[(0,r.jsx)("div",{ref:y,className:"fixed top-0 left-0 right-0 z-50 transition-all duration-200 ".concat(c||d?"translate-y-0":"-translate-y-full"),style:{transform:"translateY(".concat(Math.max(0,x-60),"px)")},children:(0,r.jsxs)("div",{className:"bg-white shadow-lg border-b",children:[(0,r.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"transition-all duration-200 ".concat(d?"animate-spin":""),style:{transform:"rotate(".concat(180*f,"deg)")},children:(0,r.jsx)(v.A,{className:"h-5 w-5 text-blue-600"})}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-700",children:d?"更新中...":w?"離すと更新されます":"引っ張って更新"})]})}),(0,r.jsx)("div",{className:"h-1 bg-gray-200",children:(0,r.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-200",style:{width:"".concat(100*f,"%")}})})]})}),(0,r.jsx)("div",{className:"transition-transform duration-200",style:{transform:"translateY(".concat(c?Math.min(.3*x,20):0,"px)")},children:t}),c&&(0,r.jsx)("div",{className:"fixed inset-0 pointer-events-none z-40",style:{background:"linear-gradient(to bottom, \n              rgba(59, 130, 246, ".concat(.1*f,") 0%, \n              rgba(59, 130, 246, 0) 100%)")}})]})}var ec=t(20853),ei=t(98867);let ed=[{code:"7203.T",name:"トヨタ自動車",sector:"自動車"},{code:"6758.T",name:"ソニーグループ",sector:"エンターテインメント"},{code:"9984.T",name:"ソフトバンクグループ",sector:"通信"},{code:"9432.T",name:"日本電信電話",sector:"通信"},{code:"6861.T",name:"キーエンス",sector:"電子部品"},{code:"4063.T",name:"信越化学工業",sector:"化学"},{code:"8035.T",name:"東京エレクトロン",sector:"半導体"},{code:"8306.T",name:"三菱UFJフィナンシャル・グループ",sector:"金融"},{code:"4503.T",name:"アステラス製薬",sector:"製薬"},{code:"4519.T",name:"中外製薬",sector:"製薬"},{code:"4061.T",name:"デンカ",sector:"化学"},{code:"4568.T",name:"第一三共",sector:"製薬"},{code:"6501.T",name:"日立製作所",sector:"電機"},{code:"6752.T",name:"パナソニック",sector:"電機"},{code:"6981.T",name:"村田製作所",sector:"電子部品"},{code:"7741.T",name:"HOYA",sector:"光学機器"},{code:"7974.T",name:"任天堂",sector:"エンターテインメント"},{code:"8001.T",name:"伊藤忠商事",sector:"商社"},{code:"8002.T",name:"丸紅",sector:"商社"},{code:"8031.T",name:"三井物産",sector:"商社"}];function eo(e){let{selectedSymbols:s,onSymbolsChange:t,onAnalysis:a,isAnalyzing:l=!1}=e,[c,i]=(0,n.useState)(""),[d,o]=(0,n.useState)(!1),[x,m]=(0,n.useState)(ed);(0,n.useEffect)(()=>{c?m(ed.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.code.toLowerCase().includes(c.toLowerCase())||e.sector.toLowerCase().includes(c.toLowerCase()))):m(ed)},[c]);let h=e=>{s.includes(e)?t(s.filter(s=>s!==e)):t([...s,e])},u=e=>{t(s.filter(s=>s!==e))},j=e=>ed.find(s=>s.code===e);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(ec.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"銘柄名、コード、セクターで検索...",value:c,onChange:e=>i(e.target.value),onFocus:()=>o(!0),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("button",{onClick:()=>a(s),disabled:0===s.length||l,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-2"}),l?"分析中...":"分析実行"]})]}),d&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(e=>(0,r.jsxs)("div",{onClick:()=>{h(e.code),i(""),o(!1)},className:"flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.code," • ",e.sector]})]}),s.includes(e.code)&&(0,r.jsx)(ei.A,{className:"h-4 w-4 text-blue-600"})]},e.code))})]}),s.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h3",{className:"text-sm font-medium text-gray-700",children:["選択された銘柄 (",s.length,"件)"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>{let s=j(e);return(0,r.jsxs)("div",{className:"flex items-center space-x-2 bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:(null==s?void 0:s.name)||e}),(0,r.jsxs)("span",{className:"text-blue-500",children:["(",e,")"]}),(0,r.jsx)("button",{onClick:()=>u(e),className:"text-blue-500 hover:text-blue-700",children:(0,r.jsx)(p.A,{className:"h-3 w-3"})})]},e)})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"クイック選択"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{onClick:()=>t(["7203.T","6758.T","9984.T"]),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",children:"主要3銘柄"}),(0,r.jsx)("button",{onClick:()=>t(["7203.T","6758.T","9984.T","9432.T","6861.T"]),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",children:"主要5銘柄"}),(0,r.jsx)("button",{onClick:()=>t(ed.slice(0,10).map(e=>e.code)),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",children:"主要10銘柄"}),(0,r.jsx)("button",{onClick:()=>t([]),className:"px-3 py-1 text-xs bg-red-100 text-red-700 rounded-full hover:bg-red-200",children:"全クリア"})]})]})]})}function ex(e){let{selectedSymbols:s}=e,[t,a]=(0,n.useState)([]),[l,c]=(0,n.useState)(!0),[i,d]=(0,n.useState)(null);(0,n.useEffect)(()=>{s.length>0&&o()},[s]);let o=async()=>{try{c(!0),d(null);let e=await fetch("./data/symbol_analysis_results.json");if(!e.ok)throw Error("分析結果が見つかりません");let s=await e.json(),t=Object.values(s.analysis_results||{});a(t)}catch(e){console.error("分析結果読み込みエラー:",e),d("分析結果の読み込みに失敗しました")}finally{c(!1)}},x=e=>{switch(e){case"BUY":return(0,r.jsx)(g.A,{className:"h-4 w-4 text-green-600"});case"SELL":return(0,r.jsx)(_.A,{className:"h-4 w-4 text-red-600"});default:return(0,r.jsx)(f.A,{className:"h-4 w-4 text-gray-600"})}},m=e=>{switch(e){case"BUY":return"text-green-600 bg-green-50";case"SELL":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},h=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":"text-red-600";return l?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:"分析結果を読み込み中..."})]}):i?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8 text-red-600",children:[(0,r.jsx)(ea.A,{className:"h-5 w-5 mr-2"}),(0,r.jsx)("span",{children:i})]}):0===t.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"分析結果がありません。銘柄を選択して分析を実行してください。"}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"選択された銘柄の分析結果"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.symbol}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 rounded-full text-xs ".concat(m(e.signals.overall_signal)),children:[x(e.signals.overall_signal),(0,r.jsx)("span",{children:e.signals.overall_signal})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"現在価格:"}),(0,r.jsxs)("span",{className:"font-medium",children:["\xa5",e.stats.current_price.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"変化率:"}),(0,r.jsxs)("span",{className:"font-medium ".concat(e.stats.change_percent>=0?"text-green-600":"text-red-600"),children:[e.stats.change_percent>=0?"+":"",e.stats.change_percent.toFixed(2),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"信頼度:"}),(0,r.jsxs)("span",{className:"font-medium ".concat(h(e.signals.confidence)),children:[(100*e.signals.confidence).toFixed(0),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"ボラティリティ:"}),(0,r.jsxs)("span",{className:"font-medium",children:[(100*e.stats.volatility).toFixed(1),"%"]})]})]}),(0,r.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,r.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"RSI:"}),(0,r.jsx)("span",{className:m(e.signals.rsi_signal),children:e.signals.rsi_signal})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"MACD:"}),(0,r.jsx)("span",{className:m(e.signals.macd_signal),children:e.signals.macd_signal})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"BB:"}),(0,r.jsx)("span",{className:m(e.signals.bb_signal),children:e.signals.bb_signal})]})]})})]},e.symbol))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"技術指標詳細"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"銘柄"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RSI"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MACD"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"BB%"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SMA5"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SMA25"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.symbol}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.rsi?e.technical.rsi.toFixed(2):"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.macd?e.technical.macd.toFixed(4):"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.bb_percent?(100*e.technical.bb_percent).toFixed(1)+"%":"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.sma_5?"\xa5"+e.technical.sma_5.toLocaleString():"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.technical.sma_25?"\xa5"+e.technical.sma_25.toLocaleString():"N/A"})]},e.symbol))})]})})]})]})}var em=t(38207);let eh=[{type:"ultra_fast",name:"超高速分析",description:"1日5分で完結する最適化された分析",icon:(0,r.jsx)(ee.A,{className:"w-5 h-5"}),estimatedTime:"1-2分"},{type:"comprehensive",name:"包括的分析",description:"データ取得から予測まで全工程を自動実行",icon:(0,r.jsx)(j.A,{className:"w-5 h-5"}),estimatedTime:"3-5分"},{type:"symbols",name:"銘柄分析",description:"指定銘柄の詳細分析を実行",icon:(0,r.jsx)(g.A,{className:"w-5 h-5"}),estimatedTime:"2-3分"},{type:"trading",name:"トレーディング分析",description:"統合トレーディングシステムによる分析",icon:(0,r.jsx)(ee.A,{className:"w-5 h-5"}),estimatedTime:"4-6分"},{type:"sentiment",name:"感情分析",description:"ニュース感情分析による予測",icon:(0,r.jsx)(em.A,{className:"w-5 h-5"}),estimatedTime:"3-4分"}];function eg(e){var s,t,a;let{onAnalysisComplete:l,onAnalysisStart:c}=e,[i,d]=(0,n.useState)(!1),[o,x]=(0,n.useState)("ultra_fast"),[h,u]=(0,n.useState)(0),[j,p]=(0,n.useState)(""),[b,N]=(0,n.useState)(!1),[y,f]=(0,n.useState)(null),[k,S]=(0,n.useState)(null),[C,T]=(0,n.useState)(null),[_,E]=(0,n.useState)("00:00"),[D,M]=(0,n.useState)([]),[I,L]=(0,n.useState)(!1),[F,O]=(0,n.useState)(null),K=eh.find(e=>e.type===o),R=e=>{let s=[e,...D.slice(0,9)];M(s),localStorage.setItem("analysisHistory",JSON.stringify(s))},W=()=>{let e=localStorage.getItem("analysisHistory");if(e)try{let s=JSON.parse(e);M(s),s.length>0&&O(s[0].result)}catch(e){console.error("履歴読み込みエラー:",e)}};n.useEffect(()=>{W()},[]);let z=async()=>{try{let e="analysis_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));T(e),d(!0),u(0),p("分析を開始しています..."),S(null),f(null),E("00:00"),null==c||c();let s=setInterval(async()=>{try{let t=await fetch("../../../../api/analysis-progress?id=".concat(e)),a=await t.json();if(void 0!==a.progress&&u(a.progress),a.status&&p(a.status),a.elapsed&&E(a.elapsed),a.completed){if(clearInterval(s),a.result){f(a.result),null==l||l(a.result);let s={id:e,type:o,timestamp:new Date().toISOString(),duration:_,status:"success",result:a.result};R(s)}if(a.error){S(a.error);let s={id:e,type:o,timestamp:new Date().toISOString(),duration:_,status:"error",error:a.error};R(s)}d(!1)}}catch(e){console.error("進捗取得エラー:",e)}},2e3),t=await fetch("../../../../api/run-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysisType:o,symbols:[],analysisId:e})}),a=await t.json();a.success?(p("分析が完了しました！"),u(100),f(a),null==l||l(a)):(S(a.error||"分析に失敗しました"),p("分析に失敗しました")),clearInterval(s)}catch(e){S(e instanceof Error?e.message:"不明なエラーが発生しました"),p("分析に失敗しました")}finally{d(!1)}},J=()=>{d(!1),u(0),p(""),S(null),f(null)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[(0,r.jsx)(w.A,{className:"w-6 h-6 text-blue-600"}),"ワンクリック分析実行"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>L(!I),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"分析履歴",children:(0,r.jsx)(et.A,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:()=>N(!b),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"設定",children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})]})]}),b&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"分析タイプを選択"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:eh.map(e=>(0,r.jsxs)("button",{onClick:()=>x(e.type),className:"p-3 rounded-lg border-2 transition-all ".concat(o===e.type?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[e.icon,(0,r.jsx)("span",{className:"font-medium",children:e.name})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["予想時間: ",e.estimatedTime]})]},e.type))})]}),I&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)(et.A,{className:"w-5 h-5"}),"分析履歴"]}),0===D.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"分析履歴がありません"}):(0,r.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:D.map((e,s)=>{var t;return(0,r.jsxs)("div",{className:"p-3 rounded-lg border ".concat("success"===e.status?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["success"===e.status?(0,r.jsx)(A.A,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(ea.A,{className:"w-4 h-4 text-red-600"}),(0,r.jsx)("span",{className:"font-medium text-sm",children:(null===(t=eh.find(s=>s.type===e.type))||void 0===t?void 0:t.name)||e.type})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,r.jsx)(el.A,{className:"w-3 h-3"}),new Date(e.timestamp).toLocaleString("ja-JP")]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-600",children:["実行時間: ",e.duration]}),0===s&&"success"===e.status&&(0,r.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"最新結果"})]})]},e.id)})})]}),F&&y&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"w-5 h-5"}),"前回結果との比較"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-blue-700 mb-2",children:"前回の結果"}),(0,r.jsxs)("div",{className:"text-sm text-blue-600",children:[(0,r.jsxs)("p",{children:["実行日時: ",new Date(null===(s=D[0])||void 0===s?void 0:s.timestamp).toLocaleString("ja-JP")]}),(0,r.jsxs)("p",{children:["実行時間: ",null===(t=D[0])||void 0===t?void 0:t.duration]}),(0,r.jsxs)("p",{children:["分析タイプ: ",null===(a=eh.find(e=>{var s;return e.type===(null===(s=D[0])||void 0===s?void 0:s.type)}))||void 0===a?void 0:a.name]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-green-700 mb-2",children:"今回の結果"}),(0,r.jsxs)("div",{className:"text-sm text-green-600",children:[(0,r.jsxs)("p",{children:["実行日時: ",new Date().toLocaleString("ja-JP")]}),(0,r.jsxs)("p",{children:["実行時間: ",_]}),(0,r.jsxs)("p",{children:["分析タイプ: ",null==K?void 0:K.name]})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-800",children:[null==K?void 0:K.name,"を実行"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:null==K?void 0:K.description}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["予想時間: ",null==K?void 0:K.estimatedTime]})]}),(0,r.jsx)("button",{onClick:z,disabled:i,className:"px-6 py-3 rounded-lg font-medium transition-all ".concat(i?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:i?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin"}),"実行中..."]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.A,{className:"w-4 h-4"}),"分析実行"]})})]}),i&&(0,r.jsxs)("div",{className:"space-y-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"分析実行中"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-blue-600",children:["経過時間: ",_]}),(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:[h,"%"]})]})]}),(0,r.jsx)("div",{className:"w-full bg-blue-100 rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(h,"%")}})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin text-blue-600"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:j})]}),C&&(0,r.jsxs)("p",{className:"text-xs text-blue-500",children:["分析ID: ",C]})]}),k&&(0,r.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,r.jsx)(ea.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"エラーが発生しました"})]}),(0,r.jsx)("p",{className:"text-red-700 text-sm mt-1",children:k}),(0,r.jsx)("button",{onClick:J,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"再試行"})]}),y&&(0,r.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-800",children:[(0,r.jsx)(A.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:"分析完了"})]}),(0,r.jsx)("p",{className:"text-green-700 text-sm mt-1",children:y.message}),y.webDataGenerated&&(0,r.jsx)("p",{className:"text-green-600 text-xs mt-1",children:"✅ Webデータも更新されました"}),(0,r.jsx)("button",{onClick:J,className:"mt-2 text-green-600 hover:text-green-800 text-sm underline",children:"新しい分析を実行"})]})]})]})}var eu=t(33473),ej=t(80738),ep=t(45686);let eb=[{code:"7203.T",name:"トヨタ自動車",sector:"自動車"},{code:"6758.T",name:"ソニーグループ",sector:"エンターテインメント"},{code:"9984.T",name:"ソフトバンクグループ",sector:"通信"},{code:"9432.T",name:"日本電信電話",sector:"通信"},{code:"6861.T",name:"キーエンス",sector:"電子部品"},{code:"4063.T",name:"信越化学工業",sector:"化学"},{code:"8035.T",name:"東京エレクトロン",sector:"半導体"},{code:"8306.T",name:"三菱UFJフィナンシャル・グループ",sector:"金融"},{code:"4503.T",name:"アステラス製薬",sector:"製薬"},{code:"4519.T",name:"中外製薬",sector:"製薬"},{code:"4061.T",name:"デンカ",sector:"化学"},{code:"4568.T",name:"第一三共",sector:"製薬"},{code:"6501.T",name:"日立製作所",sector:"電機"},{code:"6752.T",name:"パナソニック",sector:"電機"},{code:"6981.T",name:"村田製作所",sector:"電子部品"},{code:"7741.T",name:"HOYA",sector:"光学機器"},{code:"7974.T",name:"任天堂",sector:"エンターテインメント"},{code:"8001.T",name:"伊藤忠商事",sector:"商社"},{code:"8002.T",name:"丸紅",sector:"商社"},{code:"8031.T",name:"三井物産",sector:"商社"},{code:"2914.T",name:"日本たばこ産業",sector:"たばこ"},{code:"3407.T",name:"旭化成",sector:"化学"},{code:"3401.T",name:"帝人",sector:"化学"},{code:"3402.T",name:"東レ",sector:"化学"},{code:"3405.T",name:"クラレ",sector:"化学"},{code:"3407.T",name:"旭化成",sector:"化学"},{code:"3408.T",name:"サカタのタネ",sector:"農業"},{code:"3409.T",name:"日本水産",sector:"水産"},{code:"3410.T",name:"マルハニチロ",sector:"水産"},{code:"3411.T",name:"日本製紙",sector:"製紙"},{code:"3412.T",name:"王子ホールディングス",sector:"製紙"},{code:"3413.T",name:"日本製紙",sector:"製紙"},{code:"3414.T",name:"日本製紙",sector:"製紙"},{code:"3415.T",name:"日本製紙",sector:"製紙"},{code:"3416.T",name:"日本製紙",sector:"製紙"},{code:"3417.T",name:"日本製紙",sector:"製紙"},{code:"3418.T",name:"日本製紙",sector:"製紙"},{code:"3419.T",name:"日本製紙",sector:"製紙"},{code:"3420.T",name:"日本製紙",sector:"製紙"}];function eN(e){let{onMonitoringChange:s,onConfigChange:t}=e,[c,i]=(0,n.useState)(""),[d,o]=(0,n.useState)(!1),[x,h]=(0,n.useState)(eb),[g,j]=(0,n.useState)([]),[p,b]=(0,n.useState)(!1),[N,y]=(0,n.useState)({interval:30,priceChangeThreshold:3,volumeSpikeThreshold:200,enableAlerts:!0,alertEmail:""});(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("../../../../api/monitoring"),s=await e.json();s.stocks&&j(s.stocks),s.config&&y(s.config)}catch(t){console.error("監視データ読み込みエラー:",t);let e=localStorage.getItem("monitoredStocks"),s=localStorage.getItem("monitoringConfig");e&&j(JSON.parse(e)),s&&y(JSON.parse(s))}})()},[]),(0,n.useEffect)(()=>{null==s||s(g),null==t||t(N)},[g,N,s,t]),(0,n.useEffect)(()=>{(async()=>{try{await fetch("../../../../api/monitoring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({stocks:g,config:N})})}catch(e){console.error("監視データ保存エラー:",e),localStorage.setItem("monitoredStocks",JSON.stringify(g)),localStorage.setItem("monitoringConfig",JSON.stringify(N))}})()},[g,N]),(0,n.useEffect)(()=>{c?h(eb.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.code.toLowerCase().includes(c.toLowerCase())||e.sector.toLowerCase().includes(c.toLowerCase()))):h(eb)},[c]);let f=e=>{g.some(s=>s.code===e.code)||j([...g,{code:e.code,name:e.name,sector:e.sector,isMonitoring:!0,lastUpdate:new Date().toISOString(),alerts:[]}]),i(""),o(!1)},v=e=>{j(g.filter(s=>s.code!==e))},w=e=>{j(g.map(s=>s.code===e?(0,l._)((0,a._)({},s),{isMonitoring:!s.isMonitoring}):s))},A=(e,s)=>{y((0,l._)((0,a._)({},N),{[e]:s}))},S=e=>{if(!e.isMonitoring)return"停止中";let s=new Date(e.lastUpdate),t=Math.floor((new Date().getTime()-s.getTime())/6e4);return t<1?"監視中":t<5?"最近更新":"".concat(t,"分前")},C=e=>{if(!e.isMonitoring)return"text-gray-500";let s=new Date(e.lastUpdate),t=Math.floor((new Date().getTime()-s.getTime())/6e4);return t<1?"text-green-600":t<5?"text-yellow-600":"text-red-600"};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"銘柄監視管理"}),(0,r.jsx)("p",{className:"text-gray-600",children:"監視したい銘柄を選択・管理できます"})]}),(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsxs)("button",{onClick:()=>b(!p),className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"設定"]})})]}),p&&(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"監視設定"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"監視間隔（秒）"}),(0,r.jsx)("input",{type:"number",value:N.interval,onChange:e=>A("interval",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"10",max:"300"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"価格変動閾値（%）"}),(0,r.jsx)("input",{type:"number",value:N.priceChangeThreshold,onChange:e=>A("priceChangeThreshold",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0.1",max:"50",step:"0.1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"出来高急増閾値（%）"}),(0,r.jsx)("input",{type:"number",value:N.volumeSpikeThreshold,onChange:e=>A("volumeSpikeThreshold",parseFloat(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"50",max:"1000",step:"10"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"アラートメール"}),(0,r.jsx)("input",{type:"email",value:N.alertEmail,onChange:e=>A("alertEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"alert@example.com"})]})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",checked:N.enableAlerts,onChange:e=>A("enableAlerts",e.target.checked),className:"mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"アラートを有効にする"})]})})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"銘柄を追加"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(ec.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"銘柄名、コード、セクターで検索...",value:c,onChange:e=>i(e.target.value),onFocus:()=>o(!0),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),d&&(0,r.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:x.map(e=>{let s=g.some(s=>s.code===e.code);return(0,r.jsxs)("div",{onClick:()=>f(e),className:"flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer ".concat(s?"opacity-50 cursor-not-allowed":""),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.code," • ",e.sector]})]}),s?(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"追加済み"}):(0,r.jsx)(eu.A,{className:"h-4 w-4 text-blue-600"})]},e.code)})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["監視中の銘柄 (",g.length,"件)"]})}),0===g.length?(0,r.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,r.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("p",{children:"監視中の銘柄がありません"}),(0,r.jsx)("p",{className:"text-sm",children:"上記の検索ボックスから銘柄を追加してください"})]}):(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:g.map(e=>(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.code," • ",e.sector]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium ".concat(C(e)),children:S(e)}),e.alerts.length>0&&(0,r.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,r.jsx)(T.A,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{className:"text-sm",children:e.alerts.length})]})]})]}),e.currentPrice&&(0,r.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["価格: \xa5",e.currentPrice.toLocaleString()]}),e.changePercent&&(0,r.jsxs)("span",{className:"font-medium ".concat(e.changePercent>=0?"text-green-600":"text-red-600"),children:[e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]}),e.volume&&(0,r.jsxs)("span",{className:"text-gray-600",children:["出来高: ",e.volume.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>w(e.code),className:"flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(e.isMonitoring?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.isMonitoring?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"監視中"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ej.A,{className:"h-3 w-3 mr-1"}),"停止中"]})}),(0,r.jsxs)("button",{onClick:()=>v(e.code),className:"flex items-center px-3 py-1 text-red-600 hover:bg-red-50 rounded-full",children:[(0,r.jsx)(ep.A,{className:"h-3 w-3 mr-1"}),"削除"]})]})]}),e.alerts.length>0&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-red-50 rounded-lg",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-red-800 mb-2",children:"アラート"}),(0,r.jsx)("div",{className:"space-y-1",children:e.alerts.map((e,s)=>(0,r.jsx)("div",{className:"text-sm text-red-700",children:e},s))})]})]},e.code))})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"クイックアクション"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{["7203.T","6758.T","9984.T","9432.T","6861.T"].forEach(e=>{let s=eb.find(s=>s.code===e);s&&!g.some(s=>s.code===e)&&f(s)})},className:"flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",children:[(0,r.jsx)(eu.A,{className:"h-4 w-4 mr-2"}),"主要5銘柄を追加"]}),(0,r.jsxs)("button",{onClick:()=>{j(g.map(e=>(0,l._)((0,a._)({},e),{isMonitoring:!0})))},className:"flex items-center px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"全銘柄監視開始"]}),(0,r.jsxs)("button",{onClick:()=>{j(g.map(e=>(0,l._)((0,a._)({},e),{isMonitoring:!1})))},className:"flex items-center px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200",children:[(0,r.jsx)(ej.A,{className:"h-4 w-4 mr-2"}),"全銘柄監視停止"]}),(0,r.jsxs)("button",{onClick:()=>{confirm("全ての監視銘柄を削除しますか？")&&j([])},className:"flex items-center px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200",children:[(0,r.jsx)(ep.A,{className:"h-4 w-4 mr-2"}),"全削除"]})]})]})]})}function ey(e){let{symbols:s=[],autoRefresh:t=!0,refreshInterval:a=3e4}=e,[l,c]=(0,n.useState)([]),[i,d]=(0,n.useState)(!1),[o,x]=(0,n.useState)(null),[m,h]=(0,n.useState)(null),[u,j]=(0,n.useState)({buy:0,sell:0,hold:0,strong_buy:0,strong_sell:0});(0,n.useEffect)(()=>{if(t){let e=setInterval(p,a);return()=>clearInterval(e)}},[t,a]),(0,n.useEffect)(()=>{p()},[]);let p=async()=>{try{d(!0),x(null);let e=await fetch("../../../../api/trading-signals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:s})});if(!e.ok)throw Error("シグナルデータの取得に失敗しました");let t=await e.json();c(t.top_signals||[]),j(t.summary||{}),h(new Date)}catch(e){console.error("シグナル取得エラー:",e),x("シグナルデータの取得に失敗しました")}finally{d(!1)}},b=e=>{switch(e){case"STRONG_BUY":return(0,r.jsx)(g.A,{className:"h-5 w-5 text-green-600"});case"BUY":return(0,r.jsx)(g.A,{className:"h-4 w-4 text-green-500"});case"STRONG_SELL":return(0,r.jsx)(_.A,{className:"h-5 w-5 text-red-600"});case"SELL":return(0,r.jsx)(_.A,{className:"h-4 w-4 text-red-500"});default:return(0,r.jsx)(f.A,{className:"h-4 w-4 text-gray-500"})}},N=e=>{switch(e){case"STRONG_BUY":return"text-green-700 bg-green-100 border-green-200";case"BUY":return"text-green-600 bg-green-50 border-green-100";case"STRONG_SELL":return"text-red-700 bg-red-100 border-red-200";case"SELL":return"text-red-600 bg-red-50 border-red-100";default:return"text-gray-600 bg-gray-50 border-gray-100"}},y=e=>{switch(e){case"VERY_STRONG":return"text-green-600";case"STRONG":return"text-blue-600";case"MEDIUM":return"text-yellow-600";case"WEAK":return"text-gray-600";default:return"text-gray-500"}},w=e=>{switch(e){case"LOW":return"text-green-600 bg-green-50";case"MEDIUM":return"text-yellow-600 bg-yellow-50";case"HIGH":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},A=e=>e>=.8?"text-green-600":e>=.6?"text-yellow-600":"text-red-600",S=e=>new Intl.NumberFormat("ja-JP",{style:"currency",currency:"JPY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return o?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(ea.A,{className:"h-5 w-5 text-red-600 mr-2"}),(0,r.jsx)("span",{className:"text-red-600",children:o})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(ee.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"リアルタイム売買シグナル"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[m&&(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["最終更新: ",m.toLocaleTimeString()]}),(0,r.jsxs)("button",{onClick:p,disabled:i,className:"flex items-center space-x-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[(0,r.jsx)(v.A,{className:"h-4 w-4 ".concat(i?"animate-spin":"")}),(0,r.jsx)("span",{children:"更新"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-600",children:"強気買い"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-700",children:u.strong_buy})]}),(0,r.jsx)(g.A,{className:"h-6 w-6 text-green-600"})]})}),(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-600",children:"買い"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-700",children:u.buy})]}),(0,r.jsx)(g.A,{className:"h-5 w-5 text-green-600"})]})}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"ホールド"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-700",children:u.hold})]}),(0,r.jsx)(f.A,{className:"h-5 w-5 text-gray-600"})]})}),(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-600",children:"売り"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-700",children:u.sell})]}),(0,r.jsx)(_.A,{className:"h-5 w-5 text-red-600"})]})}),(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-600",children:"強気売り"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-700",children:u.strong_sell})]}),(0,r.jsx)(_.A,{className:"h-6 w-6 text-red-600"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"上位シグナル"})}),i?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)(v.A,{className:"h-6 w-6 animate-spin text-blue-600 mr-2"}),(0,r.jsx)("span",{className:"text-gray-600",children:"シグナルを取得中..."})]}):0===l.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"シグナルがありません"}):(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:l.map((e,s)=>(0,r.jsxs)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[b(e.signal_type),(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:e.symbol})]}),(0,r.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium border ".concat(N(e.signal_type)),children:e.signal_type}),(0,r.jsx)("div",{className:"px-2 py-1 rounded text-xs ".concat(y(e.strength)),children:e.strength})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"現在価格"}),(0,r.jsx)("p",{className:"text-lg font-semibold",children:S(e.price)})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"信頼度"}),(0,r.jsxs)("p",{className:"text-lg font-semibold ".concat(A(e.confidence)),children:[(100*e.confidence).toFixed(0),"%"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"推奨ポジション"}),(0,r.jsx)("p",{className:"text-lg font-semibold",children:S(e.position_size)})]}),(0,r.jsxs)("div",{className:"px-2 py-1 rounded text-xs ".concat(w(e.risk_level)),children:[(0,r.jsx)(C.A,{className:"h-3 w-3 inline mr-1"}),e.risk_level]})]})]}),(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,r.jsx)(k.A,{className:"h-4 w-4 inline mr-1"}),e.reason]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["更新時刻: ",new Date(e.timestamp).toLocaleString()]})]})]},"".concat(e.symbol,"-").concat(s)))})]})]})}var ef=t(90426),ev=t(1466),ew=t(14807),eA=t(35996),ek=t(20994);let eS={network:{type:"network",message:"通信に失敗しました",description:"インターネット接続を確認してください。数分後に再試行してください。",action:"再試行",icon:(0,r.jsx)(eA.A,{className:"w-8 h-8"}),retryable:!0},server:{type:"server",message:"サーバーエラーが発生しました",description:"サーバーが一時的に利用できません。しばらく待ってから再試行してください。",action:"再試行",icon:(0,r.jsx)(ek.A,{className:"w-8 h-8"}),retryable:!0},data:{type:"data",message:"データの読み込みに失敗しました",description:"データファイルが見つからないか、破損している可能性があります。",action:"データを再生成",icon:(0,r.jsx)(T.A,{className:"w-8 h-8"}),retryable:!0},timeout:{type:"timeout",message:"処理がタイムアウトしました",description:"処理に時間がかかりすぎています。しばらく待ってから再試行してください。",action:"再試行",icon:(0,r.jsx)(el.A,{className:"w-8 h-8"}),retryable:!0},unknown:{type:"unknown",message:"予期しないエラーが発生しました",description:"システムに問題が発生しました。しばらく待ってから再試行してください。",action:"再試行",icon:(0,r.jsx)(T.A,{className:"w-8 h-8"}),retryable:!0}};function eC(e){let{error:s,onRetry:t,onGoHome:a,onGetHelp:l,showDetails:c=!1}=e,[i,d]=(0,n.useState)(!1),[x,m]=(0,n.useState)(0),h=eS[(e=>{let s=e.message.toLowerCase();return s.includes("network")||s.includes("fetch")||s.includes("connection")?"network":s.includes("server")||s.includes("500")||s.includes("502")||s.includes("503")?"server":s.includes("data")||s.includes("json")||s.includes("parse")?"data":s.includes("timeout")||s.includes("time")?"timeout":"unknown"})(s)],g=async()=>{d(!0),m(e=>e+1);try{await t()}finally{d(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"text-red-500 mb-4 flex justify-center",children:h.icon}),(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:h.message}),(0,r.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:h.description})]}),i&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin text-blue-600 mr-2"}),(0,r.jsx)("span",{className:"text-blue-700 text-sm",children:0===x?"":1===x?"1回目の再試行中...":2===x?"2回目の再試行中...":"".concat(x,"回目の再試行中...")})]})}),c&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:(0,r.jsxs)("details",{className:"text-xs",children:[(0,r.jsx)("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-800",children:"技術的詳細を表示"}),(0,r.jsxs)("div",{className:"mt-2 text-gray-500 font-mono",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"エラータイプ:"})," ",h.type]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"メッセージ:"})," ",s.message]}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"スタック:"})}),(0,r.jsx)("pre",{className:"text-xs overflow-x-auto",children:s.stack})]})]})}),(0,r.jsxs)("div",{className:"space-y-3",children:[h.retryable&&(0,r.jsx)("button",{onClick:g,disabled:i,className:"w-full flex items-center justify-center px-4 py-3 rounded-lg font-medium transition-colors ".concat(i?"bg-gray-400 cursor-not-allowed text-white":"bg-blue-600 hover:bg-blue-700 text-white"),children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"w-4 h-4 animate-spin mr-2"}),"再試行中..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"w-4 h-4 mr-2"}),h.action]})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("button",{onClick:a,className:"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"ホームに戻る"]}),l&&(0,r.jsxs)("button",{onClick:l,className:"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(ef.A,{className:"w-4 h-4 mr-2"}),"ヘルプ"]})]})]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"問題が続く場合は、しばらく時間をおいてから再度お試しください。"})})]})})}function eT(e){let{content:s,children:t,position:a="top",delay:l=300,className:c="",maxWidth:i="300px"}=e,[d,o]=(0,n.useState)(!1),[x,m]=(0,n.useState)({top:0,left:0}),h=(0,n.useRef)(null),g=(0,n.useRef)(null),u=(0,n.useRef)(),j=()=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{o(!0),b()},l)},p=()=>{u.current&&clearTimeout(u.current),o(!1)},b=()=>{if(!h.current||!g.current)return;let e=h.current.getBoundingClientRect(),s=g.current.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop,l=window.pageXOffset||document.documentElement.scrollLeft,r=0,n=0;switch(a){case"top":r=e.top+t-s.height-8,n=e.left+l+(e.width-s.width)/2;break;case"bottom":r=e.bottom+t+8,n=e.left+l+(e.width-s.width)/2;break;case"left":r=e.top+t+(e.height-s.height)/2,n=e.left+l-s.width-8;break;case"right":r=e.top+t+(e.height-s.height)/2,n=e.right+l+8}let c=window.innerWidth,i=window.innerHeight;n<8&&(n=8),n+s.width>c-8&&(n=c-s.width-8),r<8&&(r=8),r+s.height>i+t-8&&(r=i+t-s.height-8),m({top:r,left:n})};return(0,n.useEffect)(()=>{if(d){b();let e=()=>b(),s=()=>b();return window.addEventListener("resize",e),window.addEventListener("scroll",s),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",s)}}},[d,a]),(0,n.useEffect)(()=>()=>{u.current&&clearTimeout(u.current)},[]),(0,r.jsxs)("div",{ref:h,onMouseEnter:j,onMouseLeave:p,onFocus:j,onBlur:p,className:"inline-block ".concat(c),children:[t,d&&(0,r.jsx)("div",{ref:g,className:"fixed z-50 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg pointer-events-none transition-opacity duration-200 ".concat("top"===a?"mb-2":""),style:{top:"".concat(x.top,"px"),left:"".concat(x.left,"px"),maxWidth:i},children:(0,r.jsxs)("div",{className:"relative",children:[s,(0,r.jsx)("div",{className:"absolute w-2 h-2 bg-gray-900 transform rotate-45 ".concat("top"===a?"top-full left-1/2 -translate-x-1/2 -mt-1":"bottom"===a?"bottom-full left-1/2 -translate-x-1/2 -mb-1":"left"===a?"left-full top-1/2 -translate-y-1/2 -ml-1":"right-full top-1/2 -translate-y-1/2 -mr-1")})]})})]})}function e_(e){let{content:s,children:t,disabled:a=!1,className:l=""}=e;return a?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)(eT,{content:s,position:"top",delay:300,children:(0,r.jsx)("div",{className:l,children:t})})}var eE=t(99053);let eD=[{id:"overview",title:"ダッシュボードの概要",description:"株価予測システムの主要機能と指標を確認できます。",icon:(0,r.jsx)(j.A,{className:"w-6 h-6"}),action:"概要タブをクリック",target:"overview"},{id:"analysis",title:"分析の実行",description:"ワンクリックで株価分析を実行し、予測結果を取得できます。",icon:(0,r.jsx)(w.A,{className:"w-6 h-6"}),action:"分析実行ボタンをクリック",target:"analysis"},{id:"predictions",title:"予測結果の確認",description:"実際の株価と予測値の比較、精度の評価を行います。",icon:(0,r.jsx)(g.A,{className:"w-6 h-6"}),action:"予測結果タブをクリック",target:"predictions"},{id:"models",title:"モデル比較",description:"複数の機械学習モデルの性能を比較し、最適なモデルを選択できます。",icon:(0,r.jsx)(k.A,{className:"w-6 h-6"}),action:"モデル比較タブをクリック",target:"models"},{id:"settings",title:"設定の調整",description:"分析期間、モデル選択、表示オプションなどをカスタマイズできます。",icon:(0,r.jsx)(m.A,{className:"w-6 h-6"}),action:"設定ボタンをクリック",target:"settings"}];function eM(e){let{isVisible:s,onClose:t,onStepComplete:a,currentTab:l="overview"}=e,[c,i]=(0,n.useState)(0),[d,o]=(0,n.useState)([]),[x,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=localStorage.getItem("userGuideCompleted");if(e)try{o(JSON.parse(e))}catch(e){console.error("ガイド進捗の読み込みエラー:",e)}},[]);let g=e=>{o(e),localStorage.setItem("userGuideCompleted",JSON.stringify(e))},u=e=>{d.includes(e)||(g([...d,e]),null==a||a(e))},j=()=>{c<eD.length-1?i(c+1):(u("all"),t())};return s?x?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-6 h-6 text-blue-600"}),"クイックスタートガイド"]}),(0,r.jsx)("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(p.A,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDE80 5分で始める株価予測"}),(0,r.jsx)("p",{className:"text-blue-700 text-sm",children:"以下の手順に従って、システムの基本操作を学習できます。"})]}),(0,r.jsx)("div",{className:"space-y-4",children:eD.map((e,s)=>(0,r.jsx)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat(d.includes(e.id)?"border-green-200 bg-green-50":"border-gray-200 bg-white"),children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(d.includes(e.id)?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"),children:d.includes(e.id)?(0,r.jsx)(A.A,{className:"w-5 h-5"}):e.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 mb-1",children:[s+1,". ",e.title]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),e.action&&(0,r.jsxs)("p",{className:"text-blue-600 text-sm font-medium",children:["\uD83D\uDCA1 ",e.action]})]}),!d.includes(e.id)&&(0,r.jsx)("button",{onClick:()=>u(e.id),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"完了"})]})},e.id))}),(0,r.jsxs)("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"閉じる"}),(0,r.jsx)("button",{onClick:()=>{g(eD.map(e=>e.id)),m(!1)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"すべて完了としてマーク"})]})]})]})})}):(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"w-6 h-6 text-blue-600"}),"ユーザーガイド"]}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(p.A,{className:"w-6 h-6"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat((c+1)/eD.length*100,"%")}})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["ステップ ",c+1," / ",eD.length]}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:eD[c].title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:eD[c].description})]}),eD[c].action&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,r.jsx)(eE.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-medium",children:eD[c].action})]})}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{c>0&&i(c-1)},disabled:0===c,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"前へ"}),(0,r.jsx)("button",{onClick:()=>{u(eD[c].id),j()},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"スキップ"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{m(!0),i(0)},className:"px-4 py-2 text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:"クイックスタート"}),(0,r.jsx)("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:c===eD.length-1?"完了":"次へ"})]})]})]})]})})}):null}let eI=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function eL(){var e;let[s,t]=(0,n.useState)("overview"),[d,o]=(0,n.useState)([]),[x,h]=(0,n.useState)([]),[u,b]=(0,n.useState)([]),[N,f]=(0,n.useState)([]),[H,Y]=(0,n.useState)(null),[G,$]=(0,n.useState)(!0),[X,Q]=(0,n.useState)(!1),[V,q]=(0,n.useState)(!1),[ee,es]=(0,n.useState)(!1),[et,ea]=(0,n.useState)(0),[el,ec]=(0,n.useState)(""),[ei,ed]=(0,n.useState)([]),[em,eh]=(0,n.useState)(!1),[eu,ej]=(0,n.useState)(!1),[ep,eb]=(0,n.useState)([]),[eA,ek]=(0,n.useState)(null),[eS,eT]=(0,n.useState)(!1),[eE,eD]=(0,n.useState)(!1),[eL,eF]=(0,n.useState)(!1),[eO,eK]=(0,n.useState)(!1),[eR,eW]=(0,n.useState)(null),[ez,eJ]=(0,n.useState)(!1),[eP,eU]=(0,n.useState)(!1);(0,n.useEffect)(()=>{eB(),localStorage.getItem("hasVisited")||(eU(!0),eJ(!0),localStorage.setItem("hasVisited","true"))},[]),(0,n.useEffect)(()=>{let e=()=>{let e=window.innerWidth<768;eD(e),eK(e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let eB=async()=>{try{$(!0);let e=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;for(let t=0;t<s;t++)try{let s=await fetch(e,{cache:"no-cache",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(s.ok)return s;throw Error("HTTP ".concat(s.status))}catch(a){if(console.warn("Fetch attempt ".concat(t+1," failed for ").concat(e,":"),a),t===s-1)throw a;await new Promise(e=>setTimeout(e,1e3*(t+1)))}throw Error("All retry attempts failed")},[s,t,r,n,c]=await Promise.all([e("./data/dashboard_summary.json"),e("./data/stock_data.json"),e("./data/model_comparison.json"),e("./data/feature_analysis.json"),e("./data/prediction_results.json")]),i=await s.json(),d=await t.json(),x=await r.json(),m=await n.json(),g=await c.json();Y(i);let u=d.slice(0,100).map(e=>(0,l._)((0,a._)({},e),{date:eG(e.date)}));o(u);let j=x.map(e=>({name:e.model_name,type:e.model_type,mae:e.mae,mse:e.rmse*e.rmse,rmse:e.rmse,r2:e.r2,rank:e.rank}));h(j);let p=m;p&&0!==p.length||(p=[{feature:"価格変動率",importance:.35,percentage:35},{feature:"ボリューム",importance:.25,percentage:25},{feature:"RSI",importance:.15,percentage:15},{feature:"移動平均",importance:.12,percentage:12},{feature:"ボリンジャーバンド",importance:.08,percentage:8},{feature:"MACD",importance:.05,percentage:5}]),b(p),f(g)}catch(s){console.error("データの読み込みに失敗:",s);let e="データの読み込みに失敗しました";s instanceof Error&&(e=s.message.includes("Failed to fetch")?"ネットワーク接続に問題があります。インターネット接続を確認してください。":s.message.includes("404")?"データファイルが見つかりません。管理者にお問い合わせください。":s.message.includes("RSC payload")?"サーバーとの通信に問題があります。しばらく待ってから再試行してください。":"エラー: ".concat(s.message)),eW(Error(e)),s instanceof Error&&(s.message.includes("RSC payload")||s.message.includes("Connection closed")||s.message.includes("Failed to fetch"))&&(console.log("RSC payload error detected, retrying in 3 seconds..."),setTimeout(()=>{eB()},3e3))}finally{$(!1)}},eH=async e=>{try{es(!0),ea(0),ec("分析を開始しています...");let e=setInterval(()=>{ea(s=>s>=90?(clearInterval(e),s):s+10*Math.random())},500);ec("分析が完了しました。データを更新しています..."),ea(100),await eB(),setTimeout(()=>{Q(!1),es(!1),ea(0),ec("")},1e3)}catch(e){console.error("分析実行エラー:",e),ec("分析の実行に失敗しました"),es(!1)}},eY=async e=>{if(0===e.length){alert("銘柄を選択してください");return}ed(e),eh(!1);try{es(!0),ea(0),ec("選択された銘柄の分析を開始しています...");let s=await fetch("../../../../api/analyze-symbols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:e})}),t=await s.json();if(t.success)ec("分析が完了しました。データを更新しています..."),ea(100),await eB(),setTimeout(()=>{es(!1),ea(0),ec("")},1e3);else throw Error(t.error||"分析に失敗しました")}catch(e){console.error("銘柄分析エラー:",e),ec("分析の実行に失敗しました"),es(!1)}};if(eR)return(0,r.jsx)(eC,{error:eR,onRetry:()=>{eW(null),eB()},onGoHome:()=>{eW(null),window.location.href="../../../../"},onGetHelp:()=>eJ(!0),showDetails:!1});if(G)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"データを読み込み中..."})]})});let eG=e=>{try{if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;if(/^\d{8}$/.test(e))return e.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3");let s=new Date(e);if(isNaN(s.getTime()))return console.error("Invalid date format:",e),"2024-01-01";return s.toISOString().split("T")[0]}catch(s){return console.error("Date normalization error:",s,"Input:",e),"2024-01-01"}},e$=d.map(e=>({date:eG(e.date),実際価格:e.close,SMA_5:e.sma_5,SMA_10:e.sma_10,SMA_25:e.sma_25,SMA_50:e.sma_50,出来高:e.volume/1e6})),eX=N.slice(0,50).map(e=>({index:e.index,実際値:e.actual,予測値:e.predicted}));return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(y,{activeTab:s,onTabChange:t,onAnalysisClick:()=>Q(!0),onSettingsClick:()=>q(!0),onMonitoringClick:()=>ej(!0)}),(0,r.jsx)("div",{className:"hidden lg:block",children:(0,r.jsx)(i.A,{activeTab:s,onTabChange:t,onAnalysisClick:()=>Q(!0),onSettingsClick:()=>q(!0),onMonitoringClick:()=>ej(!0)})}),(0,r.jsx)("header",{className:"hidden lg:block bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"J-Quants 株価予測ダッシュボード"}),(0,r.jsx)("p",{className:"text-gray-600",children:"機械学習による株価予測システム"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(A.A,{className:"h-5 w-5 text-green-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"システム: 正常稼働中"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["最終更新: ",H?H.last_updated:"-"]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(e_,{content:"特定の銘柄を選択して詳細分析を実行します",children:(0,r.jsxs)("button",{onClick:()=>eh(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"銘柄選択・分析"]})}),(0,r.jsx)(e_,{content:"全銘柄の包括的な分析を実行します（3-5分程度かかります）",children:(0,r.jsxs)("button",{onClick:()=>Q(!0),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"全体分析"]})}),(0,r.jsx)(e_,{content:"分析設定、モデル選択、表示オプションを調整できます",children:(0,r.jsxs)("button",{onClick:()=>q(!0),className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"設定"]})}),(0,r.jsx)(e_,{content:"最新のデータを取得してダッシュボードを更新します",children:(0,r.jsxs)("button",{onClick:eB,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"更新"]})}),(0,r.jsx)(e_,{content:"初回利用者向けの操作ガイドを表示します",children:(0,r.jsxs)("button",{onClick:()=>eJ(!0),className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[(0,r.jsx)(ef.A,{className:"h-4 w-4 mr-2"}),"ガイド"]})})]})]})]})})}),(0,r.jsx)("nav",{className:"hidden lg:block bg-white border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"flex space-x-8",children:[{id:"overview",label:"概要",icon:j.A},{id:"predictions",label:"予測結果",icon:g.A},{id:"models",label:"モデル比較",icon:k.A},{id:"analysis",label:"分析",icon:S.A},{id:"signals",label:"シグナル",icon:g.A},{id:"risk",label:"リスク管理",icon:C.A},{id:"personal",label:"個人投資",icon:ev.A}].map(e=>{let a=e.icon;return(0,r.jsxs)("button",{onClick:()=>t(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ".concat(s===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)(a,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.label})]},e.id)})})})}),eO?(0,r.jsx)(er,{onAnalysisComplete:e=>{console.log("分析完了:",e),eB()},onAnalysisStart:()=>{console.log("分析開始")}}):(0,r.jsx)(en,{onRefresh:eB,children:(0,r.jsx)(Z,{stockData:d,modelComparison:x,featureAnalysis:u,predictions:N,summary:H,onRefresh:eB,onAnalysis:()=>Q(!0),onSettings:()=>q(!0)})}),(0,r.jsxs)("main",{className:"hidden lg:block max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(eg,{onAnalysisComplete:e=>{console.log("分析完了:",e),eB()},onAnalysisStart:()=>{console.log("分析開始")}}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(g.A,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"最優秀モデル"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==H?void 0:null===(e=H.best_model)||void 0===e?void 0:e.toUpperCase())||"-"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(k.A,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"予測精度 (R\xb2)"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==H?void 0:H.r2)||"-"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(j.A,{className:"h-6 w-6 text-yellow-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"MAE"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==H?void 0:H.mae)||"-"})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(S.A,{className:"h-6 w-6 text-purple-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"データ数"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:(null==H?void 0:H.total_data_points)||"-"})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"株価推移と移動平均"}),(0,r.jsx)(B.u,{width:"100%",height:400,children:(0,r.jsxs)(E.b,{data:e$,children:[(0,r.jsx)(D.d,{strokeDasharray:"3 3"}),(0,r.jsx)(M.W,{dataKey:"date"}),(0,r.jsx)(I.h,{}),(0,r.jsx)(L.m,{}),(0,r.jsx)(F.s,{}),(0,r.jsx)(O.N,{type:"monotone",dataKey:"実際価格",stroke:"#2563eb",strokeWidth:2}),(0,r.jsx)(O.N,{type:"monotone",dataKey:"SMA_5",stroke:"#dc2626",strokeWidth:1}),(0,r.jsx)(O.N,{type:"monotone",dataKey:"SMA_10",stroke:"#059669",strokeWidth:1}),(0,r.jsx)(O.N,{type:"monotone",dataKey:"SMA_25",stroke:"#d97706",strokeWidth:1}),(0,r.jsx)(O.N,{type:"monotone",dataKey:"SMA_50",stroke:"#7c3aed",strokeWidth:1})]})})]})]}),"predictions"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"予測 vs 実際値"}),(0,r.jsx)(B.u,{width:"100%",height:400,children:(0,r.jsxs)(E.b,{data:eX,children:[(0,r.jsx)(D.d,{strokeDasharray:"3 3"}),(0,r.jsx)(M.W,{dataKey:"index"}),(0,r.jsx)(I.h,{}),(0,r.jsx)(L.m,{}),(0,r.jsx)(F.s,{}),(0,r.jsx)(O.N,{type:"monotone",dataKey:"実際値",stroke:"#2563eb",strokeWidth:2}),(0,r.jsx)(O.N,{type:"monotone",dataKey:"予測値",stroke:"#dc2626",strokeWidth:2})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"予測誤差分布"}),(0,r.jsx)(B.u,{width:"100%",height:300,children:(0,r.jsxs)(K.E,{data:N.slice(0,20).map(e=>({index:e.index,誤差:e.error.toFixed(2)})),children:[(0,r.jsx)(D.d,{strokeDasharray:"3 3"}),(0,r.jsx)(M.W,{dataKey:"index"}),(0,r.jsx)(I.h,{}),(0,r.jsx)(L.m,{}),(0,r.jsx)(R.y,{dataKey:"誤差",fill:"#8884d8"})]})})]})]}),"models"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"モデル性能比較"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"順位"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"モデル名"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MAE"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"RMSE"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xb2"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((e,s)=>(0,r.jsxs)("tr",{className:0===s?"bg-green-50":"",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[s+1,0===s&&(0,r.jsx)("span",{className:"ml-2 text-green-600",children:"\uD83C\uDFC6"})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.mae.toFixed(4)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.rmse.toFixed(4)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.r2.toFixed(4)})]},e.name))})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"MAE比較"}),x.length>0?(0,r.jsx)(B.u,{width:"100%",height:300,children:(0,r.jsxs)(K.E,{data:x,children:[(0,r.jsx)(D.d,{strokeDasharray:"3 3"}),(0,r.jsx)(M.W,{dataKey:"name"}),(0,r.jsx)(I.h,{}),(0,r.jsx)(L.m,{}),(0,r.jsx)(R.y,{dataKey:"mae",fill:"#8884d8"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(j.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"モデル比較データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})})]})]}),"analysis"===s&&(0,r.jsxs)("div",{className:"space-y-6",children:[ei.length>0&&(0,r.jsx)(ex,{selectedSymbols:ei}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"特徴量重要度"}),u.length>0?(0,r.jsx)(B.u,{width:"100%",height:300,children:(0,r.jsxs)(K.E,{data:u,layout:"horizontal",children:[(0,r.jsx)(D.d,{strokeDasharray:"3 3"}),(0,r.jsx)(M.W,{type:"number"}),(0,r.jsx)(I.h,{dataKey:"feature",type:"category",width:100}),(0,r.jsx)(L.m,{}),(0,r.jsx)(R.y,{dataKey:"percentage",fill:"#82ca9d"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"特徴量分析データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"特徴量重要度分布"}),u.length>0?(0,r.jsx)(B.u,{width:"100%",height:300,children:(0,r.jsxs)(W.r,{children:[(0,r.jsx)(z.F,{data:u.map(e=>(0,l._)((0,a._)({},e),{name:e.feature})),cx:"50%",cy:"50%",labelLine:!1,label:!1,outerRadius:80,fill:"#8884d8",dataKey:"percentage",children:u.map((e,s)=>(0,r.jsx)(J.f,{fill:eI[s%eI.length]},"cell-".concat(s)))}),(0,r.jsx)(L.m,{})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"特徴量分析データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"実際値 vs 予測値散布図"}),N.length>0?(0,r.jsx)(B.u,{width:"100%",height:400,children:(0,r.jsxs)(P.t,{data:N.slice(0,50),children:[(0,r.jsx)(D.d,{}),(0,r.jsx)(M.W,{dataKey:"actual",name:"実際値"}),(0,r.jsx)(I.h,{dataKey:"predicted",name:"予測値"}),(0,r.jsx)(L.m,{cursor:{strokeDasharray:"3 3"}}),(0,r.jsx)(U.X,{name:"予測ポイント",data:N.slice(0,50),fill:"#8884d8"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(g.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"予測データがありません"}),(0,r.jsx)("p",{className:"text-sm",children:"分析を実行してデータを生成してください"})]})})]})]}),"signals"===s&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(ey,{symbols:ei,autoRefresh:!0,refreshInterval:3e4})}),"personal"===s&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCB0 個人投資ダッシュボード"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"投資判断に直結する情報の優先表示、損益状況の一目瞭然な表示"})]}),(0,r.jsxs)(c.default,{href:"./personal-investment",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(ev.A,{className:"h-4 w-4 mr-2"}),"詳細ダッシュボード"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"総投資額"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"\xa51,000,000"})]}),(0,r.jsx)(ew.A,{className:"h-8 w-8 text-green-500"})]}),(0,r.jsx)("p",{className:"text-sm text-green-600 mt-2",children:"現在価値: \xa51,050,000"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"未実現損益"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"+\xa550,000"})]}),(0,r.jsx)(g.A,{className:"h-8 w-8 text-blue-500"})]}),(0,r.jsx)("p",{className:"text-sm text-blue-600 mt-2",children:"+5.0%"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-purple-800",children:"推奨アクション"}),(0,r.jsx)("p",{className:"text-lg font-bold text-purple-600",children:"BUY"})]}),(0,r.jsx)(k.A,{className:"h-8 w-8 text-purple-500"})]}),(0,r.jsx)("p",{className:"text-sm text-purple-600 mt-2",children:"信頼度: 85%"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-orange-100 border border-orange-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-orange-800",children:"リスクレベル"}),(0,r.jsx)("p",{className:"text-lg font-bold text-orange-600",children:"MEDIUM"})]}),(0,r.jsx)(C.A,{className:"h-8 w-8 text-orange-500"})]}),(0,r.jsx)("p",{className:"text-sm text-orange-600 mt-2",children:"リスク調整後リターン: 0.75"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"主要ポジション"}),(0,r.jsx)("div",{className:"grid gap-4",children:[{symbol:"7203.T",name:"トヨタ自動車",price:2500,change:2.5,action:"BUY",confidence:85},{symbol:"6758.T",name:"ソニーグループ",price:12e3,change:-1.2,action:"HOLD",confidence:70},{symbol:"6861.T",name:"キーエンス",price:5e3,change:3.8,action:"STRONG_BUY",confidence:90}].map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:e.symbol}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.name})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-semibold",children:["\xa5",e.price.toLocaleString()]}),(0,r.jsxs)("p",{className:"text-sm ".concat(e.change>=0?"text-green-600":"text-red-600"),children:[e.change>=0?"+":"",e.change,"%"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("STRONG_BUY"===e.action?"bg-green-100 text-green-800":"BUY"===e.action?"bg-blue-100 text-blue-800":"HOLD"===e.action?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:e.action}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e.confidence,"%"]})]})]},e.symbol))})]})]})}),"risk"===s&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDEE1️ リスク管理ダッシュボード"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"現在のポジション状況、損切りライン、リスクレベルを可視化"})]}),(0,r.jsxs)(c.default,{href:"./risk",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"詳細ダッシュボード"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border border-red-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"リスクレベル"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:"HIGH"})]}),(0,r.jsx)(C.A,{className:"h-8 w-8 text-red-500"})]}),(0,r.jsx)("p",{className:"text-sm text-red-600 mt-2",children:"リスクスコア: 0.75"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"ポートフォリオ価値"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"\xa51,250,000"})]}),(0,r.jsx)(g.A,{className:"h-8 w-8 text-blue-500"})]}),(0,r.jsx)("p",{className:"text-sm text-blue-600 mt-2",children:"未実現損益: +\xa550,000"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 border border-yellow-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-yellow-800",children:"最大ドローダウン"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:"8.5%"})]}),(0,r.jsx)(_.A,{className:"h-8 w-8 text-yellow-500"})]}),(0,r.jsx)("p",{className:"text-sm text-yellow-600 mt-2",children:"VaR (95%): \xa5125,000"})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"現在のポジション"})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:[{symbol:"7203.T",name:"トヨタ自動車",pnl:-1e4,pnlPercent:-4,risk:"HIGH"},{symbol:"6758.T",name:"ソニーグループ",pnl:25e3,pnlPercent:4.2,risk:"MEDIUM"},{symbol:"9984.T",name:"ソフトバンクグループ",pnl:-37500,pnlPercent:-6.25,risk:"HIGH"}].map(e=>(0,r.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:e.symbol}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.name})]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("HIGH"===e.risk?"bg-red-100 text-red-800":"MEDIUM"===e.risk?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.risk})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"font-semibold ".concat(e.pnl>=0?"text-green-600":"text-red-600"),children:[e.pnl>=0?"+":"","\xa5",e.pnl.toLocaleString()]}),(0,r.jsxs)("div",{className:"text-sm ".concat(e.pnl>=0?"text-green-600":"text-red-600"),children:[e.pnl>=0?"+":"",e.pnlPercent,"%"]})]})]},e.symbol))})]}),(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(T.A,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-800",children:"リスク管理推奨事項"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"• ポートフォリオリスクが高すぎます。ポジションサイズを縮小してください。"}),(0,r.jsx)("li",{children:"• 9984.T（ソフトバンクグループ）の損切りを検討してください。"}),(0,r.jsx)("li",{children:"• 損切りラインを現在の80%に設定することを推奨します。"})]})]})]})})]})})]}),em&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"銘柄選択・分析"}),(0,r.jsx)("button",{onClick:()=>eh(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsx)(eo,{selectedSymbols:ei,onSymbolsChange:ed,onAnalysis:eY,isAnalyzing:ee})]})}),X&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"全体分析実行"}),(0,r.jsx)("button",{onClick:()=>Q(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),ee?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:el})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(et,"%")}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:[Math.round(et),"% 完了"]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"全銘柄の分析を実行しますか？この処理には数分かかる場合があります。"}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>Q(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,r.jsx)("button",{onClick:()=>eH(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"実行"})]})]})]})}),V&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"設定"}),(0,r.jsx)("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"予測期間（日数）"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"7",children:"7日"}),(0,r.jsx)("option",{value:"14",children:"14日"}),(0,r.jsx)("option",{value:"30",selected:!0,children:"30日"}),(0,r.jsx)("option",{value:"60",children:"60日"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"使用するモデル"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"すべてのモデル"}),(0,r.jsx)("option",{value:"linear",children:"線形回帰"}),(0,r.jsx)("option",{value:"random_forest",children:"ランダムフォレスト"}),(0,r.jsx)("option",{value:"xgboost",children:"XGBoost"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"特徴量選択"}),(0,r.jsx)("div",{className:"space-y-2",children:["SMA_5","SMA_10","SMA_25","SMA_50","RSI","MACD","ボリンジャーバンド"].map(e=>(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{onClick:()=>q(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,r.jsx)("button",{onClick:()=>{q(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"保存"})]})]})]})}),eu&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"銘柄監視管理"}),(0,r.jsx)("button",{onClick:()=>ej(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,r.jsx)(eN,{onMonitoringChange:e=>{eb(e)},onConfigChange:e=>{ek(e)}})]})})}),(0,r.jsx)(eM,{isVisible:ez,onClose:()=>eJ(!1),onStepComplete:e=>{console.log("ガイドステップ完了:",e)},currentTab:s})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[76,96,358],()=>s(66307)),_N_E=e.O()}]);