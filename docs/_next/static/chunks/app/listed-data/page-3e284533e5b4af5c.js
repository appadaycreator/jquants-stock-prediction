(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{3007:function(e,t,s){Promise.resolve().then(s.bind(s,8470))},8470:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(5583),r=s(1780),o=s(7437),n=s(2265);class i{async execute(e){return new Promise((t,s)=>{this.requestQueue.push(async()=>{try{let s=await e();t(s)}catch(e){s(e)}}),this.processQueue()})}async processQueue(){if(!this.isProcessing&&0!==this.requestQueue.length){for(this.isProcessing=!0;this.requestQueue.length>0;){let e=Date.now()-this.lastRequestTime;e<this.delayMs&&await new Promise(t=>setTimeout(t,this.delayMs-e));let t=this.requestQueue.shift();t&&(await t(),this.lastRequestTime=Date.now())}this.isProcessing=!1}}constructor(e){this.delayMs=e,this.lastRequestTime=0,this.requestQueue=[],this.isProcessing=!1}}class l{static validateStockData(e){let t=[],s=[];return e.forEach((e,a)=>{let r=[];e.date&&e.code||r.push("Record ".concat(a,": Missing required fields (date, code)")),e.date&&!this.VALIDATION_RULES.date.format.test(e.date)&&r.push("Record ".concat(a,": Invalid date format: ").concat(e.date)),e.code&&!this.VALIDATION_RULES.code.format.test(e.code)&&r.push("Record ".concat(a,": Invalid code format: ").concat(e.code)),["open","high","low","close"].forEach(t=>{let s=parseFloat(e[t]);(isNaN(s)||s<this.VALIDATION_RULES.price.min||s>this.VALIDATION_RULES.price.max)&&r.push("Record ".concat(a,": Invalid ").concat(t," value: ").concat(e[t]))});let o=parseInt(e.volume);(isNaN(o)||o<this.VALIDATION_RULES.volume.min||o>this.VALIDATION_RULES.volume.max)&&r.push("Record ".concat(a,": Invalid volume value: ").concat(e.volume));let n=parseFloat(e.high),i=parseFloat(e.low),l=parseFloat(e.open),c=parseFloat(e.close);isNaN(n)||isNaN(i)||!(n<i)||r.push("Record ".concat(a,": High price (").concat(n,") is less than low price (").concat(i,")")),isNaN(n)||isNaN(l)||!(n<l)||r.push("Record ".concat(a,": High price (").concat(n,") is less than open price (").concat(l,")")),isNaN(n)||isNaN(c)||!(n<c)||r.push("Record ".concat(a,": High price (").concat(n,") is less than close price (").concat(c,")")),isNaN(i)||isNaN(l)||!(i>l)||r.push("Record ".concat(a,": Low price (").concat(i,") is greater than open price (").concat(l,")")),isNaN(i)||isNaN(c)||!(i>c)||r.push("Record ".concat(a,": Low price (").concat(i,") is greater than close price (").concat(c,")")),0===r.length?t.push({date:e.date,code:e.code,open:parseFloat(e.open)||0,high:parseFloat(e.high)||0,low:parseFloat(e.low)||0,close:parseFloat(e.close)||0,volume:parseInt(e.volume)||0}):s.push(...r)}),{validData:t,errors:s}}static calculateQualityScore(e,t){return 0===t?0:Math.round(e/t*100)}}l.VALIDATION_RULES={price:{min:0,max:1e6,required:!0},volume:{min:0,max:1e9,required:!0},date:{format:/^\d{4}-\d{2}-\d{2}$/,required:!0},code:{format:/^\d{4}$/,required:!0}};class c{recordRequest(e,t,s){if(this.metrics.totalRequests++,this.metrics.lastRequestTime=new Date().toISOString(),e)this.metrics.successfulRequests++,this.metrics.consecutiveFailures=0;else switch(this.metrics.failedRequests++,this.metrics.consecutiveFailures++,s){case"timeout":this.metrics.timeoutErrors++;break;case"rate_limit":this.metrics.rateLimitErrors++;break;case"validation":this.metrics.validationErrors++}let a=this.metrics.averageResponseTime*(this.metrics.totalRequests-1)+t;this.metrics.averageResponseTime=a/this.metrics.totalRequests}recordDataQuality(e,t){this.qualityReports.set(e,t)}getMetrics(){return(0,a._)({},this.metrics)}getQualityReport(e){return this.qualityReports.get(e)}getAllQualityReports(){return Array.from(this.qualityReports.values())}getHealthStatus(){let e=[],t=this.metrics.totalRequests>0?this.metrics.successfulRequests/this.metrics.totalRequests*100:100;t<95&&e.push("低い成功率: ".concat(t.toFixed(1),"%")),this.metrics.consecutiveFailures>5&&e.push("連続失敗: ".concat(this.metrics.consecutiveFailures,"回")),this.metrics.timeoutErrors>.1*this.metrics.totalRequests&&e.push("タイムアウトエラーが多い: ".concat(this.metrics.timeoutErrors,"回")),this.metrics.rateLimitErrors>0&&e.push("レート制限エラー: ".concat(this.metrics.rateLimitErrors,"回")),this.metrics.validationErrors>.05*this.metrics.totalRequests&&e.push("データ検証エラーが多い: ".concat(this.metrics.validationErrors,"回"));let s="healthy";return e.length>2||t<80?s="unhealthy":(e.length>0||t<95)&&(s="degraded"),{status:s,issues:e}}constructor(){this.qualityReports=new Map,this.metrics={totalRequests:0,successfulRequests:0,failedRequests:0,timeoutErrors:0,rateLimitErrors:0,validationErrors:0,averageResponseTime:0,lastRequestTime:"",consecutiveFailures:0,tokenRefreshCount:0,lastTokenRefresh:"",tokenExpiryTime:""}}}class d{async initDB(){return new Promise((e,t)=>{let s=indexedDB.open(this.DB_NAME,this.DB_VERSION);s.onerror=()=>{console.error("IndexedDB初期化エラー:",s.error),t(s.error)},s.onsuccess=()=>{this.db=s.result,console.info("強化版IndexedDB初期化完了"),e()},s.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains(this.STORE_NAME)){let e=t.createObjectStore(this.STORE_NAME,{keyPath:["symbol","date"]});e.createIndex("symbol","symbol",{unique:!1}),e.createIndex("date","date",{unique:!1}),e.createIndex("quality_score","qualityScore",{unique:!1})}if(!t.objectStoreNames.contains(this.METADATA_STORE)){let e=t.createObjectStore(this.METADATA_STORE,{keyPath:"symbol"});e.createIndex("last_updated","lastUpdated",{unique:!1}),e.createIndex("quality_score","qualityScore",{unique:!1})}t.objectStoreNames.contains(this.METRICS_STORE)||t.createObjectStore(this.METRICS_STORE,{keyPath:"id"})}})}async fetchWithRetry(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"API call",s=Date.now();try{let a;if(e.includes("/markets/stock/list"))a="/data/listed_index.json";else{if(e.includes("/prices/daily_quotes"))return{data:[],message:"価格データは個別銘柄ファイルから取得してください"};a="/data/listed_index.json"}let r=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("HTTP ".concat(r.status,": ").concat(r.statusText));let o=await r.json(),n=Date.now()-s;return this.qualityMonitor.recordRequest(!0,n),console.info("".concat(t,"成功 (静的データ)"),{responseTime:n}),o}catch(a){let e=Date.now()-s;throw this.qualityMonitor.recordRequest(!1,e),console.warn("".concat(t,"失敗 (静的データ):"),a),Error("".concat(t,"が失敗: ").concat(a instanceof Error?a.message:"不明なエラー"))}}async makeApiCall(e){return this.rateLimiter.execute(e)}async getAllSymbols(){try{console.info("全銘柄一覧取得開始 (静的データ)");let e=await this.makeApiCall(()=>this.fetchWithRetry("".concat(this.config.baseUrl,"/markets/stock/list"),{method:"GET"},"全銘柄一覧取得")),t=((null==e?void 0:e.stocks)||(null==e?void 0:e.data)||[]).map(e=>({code:(null==e?void 0:e.code)||(null==e?void 0:e.Code),name:(null==e?void 0:e.name)||(null==e?void 0:e.CompanyName)||(null==e?void 0:e.CompanyNameJa)||(null==e?void 0:e.CompanyNameJp)||(null==e?void 0:e.CompanyNameJPN),sector:(null==e?void 0:e.sector)||(null==e?void 0:e.Sector33)||(null==e?void 0:e.SectorName)})).filter(e=>!!e.code&&!!e.name);return console.info("全銘柄一覧取得完了 (静的データ)",{count:t.length}),t}catch(e){return console.error("全銘柄一覧取得エラー (静的データ):",e),[]}}async testConnection(){try{var e,t;console.info("J-Quants接続テスト開始");let s=await this.makeApiCall(()=>this.fetchWithRetry("".concat(this.config.baseUrl,"/markets/stock/list"),{method:"GET"},"接続テスト")),a=this.qualityMonitor.getMetrics(),r=this.qualityMonitor.getHealthStatus();return console.info("J-Quants接続テスト成功",{dataCount:(null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.length)||0,healthStatus:r.status}),{success:!0,message:"接続成功: ".concat((null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.length)||0,"件の銘柄データを取得 (健康状態: ").concat(r.status,")"),metrics:a}}catch(t){console.error("J-Quants接続テスト失敗:",t);let e=this.qualityMonitor.getMetrics();return{success:!1,message:"接続失敗: ".concat(t instanceof Error?t.message:"不明なエラー"),metrics:e}}}async getStockData(e,t,s){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];try{if(console.info("株価データ取得開始",{symbol:e,startDate:t,endDate:s,useCache:a}),a){let a=await this.getCachedData(e,t,s);if(a.length>0)return console.info("キャッシュからデータ取得",{symbol:e,count:a.length,dateRange:"".concat(t," - ").concat(s)}),a}let r=await this.makeApiCall(()=>this.fetchFromAPI(e,t,s)),o=r,n=[];if(this.config.enableDataValidation){let e=l.validateStockData(r);o=e.validData,(n=e.errors).length>0&&(console.warn("データ検証エラー:",n),this.qualityMonitor.recordRequest(!1,0,"validation"))}if(this.config.enableQualityMonitoring&&o.length>0){let t=l.calculateQualityScore(o.length,r.length),s={symbol:e,totalRecords:r.length,validRecords:o.length,invalidRecords:r.length-o.length,qualityScore:t,validationErrors:n.map(e=>({type:"validation",count:1,description:e})),recommendations:this.generateQualityRecommendations(t,n)};this.qualityMonitor.recordDataQuality(e,s)}return a&&o.length>0&&await this.saveToCache(e,o,t,s,n),console.info("APIからデータ取得完了",{symbol:e,count:o.length,qualityScore:this.config.enableQualityMonitoring?l.calculateQualityScore(o.length,r.length):void 0}),o}catch(e){throw console.error("株価データ取得エラー:",e),e}}async fetchFromAPI(e,t,s){let a=await this.fetchWithRetry("".concat(this.config.baseUrl,"/markets/daily_quotes"),{method:"GET"},"株価データ取得 (".concat(e,")"));return this.transformAPIResponse(a,e)}transformAPIResponse(e,t){return(null==e?void 0:e.data)?e.data.filter(e=>e.code===t).map(e=>({date:e.date,code:e.code,open:parseFloat(e.open)||0,high:parseFloat(e.high)||0,low:parseFloat(e.low)||0,close:parseFloat(e.close)||0,volume:parseInt(e.volume)||0})):[]}async getCachedData(e,t,s){return this.db?new Promise((a,r)=>{let o=this.db.transaction([this.STORE_NAME],"readonly").objectStore(this.STORE_NAME).index("symbol").getAll(e);o.onsuccess=()=>{a(o.result.filter(e=>e.date>=t&&e.date<=s))},o.onerror=()=>{console.error("キャッシュ取得エラー:",o.error),r(o.error)}}):[]}async saveToCache(e,t,s,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(this.db&&0!==t.length)return new Promise((o,n)=>{let i=this.db.transaction([this.STORE_NAME,this.METADATA_STORE],"readwrite"),c=i.objectStore(this.STORE_NAME),d=i.objectStore(this.METADATA_STORE),u=0,h=t.length+1;t.forEach(e=>{let t=c.put(e);t.onsuccess=()=>{++u===h&&o()},t.onerror=()=>{console.error("キャッシュ保存エラー:",t.error),n(t.error)}});let m=l.calculateQualityScore(t.length,t.length+r.length),x={lastUpdated:new Date().toISOString(),dataVersion:"2.0",symbol:e,dateRange:{start:s,end:a},qualityScore:m,validationErrors:r},g=d.put(x);g.onsuccess=()=>{++u===h&&o()},g.onerror=()=>{console.error("メタデータ保存エラー:",g.error),n(g.error)}})}generateQualityRecommendations(e,t){let s=[];return e<90&&s.push("データ品質が低下しています。APIの安定性を確認してください。"),t.some(e=>e.includes("Invalid date format"))&&s.push("日付フォーマットの検証を強化してください。"),t.some(e=>e.includes("price"))&&s.push("価格データの異常値をチェックしてください。"),t.some(e=>e.includes("volume"))&&s.push("出来高データの検証を強化してください。"),s}getSystemHealth(){let e=this.qualityMonitor.getHealthStatus(),t=this.qualityMonitor.getMetrics(),s=this.qualityMonitor.getAllQualityReports();return{status:e.status,issues:e.issues,metrics:t,qualityReports:s}}async getCacheStats(){return this.db?new Promise((e,t)=>{let s=this.db.transaction([this.STORE_NAME,this.METADATA_STORE],"readonly"),a=s.objectStore(this.STORE_NAME),r=s.objectStore(this.METADATA_STORE),o=a.getAll(),n=r.getAll(),i=[],l=[];o.onsuccess=()=>{i=o.result},n.onsuccess=()=>{l=n.result},s.oncomplete=()=>{let t=[...new Set(i.map(e=>e.symbol))],s=l.length>0?Math.max(...l.map(e=>new Date(e.lastUpdated).getTime())):0,a=l.length>0?l.reduce((e,t)=>e+(t.qualityScore||0),0)/l.length:0,r=l.reduce((e,t)=>{var s;return e+((null===(s=t.validationErrors)||void 0===s?void 0:s.length)||0)},0);e({totalRecords:i.length,symbols:t,lastUpdated:s>0?new Date(s).toISOString():"",averageQualityScore:Math.round(a),totalValidationErrors:r})},s.onerror=()=>{t(s.error)}}):{totalRecords:0,symbols:[],lastUpdated:"",averageQualityScore:0,totalValidationErrors:0}}async clearCache(e){if(this.db)return new Promise((t,s)=>{let a=this.db.transaction([this.STORE_NAME,this.METADATA_STORE],"readwrite");if(e){let s=a.objectStore(this.STORE_NAME),r=a.objectStore(this.METADATA_STORE),o=s.index("symbol").getAll(e);o.onsuccess=()=>{let a=o.result,n=0;a.forEach(o=>{s.delete([o.symbol,o.date]).onsuccess=()=>{++n===a.length&&(r.delete(e),t())}})}}else{let e=a.objectStore(this.STORE_NAME),s=a.objectStore(this.METADATA_STORE);e.clear(),s.clear(),t()}})}constructor(e={}){this.db=null,this.DB_NAME="jquants_enhanced_cache",this.DB_VERSION=2,this.STORE_NAME="stock_data",this.METADATA_STORE="metadata",this.METRICS_STORE="metrics",this.config={token:e.token||"",baseUrl:e.baseUrl||"https://api.jquants.com/v1",timeout:e.timeout||3e4,maxRetries:e.maxRetries||3,retryDelay:e.retryDelay||1e3,rateLimitDelay:e.rateLimitDelay||100,enableDataValidation:!1!==e.enableDataValidation,enableQualityMonitoring:!1!==e.enableQualityMonitoring,autoTokenRefresh:!1!==e.autoTokenRefresh,tokenRefreshThreshold:e.tokenRefreshThreshold||2},this.rateLimiter=new i(this.config.rateLimitDelay),this.qualityMonitor=new c,this.initDB()}}var u=()=>{let[e,t]=(0,n.useState)(null),[s,i]=(0,n.useState)(!0),[l,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[g,p]=(0,n.useState)(""),[y,b]=(0,n.useState)("code"),[f,v]=(0,n.useState)("asc"),[N,j]=(0,n.useState)(1),[w]=(0,n.useState)(50),[S,R]=(0,n.useState)(!1),[E,k]=(0,n.useState)({min:"",max:""}),[T,A]=(0,n.useState)({min:"",max:""}),[_]=(0,n.useState)(()=>new d),q=(0,n.useCallback)(async()=>{try{i(!0),c(null);let e=await fetch("/data/listed_index.json");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();try{let e=await _.getAllSymbols();if(e.length>0){let o=s.stocks.map(t=>{let s=e.find(e=>e.code===t.code);return(0,r._)((0,a._)({},t),{name:(null==s?void 0:s.name)||t.name,sector:(null==s?void 0:s.sector)||t.sector})});t((0,r._)((0,a._)({},s),{stocks:o,metadata:(0,r._)((0,a._)({},s.metadata),{last_updated:new Date().toISOString()})}))}else t(s)}catch(e){console.warn("J-Quants API取得に失敗、キャッシュデータを使用:",e),t(s)}}catch(e){console.error("Error fetching listed data:",e),c("データの取得に失敗しました")}finally{i(!1)}},[_]);(0,n.useEffect)(()=>{q()},[q]);let D=(0,n.useMemo)(()=>e?Array.from(new Set(e.stocks.map(e=>e.sector))).sort():[],[e]),M=(0,n.useMemo)(()=>e?Array.from(new Set(e.stocks.map(e=>e.market))).sort():[],[e]),C=(0,n.useCallback)(e=>{y===e?v("asc"===f?"desc":"asc"):(b(e),v("asc")),j(1)},[y,f]),I=(0,n.useMemo)(()=>{if(!e)return[];let t=u.toLowerCase(),s=E.min?parseFloat(E.min):null,a=E.max?parseFloat(E.max):null,r=T.min?parseFloat(T.min):null,o=T.max?parseFloat(T.max):null,n=e.stocks.filter(e=>{let n=e.name.toLowerCase().includes(t)||e.code.includes(u),i=!m||e.sector===m,l=!g||e.market===g,c=!s||!a||e.currentPrice&&e.currentPrice>=s&&e.currentPrice<=a,d=!r||!o||e.volume&&e.volume>=r&&e.volume<=o;return n&&i&&l&&c&&d});return n.sort((e,t)=>{let s=e[y],a=t[y];return(("currentPrice"===y||"change"===y||"volume"===y)&&(s=s||0,a=a||0),"string"==typeof s&&(s=s.toLowerCase(),a=a.toLowerCase()),s<a)?"asc"===f?-1:1:s>a?"asc"===f?1:-1:0}),n},[e,u,m,g,y,f,E,T]);(0,n.useEffect)(()=>{j(1)},[u,m,g,E,T]);let O=(0,n.useMemo)(()=>{let e=(N-1)*w;return I.slice(e,e+w)},[I,N,w]),P=Math.ceil(I.length/w),L=(0,n.useCallback)(e=>{j(Math.max(1,Math.min(e,P)))},[P]),Q=(0,n.useCallback)(()=>L(1),[L]),F=(0,n.useCallback)(()=>L(P),[L,P]),U=(0,n.useCallback)(()=>L(N-1),[L,N]),V=(0,n.useCallback)(()=>L(N+1),[L,N]);return s?(0,o.jsx)("div",{className:"container mx-auto p-4",children:(0,o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto"}),(0,o.jsx)("p",{className:"mt-4 text-lg",children:"上場銘柄データを読み込み中..."})]})})}):l?(0,o.jsx)("div",{className:"container mx-auto p-4",children:(0,o.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-2",children:"エラーが発生しました"}),(0,o.jsx)("p",{children:l}),(0,o.jsx)("button",{onClick:q,className:"mt-4 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"再試行"})]})}):e?(0,o.jsxs)("div",{className:"container mx-auto p-4",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"jQuants 上場銘柄データ"}),(0,o.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"データ情報"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"総銘柄数:"})," ",e.metadata.total_stocks]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"最終更新:"})," ",new Date(e.metadata.last_updated).toLocaleString("ja-JP")]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"データタイプ:"})," ",e.metadata.data_type]})]})]}),(0,o.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold",children:"検索・フィルター"}),(0,o.jsx)("button",{onClick:()=>R(!S),className:"text-blue-600 hover:text-blue-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded","aria-expanded":S,"aria-controls":"advanced-filters",children:S?"詳細フィルターを閉じる":"詳細フィルターを開く"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索 (銘柄名・コード)"}),(0,o.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"銘柄名またはコードを入力...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"セクター"}),(0,o.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"すべてのセクター"}),D.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"市場"}),(0,o.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"すべての市場"}),M.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]})]}),S&&(0,o.jsx)("div",{id:"advanced-filters",className:"mt-4 pt-4 border-t border-gray-200",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"価格範囲 (円)"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"number",value:E.min,onChange:e=>k(t=>(0,r._)((0,a._)({},t),{min:e.target.value})),placeholder:"最小価格",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,o.jsx)("input",{type:"number",value:E.max,onChange:e=>k(t=>(0,r._)((0,a._)({},t),{max:e.target.value})),placeholder:"最大価格",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"出来高範囲"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"number",value:T.min,onChange:e=>A(t=>(0,r._)((0,a._)({},t),{min:e.target.value})),placeholder:"最小出来高",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,o.jsx)("input",{type:"number",value:T.max,onChange:e=>A(t=>(0,r._)((0,a._)({},t),{max:e.target.value})),placeholder:"最大出来高",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,o.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[(0,o.jsxs)("h2",{className:"text-xl font-semibold",children:["銘柄一覧 (",I.length,"件)"]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:[N," / ",P," ページ"]}),(0,o.jsx)("button",{onClick:q,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"更新"})]})]}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>C("code"),role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),C("code"))},"aria-sort":"code"===y?"asc"===f?"ascending":"descending":"none",children:["銘柄コード","code"===y&&(0,o.jsx)("span",{className:"ml-1","aria-hidden":"true",children:"asc"===f?"↑":"↓"})]}),(0,o.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>C("name"),role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),C("name"))},"aria-sort":"name"===y?"asc"===f?"ascending":"descending":"none",children:["会社名","name"===y&&(0,o.jsx)("span",{className:"ml-1","aria-hidden":"true",children:"asc"===f?"↑":"↓"})]}),(0,o.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>C("sector"),role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),C("sector"))},"aria-sort":"sector"===y?"asc"===f?"ascending":"descending":"none",children:["セクター","sector"===y&&(0,o.jsx)("span",{className:"ml-1","aria-hidden":"true",children:"asc"===f?"↑":"↓"})]}),(0,o.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:()=>C("market"),role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),C("market"))},"aria-sort":"market"===y?"asc"===f?"ascending":"descending":"none",children:["市場","market"===y&&(0,o.jsx)("span",{className:"ml-1","aria-hidden":"true",children:"asc"===f?"↑":"↓"})]}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"現在価格"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"出来高"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"更新日時"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"アクション"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.code}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,o.jsx)("div",{className:"max-w-xs truncate",title:e.name,children:e.name})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,o.jsx)("div",{className:"max-w-xs truncate",title:e.sector,children:e.sector})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("プライム"===e.market?"bg-green-100 text-green-800":"スタンダード"===e.market?"bg-blue-100 text-blue-800":"グロース"===e.market?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.market})}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.currentPrice?"\xa5".concat(e.currentPrice.toLocaleString()):"-",e.change&&e.changePercent&&(0,o.jsxs)("div",{className:"text-xs ".concat(e.change>=0?"text-red-600":"text-green-600"),children:[e.change>=0?"+":"",e.change.toLocaleString()," (",e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%)"]})]}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.volume?e.volume.toLocaleString():"-"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.updated_at).toLocaleString("ja-JP")}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsx)("button",{onClick:()=>window.open("/dashboard?symbol=".concat(e.code),"_blank"),className:"text-blue-600 hover:text-blue-800 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2 py-1","aria-label":"".concat(e.name," (").concat(e.code,") の詳細ページを新しいタブで開く"),children:"詳細"})})]},e.code))})]})}),P>1&&(0,o.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-between",children:[(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsxs)("span",{className:"text-sm text-gray-700",children:[(N-1)*w+1," - ",Math.min(N*w,I.length)," / ",I.length," 件"]})}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("button",{onClick:Q,disabled:1===N,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"最初のページへ",children:"最初"}),(0,o.jsx)("button",{onClick:U,disabled:1===N,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"前のページへ",children:"前へ"}),(0,o.jsx)("span",{className:"px-3 py-1 text-sm bg-blue-500 text-white rounded","aria-label":"現在のページ: ".concat(N),children:N}),(0,o.jsx)("button",{onClick:V,disabled:N===P,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"次のページへ",children:"次へ"}),(0,o.jsx)("button",{onClick:F,disabled:N===P,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"最後のページへ",children:"最後"})]})]})]})]}):(0,o.jsx)("div",{className:"container mx-auto p-4",children:(0,o.jsxs)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded",children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-2",children:"データが見つかりません"}),(0,o.jsx)("p",{children:"上場銘柄データが利用できません。"})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3007)}),_N_E=e.O()}]);